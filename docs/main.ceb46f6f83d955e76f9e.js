(self.webpackChunkposts=self.webpackChunkposts||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},7238:(e,t,n)=>{"use strict";n.d(t,{l3:()=>i,_j:()=>r,LC:()=>s,ZN:()=>f,jt:()=>a,vP:()=>u,SB:()=>c,oB:()=>l,eR:()=>h,X$:()=>o,ZE:()=>p,k1:()=>m});class r{}class s{}const i="*";function o(e,t){return{type:7,name:e,definitions:t,options:{}}}function a(e,t=null){return{type:4,styles:t,timings:e}}function u(e,t=null){return{type:2,steps:e,options:t}}function l(e){return{type:6,styles:e,offset:null}}function c(e,t,n){return{type:0,name:e,styles:t,options:n}}function h(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function d(e){Promise.resolve(null).then(e)}class f{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){d(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class p{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?d(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==s&&this._onFinish()}),e.onDestroy(()=>{++n==s&&this._onDestroy()}),e.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const m="!"},8583:(e,t,n)=>{"use strict";n.d(t,{mr:()=>w,Ov:()=>q,ez:()=>z,K0:()=>u,Do:()=>T,V_:()=>h,Ye:()=>S,S$:()=>v,sg:()=>O,O5:()=>P,b0:()=>b,lw:()=>l,EM:()=>H,JF:()=>K,PM:()=>$,w_:()=>a,bD:()=>B,q:()=>i,Mx:()=>N,HT:()=>o});var r=n(3018);let s=null;function i(){return s}function o(e){s||(s=e)}class a{}const u=new r.OlP("DocumentToken");let l=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:c,token:e,providedIn:"platform"}),e})();function c(){return(0,r.LFG)(d)}const h=new r.OlP("Location Initialized");let d=(()=>{class e extends l{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return i().getBaseHref(this._doc)}onPopState(e){const t=i().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=i().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){f()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){f()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(u))},e.\u0275prov=(0,r.Yz7)({factory:p,token:e,providedIn:"platform"}),e})();function f(){return!!window.history.pushState}function p(){return new d((0,r.LFG)(u))}function m(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function g(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function y(e){return e&&"?"!==e[0]?"?"+e:e}let v=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:_,token:e,providedIn:"root"}),e})();function _(e){const t=(0,r.LFG)(u).location;return new b((0,r.LFG)(l),t&&t.origin||"")}const w=new r.OlP("appBaseHref");let b=(()=>{class e extends v{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return m(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const s=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(e,t,s)}replaceState(e,t,n,r){const s=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(l),r.LFG(w,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),T=(()=>{class e extends v{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=m(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let s=this.prepareExternalUrl(n+y(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,t,s)}replaceState(e,t,n,r){let s=this.prepareExternalUrl(n+y(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(l),r.LFG(w,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),S=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=g(I(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+y(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,I(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(v),r.LFG(l))},e.normalizeQueryParams=y,e.joinWithSlash=m,e.stripTrailingSlash=g,e.\u0275prov=(0,r.Yz7)({factory:E,token:e,providedIn:"root"}),e})();function E(){return new S((0,r.LFG)(v),(0,r.LFG)(l))}function I(e){return e.replace(/\/index.html$/,"")}var C=(()=>((C=C||{})[C.Zero=0]="Zero",C[C.One=1]="One",C[C.Two=2]="Two",C[C.Few=3]="Few",C[C.Many=4]="Many",C[C.Other=5]="Other",C))();const k=r.kL8;class A{}let x=(()=>{class e extends A{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(k(t||this.locale)(e)){case C.Zero:return"zero";case C.One:return"one";case C.Two:return"two";case C.Few:return"few";case C.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function N(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,s]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}class R{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let O=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new R(null,this._ngForOf,-1,-1),null===r?void 0:r),s=new D(e,n);t.push(s)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const i=new D(e,s);t.push(i)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class D{constructor(e,t){this.record=e,this.view=t}}let P=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new L,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){F("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){F("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class L{constructor(){this.$implicit=null,this.ngIf=null}}function F(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}class M{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class U{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const j=new U,V=new M;let q=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return j;if((0,r.F4k)(t))return V;throw Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:A,useClass:x}]}),e})();const B="browser";function $(e){return"server"===e}let H=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new Z((0,r.LFG)(u),window)}),e})();class Z{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=G(this.window.history)||G(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function G(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class K{}},1841:(e,t,n)=>{"use strict";n.d(t,{TP:()=>N,eN:()=>A,JF:()=>q,Zn:()=>I});var r=n(8583),s=n(3018),i=n(5917),o=n(7574),a=n(4612),u=n(5435),l=n(8002);class c{}class h{}class d{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),s=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new d;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===s.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class f{encodeKey(e){return p(e)}encodeValue(e){return p(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function p(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function m(e){return`${e}`}class g{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new f,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[s,i]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(s)||[];o.push(i),n.set(s,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new g({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(m(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(m(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class y{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function v(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function _(e){return"undefined"!=typeof Blob&&e instanceof Blob}function w(e){return"undefined"!=typeof FormData&&e instanceof FormData}class b{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new d),this.context||(this.context=new y),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new g,this.urlWithParams=t}serializeBody(){return null===this.body?null:v(this.body)||_(this.body)||w(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof g?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||w(this.body)?null:_(this.body)?this.body.type||null:v(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof g?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,l=e.params||this.params;const c=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new b(n,r,i,{params:l,headers:u,context:c,reportProgress:a,responseType:s,withCredentials:o})}}var T=(()=>((T=T||{})[T.Sent=0]="Sent",T[T.UploadProgress=1]="UploadProgress",T[T.ResponseHeader=2]="ResponseHeader",T[T.DownloadProgress=3]="DownloadProgress",T[T.Response=4]="Response",T[T.User=5]="User",T))();class S{constructor(e,t=200,n="OK"){this.headers=e.headers||new d,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class E extends S{constructor(e={}){super(e),this.type=T.ResponseHeader}clone(e={}){return new E({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class I extends S{constructor(e={}){super(e),this.type=T.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new I({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class C extends S{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function k(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let A=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof b)r=e;else{let s,i;s=n.headers instanceof d?n.headers:new d(n.headers),n.params&&(i=n.params instanceof g?n.params:new g({fromObject:n.params})),r=new b(e,t,void 0!==n.body?n.body:null,{headers:s,context:n.context,params:i,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const s=(0,i.of)(r).pipe((0,a.b)(e=>this.handler.handle(e)));if(e instanceof b||"events"===n.observe)return s;const o=s.pipe((0,u.h)(e=>e instanceof I));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,l.U)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return o.pipe((0,l.U)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return o.pipe((0,l.U)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return o.pipe((0,l.U)(e=>e.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new g).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,k(n,t))}post(e,t,n={}){return this.request("POST",e,k(n,t))}put(e,t,n={}){return this.request("PUT",e,k(n,t))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(c))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class x{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const N=new s.OlP("HTTP_INTERCEPTORS");let R=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const O=/^\)\]\}',?\n/;let D=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new o.y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let s=null;const i=()=>{if(null!==s)return s;const t=1223===n.status?204:n.status,r=n.statusText||"OK",i=new d(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return s=new E({headers:i,status:t,statusText:r,url:o}),s},o=()=>{let{headers:r,status:s,statusText:o,url:a}=i(),u=null;204!==s&&(u=void 0===n.response?n.responseText:n.response),0===s&&(s=u?200:0);let l=s>=200&&s<300;if("json"===e.responseType&&"string"==typeof u){const e=u;u=u.replace(O,"");try{u=""!==u?JSON.parse(u):null}catch(c){u=e,l&&(l=!1,u={error:c,text:u})}}l?(t.next(new I({body:u,headers:r,status:s,statusText:o,url:a||void 0})),t.complete()):t.error(new C({error:u,headers:r,status:s,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=i(),s=new C({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(s)};let u=!1;const l=r=>{u||(t.next(i()),u=!0);let s={type:T.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(s.total=r.total),"text"===e.responseType&&n.responseText&&(s.partialText=n.responseText),t.next(s)},c=e=>{let n={type:T.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",l),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),t.next({type:T.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",l),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.JF))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const P=new s.OlP("XSRF_COOKIE_NAME"),L=new s.OlP("XSRF_HEADER_NAME");class F{}let M=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,r.Mx)(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.K0),s.LFG(s.Lbi),s.LFG(P))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),U=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(F),s.LFG(L))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),j=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(N,[]);this.chain=e.reduceRight((e,t)=>new x(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(h),s.LFG(s.zs3))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),V=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:U,useClass:R}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:P,useValue:t.cookieName}:[],t.headerName?{provide:L,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[U,{provide:N,useExisting:U,multi:!0},{provide:F,useClass:M},{provide:P,useValue:"XSRF-TOKEN"},{provide:L,useValue:"X-XSRF-TOKEN"}]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[A,{provide:c,useClass:j},D,{provide:h,useExisting:D}],imports:[[V.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})()},3018:(e,t,n)=>{"use strict";n.d(t,{deG:()=>sn,tb:()=>_u,AFp:()=>pu,ip1:()=>du,CZH:()=>fu,hGG:()=>dl,z2F:()=>nl,sBO:()=>va,Sil:()=>Nu,_Vd:()=>zo,EJc:()=>Tu,SBq:()=>Zo,qLn:()=>Tr,vpe:()=>Qa,gxx:()=>si,tBr:()=>En,XFs:()=>R,OlP:()=>rn,zs3:()=>_i,ZZ4:()=>ha,aQg:()=>fa,soG:()=>bu,YKP:()=>Aa,v3s:()=>sl,h0i:()=>ka,PXZ:()=>Yu,R0b:()=>Du,FiY:()=>In,Lbi:()=>vu,g9A:()=>yu,Qsj:()=>Wo,FYo:()=>Ko,JOm:()=>Cr,Tiy:()=>Yo,q3G:()=>pr,tp0:()=>Cn,EAV:()=>al,Rgc:()=>Sa,dDg:()=>Vu,DyG:()=>on,q4F:()=>Xo,GfV:()=>Jo,s_b:()=>Na,ifc:()=>M,eFA:()=>Ju,G48:()=>Wu,Gpc:()=>m,X6Q:()=>Ku,_c5:()=>cl,VLi:()=>Bu,c2e:()=>wu,zSh:()=>oi,wAp:()=>Ao,vHH:()=>v,EiD:()=>dr,mCW:()=>Wn,qzn:()=>Un,JVY:()=>Vn,pB0:()=>$n,eBb:()=>zn,L6k:()=>qn,LAX:()=>Bn,cg1:()=>Io,Tjo:()=>ll,kL8:()=>Co,yhl:()=>jn,dqk:()=>z,sIi:()=>xi,CqO:()=>Gi,QGY:()=>Hi,F4k:()=>Zi,RDi:()=>Ce,AaK:()=>d,z3N:()=>Mn,qOj:()=>bi,TTD:()=>we,_Bn:()=>jo,xp6:()=>ls,uIk:()=>Oi,Tol:()=>ao,ekj:()=>oo,Suo:()=>lu,Xpm:()=>X,lG2:()=>oe,Yz7:()=>T,cJS:()=>S,oAB:()=>re,Yjl:()=>ae,Y36:()=>Fi,_UZ:()=>qi,BQk:()=>Bi,ynx:()=>zi,qZA:()=>Vi,TgZ:()=>ji,EpF:()=>$i,n5z:()=>Jt,Ikx:()=>bo,LFG:()=>bn,$8M:()=>en,NdJ:()=>Ki,CRH:()=>cu,oxw:()=>Yi,ALo:()=>Ga,lcZ:()=>Ka,Q6J:()=>Mi,s9C:()=>Ji,VKq:()=>Ha,iGM:()=>uu,MAs:()=>Li,Jf7:()=>Er,CHM:()=>He,oJD:()=>mr,LSH:()=>gr,kYT:()=>se,YNc:()=>Pi,_uU:()=>vo,Oqu:()=>_o,hij:()=>wo});var r=n(9765),s=n(5319),i=n(7574),o=n(6682),a=n(2441),u=n(1307);function l(){return new r.xQ}function c(e){for(let t in e)if(e[t]===c)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=c({__forward_ref__:c});function m(e){return e.__forward_ref__=m,e.toString=function(){return d(this())},e}function g(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===m}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function _(e){return"string"==typeof e?e:null==e?"":String(e)}function w(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():_(e)}function b(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${w(e)} found${n}`)}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function S(e){return{providers:e.providers||[],imports:e.imports||[]}}function E(e){return I(e,k)||I(e,x)}function I(e,t){return e.hasOwnProperty(t)?e[t]:null}function C(e){return e&&(e.hasOwnProperty(A)||e.hasOwnProperty(N))?e[A]:null}const k=c({"\u0275prov":c}),A=c({"\u0275inj":c}),x=c({ngInjectableDef:c}),N=c({ngInjectorDef:c});var R=(()=>((R=R||{})[R.Default=0]="Default",R[R.Host=1]="Host",R[R.Self=2]="Self",R[R.SkipSelf=4]="SkipSelf",R[R.Optional=8]="Optional",R))();let O;function D(e){const t=O;return O=e,t}function P(e,t,n){const r=E(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==t?t:void b(d(e),"Injector")}function L(e){return{toString:e}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),M=(()=>((M=M||{})[M.Emulated=0]="Emulated",M[M.None=2]="None",M[M.ShadowDom=3]="ShadowDom",M))();const U="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,z=U||q||j||V,B={},$=[],H=c({"\u0275cmp":c}),Z=c({"\u0275dir":c}),G=c({"\u0275pipe":c}),K=c({"\u0275mod":c}),W=c({"\u0275loc":c}),Q=c({"\u0275fac":c}),Y=c({__NG_ELEMENT_ID__:c});let J=0;function X(e){return L(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||$,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||M.Emulated,id:"c",styles:e.styles||$,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,s=e.features,i=e.pipes;return n.id+=J++,n.inputs=ie(e.inputs,t),n.outputs=ie(e.outputs),s&&s.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=i?()=>("function"==typeof i?i():i).map(te):null,n})}function ee(e){return ue(e)||function(e){return e[Z]||null}(e)}function te(e){return function(e){return e[G]||null}(e)}const ne={};function re(e){return L(()=>{const t={type:e.type,bootstrap:e.bootstrap||$,declarations:e.declarations||$,imports:e.imports||$,exports:e.exports||$,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function se(e,t){return L(()=>{const n=le(e,!0);n.declarations=t.declarations||$,n.imports=t.imports||$,n.exports=t.exports||$})}function ie(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let s=e[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),n[s]=r,t&&(t[s]=i)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ue(e){return e[H]||null}function le(e,t){const n=e[K]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}const ce=20,he=10;function de(e){return Array.isArray(e)&&"object"==typeof e[1]}function fe(e){return Array.isArray(e)&&!0===e[1]}function pe(e){return 0!=(8&e.flags)}function me(e){return 2==(2&e.flags)}function ge(e){return 1==(1&e.flags)}function ye(e){return null!==e.template}function ve(e,t){return e.hasOwnProperty(Q)?e[Q]:null}class _e{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function we(){return be}function be(e){return e.type.prototype.ngOnChanges&&(e.setInput=Se),Te}function Te(){const e=Ee(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Se(e,t,n,r){const s=Ee(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[n],u=o[a];i[a]=new _e(u&&u.currentValue,t,o===B),e[r]=t}function Ee(e){return e.__ngSimpleChanges__||null}let Ie;function Ce(e){Ie=e}function ke(){return void 0!==Ie?Ie:"undefined"!=typeof document?document:void 0}function Ae(e){return!!e.listen}we.ngInherit=!0;const xe={createRenderer:(e,t)=>ke()};function Ne(e){for(;Array.isArray(e);)e=e[0];return e}function Re(e,t){return Ne(t[e])}function Oe(e,t){return Ne(t[e.index])}function De(e,t){return e.data[t]}function Pe(e,t){return e[t]}function Le(e,t){const n=t[e];return de(n)?n:n[0]}function Fe(e){return 4==(4&e[2])}function Me(e){return 128==(128&e[2])}function Ue(e,t){return null==t?null:e[t]}function je(e){e[18]=0}function Ve(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const qe={lFrame:ct(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ze(){return qe.bindingsEnabled}function Be(){return qe.lFrame.lView}function $e(){return qe.lFrame.tView}function He(e){return qe.lFrame.contextLView=e,e[8]}function Ze(){let e=Ge();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ge(){return qe.lFrame.currentTNode}function Ke(e,t){const n=qe.lFrame;n.currentTNode=e,n.isParent=t}function We(){return qe.lFrame.isParent}function Qe(){qe.lFrame.isParent=!1}function Ye(){return qe.isInCheckNoChangesMode}function Je(e){qe.isInCheckNoChangesMode=e}function Xe(){const e=qe.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function et(){return qe.lFrame.bindingIndex++}function tt(e){const t=qe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function nt(e,t){const n=qe.lFrame;n.bindingIndex=n.bindingRootIndex=e,rt(t)}function rt(e){qe.lFrame.currentDirectiveIndex=e}function st(){return qe.lFrame.currentQueryIndex}function it(e){qe.lFrame.currentQueryIndex=e}function ot(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function at(e,t,n){if(n&R.SkipSelf){let r=t,s=e;for(;r=r.parent,!(null!==r||n&R.Host||(r=ot(s),null===r)||(s=s[15],10&r.type)););if(null===r)return!1;t=r,e=s}const r=qe.lFrame=lt();return r.currentTNode=t,r.lView=e,!0}function ut(e){const t=lt(),n=e[1];qe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function lt(){const e=qe.lFrame,t=null===e?null:e.child;return null===t?ct(e):t}function ct(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ht(){const e=qe.lFrame;return qe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const dt=ht;function ft(){const e=ht();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function pt(){return qe.lFrame.selectedIndex}function mt(e){qe.lFrame.selectedIndex=e}function gt(){const e=qe.lFrame;return De(e.tView,e.selectedIndex)}function yt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:s,ngAfterViewInit:i,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),s&&((e.contentHooks||(e.contentHooks=[])).push(n,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,s)),i&&(e.viewHooks||(e.viewHooks=[])).push(-n,i),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function vt(e,t,n){bt(e,t,3,n)}function _t(e,t,n,r){(3&e[2])===n&&bt(e,t,n,r)}function wt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bt(e,t,n,r){const s=null!=r?r:-1,i=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<i;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<s||-1==s)&&(Tt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Tt(e,t,n,r){const s=n[r]<0,i=n[r+1],o=e[s?-n[r]:n[r]];if(s){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{i.call(o)}finally{}}}else try{i.call(o)}finally{}}const St=-1;class Et{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function It(e,t,n){const r=Ae(e);let s=0;for(;s<n.length;){const i=n[s];if("number"==typeof i){if(0!==i)break;s++;const o=n[s++],a=n[s++],u=n[s++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=i,a=n[++s];kt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),s++}}return s}function Ct(e){return 3===e||4===e||6===e}function kt(e){return 64===e.charCodeAt(0)}function At(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||xt(e,n,s,null,-1===n||2===n?t[++r]:null)}}return e}function xt(e,t,n,r,s){let i=0,o=e.length;if(-1===t)o=-1;else for(;i<e.length;){const n=e[i++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=i-1;break}}}for(;i<e.length;){const t=e[i];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==s&&(e[i+1]=s));if(r===e[i+1])return void(e[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==s&&e.splice(i++,0,s)}function Nt(e){return e!==St}function Rt(e){return 32767&e}function Ot(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Dt=!0;function Pt(e){const t=Dt;return Dt=e,t}let Lt=0;function Ft(e,t){const n=Ut(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Mt(r.data,e),Mt(t,null),Mt(r.blueprint,null));const s=jt(e,t),i=e.injectorIndex;if(Nt(s)){const e=Rt(s),n=Ot(s,t),r=n[1].data;for(let s=0;s<8;s++)t[i+s]=n[e+s]|r[e+s]}return t[i+8]=s,i}function Mt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ut(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function jt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){const e=s[1],t=e.type;if(r=2===t?e.declTNode:1===t?s[6]:null,null===r)return St;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return St}function Vt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Lt++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function qt(e,t,n){if(n&R.Optional)return e;b(t,"NodeInjector")}function zt(e,t,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const s=e[9],i=D(void 0);try{return s?s.get(t,r,n&R.Optional):P(t,r,n&R.Optional)}finally{D(i)}}return qt(r,t,n)}function Bt(e,t,n,r=R.Default,s){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:Ht:t}(n);if("function"==typeof i){if(!at(t,e,r))return r&R.Host?qt(s,n,r):zt(t,n,r,s);try{const e=i(r);if(null!=e||r&R.Optional)return e;b(n)}finally{dt()}}else if("number"==typeof i){let s=null,o=Ut(e,t),a=St,u=r&R.Host?t[16][6]:null;for((-1===o||r&R.SkipSelf)&&(a=-1===o?jt(e,t):t[o+8],a!==St&&Qt(r,!1)?(s=t[1],o=Rt(a),t=Ot(a,t)):o=-1);-1!==o;){const e=t[1];if(Wt(i,o,e.data)){const e=Zt(o,t,n,s,r,u);if(e!==$t)return e}a=t[o+8],a!==St&&Qt(r,t[1].data[o+8]===u)&&Wt(i,o,t)?(s=e,o=Rt(a),t=Ot(a,t)):o=-1}}}return zt(t,n,r,s)}const $t={};function Ht(){return new Yt(Ze(),Be())}function Zt(e,t,n,r,s,i){const o=t[1],a=o.data[e+8],u=Gt(a,o,n,null==r?me(a)&&Dt:r!=o&&0!=(3&a.type),s&R.Host&&i===a);return null!==u?Kt(t,o,u,a):$t}function Gt(e,t,n,r,s){const i=e.providerIndexes,o=t.data,a=1048575&i,u=e.directiveStart,l=i>>20,c=s?a+l:e.directiveEnd;for(let h=r?a:a+l;h<c;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(s){const e=o[u];if(e&&ye(e)&&e.type===n)return u}return null}function Kt(e,t,n,r){let s=e[n];const i=t.data;if(s instanceof Et){const o=s;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(w(i[n]));const a=Pt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?D(o.injectImpl):null;at(e,r,R.Default);try{s=e[n]=o.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=t.type.prototype;if(r){const r=be(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,s),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i))}(n,i[n],t)}finally{null!==u&&D(u),Pt(a),o.resolving=!1,dt()}}return s}function Wt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Qt(e,t){return!(e&R.Self||e&R.Host&&t)}class Yt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Bt(this._tNode,this._lView,e,void 0,t)}}function Jt(e){return L(()=>{const t=e.prototype.constructor,n=t[Q]||Xt(t),r=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){const e=s[Q]||Xt(s);if(e&&e!==n)return e;s=Object.getPrototypeOf(s)}return e=>new e})}function Xt(e){return y(e)?()=>{const t=Xt(g(e));return t&&t()}:ve(e)}function en(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const s=n[r];if(Ct(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(s===t)return n[r+1];r+=2}}}return null}(Ze(),e)}const tn="__parameters__";function nn(e,t,n){return L(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function s(...e){if(this instanceof s)return r.apply(this,e),this;const t=new s(...e);return n.annotation=t,n;function n(e,n,r){const s=e.hasOwnProperty(tn)?e[tn]:Object.defineProperty(e,tn,{value:[]})[tn];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(t),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}class rn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=T({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sn=new rn("AnalyzeForEntryComponents"),on=Function;function an(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),an(r,t)):t!==e&&t.push(r)}return t}function un(e,t){e.forEach(e=>Array.isArray(e)?un(e,t):t(e))}function ln(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function cn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function hn(e,t,n){let r=fn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let s=e.length;if(s==t)e.push(n,r);else if(1===s)e.push(r,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;)e[s]=e[s-2],s--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function dn(e,t){const n=fn(e,t);if(n>=0)return e[1|n]}function fn(e,t){return function(e,t,n){let r=0,s=e.length>>1;for(;s!==r;){const n=r+(s-r>>1),i=e[n<<1];if(t===i)return n<<1;i>t?s=n:r=n+1}return~(s<<1)}(e,t)}const pn={},mn=/\n/gm,gn="__source",yn=c({provide:String,useValue:c});let vn;function _n(e){const t=vn;return vn=e,t}function wn(e,t=R.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?P(e,void 0,t):vn.get(e,t&R.Optional?null:void 0,t)}function bn(e,t=R.Default){return(O||wn)(g(e),t)}function Tn(e){const t=[];for(let n=0;n<e.length;n++){const r=g(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=R.Default;for(let t=0;t<r.length;t++){const s=r[t],i=s.__NG_DI_FLAG__;"number"==typeof i?-1===i?e=s.token:n|=i:e=s}t.push(bn(e,n))}else t.push(bn(r))}return t}function Sn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const En=Sn(nn("Inject",e=>({token:e})),-1),In=Sn(nn("Optional"),8),Cn=Sn(nn("SkipSelf"),4);let kn,An;function xn(e){var t;return(null===(t=function(){if(void 0===kn&&(kn=null,z.trustedTypes))try{kn=z.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return kn}())||void 0===t?void 0:t.createHTML(e))||e}function Nn(e){var t;return(null===(t=function(){if(void 0===An&&(An=null,z.trustedTypes))try{An=z.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return An}())||void 0===t?void 0:t.createHTML(e))||e}class Rn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class On extends Rn{getTypeName(){return"HTML"}}class Dn extends Rn{getTypeName(){return"Style"}}class Pn extends Rn{getTypeName(){return"Script"}}class Ln extends Rn{getTypeName(){return"URL"}}class Fn extends Rn{getTypeName(){return"ResourceURL"}}function Mn(e){return e instanceof Rn?e.changingThisBreaksApplicationSecurity:e}function Un(e,t){const n=jn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function jn(e){return e instanceof Rn&&e.getTypeName()||null}function Vn(e){return new On(e)}function qn(e){return new Dn(e)}function zn(e){return new Pn(e)}function Bn(e){return new Ln(e)}function $n(e){return new Fn(e)}class Hn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(xn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Zn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=xn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=xn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Gn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Kn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(e){return(e=String(e)).match(Gn)||e.match(Kn)?e:"unsafe:"+e}function Qn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Yn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Jn=Qn("area,br,col,hr,img,wbr"),Xn=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),er=Qn("rp,rt"),tr=Yn(er,Xn),nr=Yn(Jn,Yn(Xn,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(er,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),rr=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Qn("srcset"),ir=Yn(rr,sr,Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Qn("script,style,template");class ar{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!nr.hasOwnProperty(t))return this.sanitizedSomething=!0,!or.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let s=0;s<n.length;s++){const e=n.item(s),t=e.name,i=t.toLowerCase();if(!ir.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=e.value;rr[i]&&(o=Wn(o)),sr[i]&&(r=o,o=(r=String(r)).split(",").map(e=>Wn(e.trim())).join(", ")),this.buf.push(" ",t,'="',cr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();nr.hasOwnProperty(t)&&!Jn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(cr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lr=/([^\#-~ |!])/g;function cr(e){return e.replace(/&/g,"&amp;").replace(ur,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(lr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hr;function dr(e,t){let n=null;try{hr=hr||function(e){const t=new Zn(e);return function(){try{return!!(new window.DOMParser).parseFromString(xn(""),"text/html")}catch(e){return!1}}()?new Hn(t):t}(e);let r=t?String(t):"";n=hr.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=n.innerHTML,n=hr.getInertBodyElement(r)}while(r!==i);return xn((new ar).sanitizeChildren(fr(n)||n))}finally{if(n){const e=fr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function fr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function mr(e){const t=yr();return t?Nn(t.sanitize(pr.HTML,e)||""):Un(e,"HTML")?Nn(Mn(e)):dr(ke(),_(e))}function gr(e){const t=yr();return t?t.sanitize(pr.URL,e)||"":Un(e,"URL")?Mn(e):Wn(_(e))}function yr(){const e=Be();return e&&e[12]}function vr(e,t){e.__ngContext__=t}function _r(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function wr(e){return e.ngOriginalError}function br(e,...t){e.error(...t)}class Tr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||br}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(wr(e)):null}_findOriginalError(e){let t=e&&wr(e);for(;t&&wr(t);)t=wr(t);return t||null}}const Sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function Er(e){return e.ownerDocument.defaultView}function Ir(e){return e instanceof Function?e():e}var Cr=(()=>((Cr=Cr||{})[Cr.Important=1]="Important",Cr[Cr.DashCase=2]="DashCase",Cr))();function kr(e,t){return(void 0)(e,t)}function Ar(e){const t=e[3];return fe(t)?t[3]:t}function xr(e){return Rr(e[13])}function Nr(e){return Rr(e[4])}function Rr(e){for(;null!==e&&!fe(e);)e=e[4];return e}function Or(e,t,n,r,s){if(null!=r){let i,o=!1;fe(r)?i=r:de(r)&&(o=!0,r=r[0]);const a=Ne(r);0===e&&null!==n?null==s?jr(t,n,a):Ur(t,n,a,s||null,!0):1===e&&null!==n?Ur(t,n,a,s||null,!0):2===e?function(e,t,n){const r=qr(e,t);r&&function(e,t,n,r){Ae(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=i&&function(e,t,n,r,s){const i=n[7];i!==Ne(n)&&Or(t,e,r,i,s);for(let o=he;o<n.length;o++){const s=n[o];Gr(s[1],s,e,t,r,i)}}(t,e,i,n,s)}}function Dr(e,t,n){return Ae(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Pr(e,t){const n=e[9],r=n.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,Ve(s,-1)),n.splice(r,1)}function Lr(e,t){if(e.length<=he)return;const n=he+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Pr(i,r),t>0&&(e[n-1][4]=r[4]);const o=cn(e,he+t);Gr(r[1],s=r,s[11],2,null,null),s[0]=null,s[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var s;return r}function Fr(e,t){if(!(256&t[2])){const n=t[11];Ae(n)&&n.destroyNode&&Gr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Mr(e[1],e);for(;t;){let n=null;if(de(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)de(t)&&Mr(t[1],t),t=t[3];null===t&&(t=e),de(t)&&Mr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Mr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Et)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],s=t[n+1];try{s.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let s=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const e=n[i+1],o="function"==typeof e?e(t):Ne(t[e]),a=r[s=n[i+2]],u=n[i+3];"boolean"==typeof u?o.removeEventListener(n[i],a,u):u>=0?r[s=u]():r[s=-u].unsubscribe(),i+=2}else{const e=r[s=n[i+1]];n[i].call(e)}if(null!==r){for(let e=s+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ae(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&fe(t[3])){n!==t[3]&&Pr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Ur(e,t,n,r,s){Ae(e)?e.insertBefore(t,n,r,s):t.insertBefore(n,r,s)}function jr(e,t,n){Ae(e)?e.appendChild(t,n):t.appendChild(n)}function Vr(e,t,n,r,s){null!==r?Ur(e,t,n,r,s):jr(e,t,n)}function qr(e,t){return Ae(e)?e.parentNode(t):t.parentNode}function zr(e,t,n,r){const s=function(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===M.None||t===M.Emulated)return null}return Oe(r,n)}(e,t.parent,n)}(e,r,t),i=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?Oe(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=s)if(Array.isArray(n))for(let a=0;a<n.length;a++)Vr(i,s,n[a],o,!1);else Vr(i,s,n,o,!1)}function Br(e,t){if(null!==t){const n=t.type;if(3&n)return Oe(t,e);if(4&n)return Hr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Br(e,n);{const n=e[t.index];return fe(n)?Hr(-1,n):Ne(n)}}if(32&n)return kr(t,e)()||Ne(e[t.index]);{const n=$r(e,t);return null!==n?Array.isArray(n)?n[0]:Br(Ar(e[16]),n):Br(e,t.next)}}return null}function $r(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Hr(e,t){const n=he+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Br(e,r)}return t[7]}function Zr(e,t,n,r,s,i,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&vr(Ne(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Zr(e,t,n.child,r,s,i,!1),Or(t,e,s,a,i);else if(32&u){const o=kr(n,r);let u;for(;u=o();)Or(t,e,s,u,i);Or(t,e,s,a,i)}else 16&u?Kr(e,t,r,n,s,i):Or(t,e,s,a,i);n=o?n.projectionNext:n.next}}function Gr(e,t,n,r,s,i){Zr(n,r,e.firstChild,t,s,i,!1)}function Kr(e,t,n,r,s,i){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Or(t,e,s,a[u],i);else Zr(e,t,a,o[3],s,i,!0)}function Wr(e,t,n){Ae(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Qr(e,t,n){Ae(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Yr(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const n=t.length;if(s+n===r||e.charCodeAt(s+n)<=32)return s}n=s+1}}const Jr="ng-template";function Xr(e,t,n){let r=0;for(;r<e.length;){let s=e[r++];if(n&&"class"===s){if(s=e[r],-1!==Yr(s.toLowerCase(),t,0))return!0}else if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function es(e){return 4===e.type&&e.value!==Jr}function ts(e,t,n){return t===(4!==e.type||n?e.value:Jr)}function ns(e,t,n){let r=4;const s=e.attrs||[],i=function(e){for(let t=0;t<e.length;t++)if(Ct(e[t]))return t;return e.length}(s);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!ts(e,u,n)||""===u&&1===t.length){if(rs(r))return!1;o=!0}}else{const l=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!Xr(e.attrs,l,n)){if(rs(r))return!1;o=!0}continue}const c=ss(8&r?"class":u,s,es(e),n);if(-1===c){if(rs(r))return!1;o=!0;continue}if(""!==l){let e;e=c>i?"":s[c+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Yr(t,l,0)||2&r&&l!==e){if(rs(r))return!1;o=!0}}}}else{if(!o&&!rs(r)&&!rs(u))return!1;if(o&&rs(u))continue;o=!1,r=u|1&r}}return rs(r)||o}function rs(e){return 0==(1&e)}function ss(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let n=!1;for(;s<t.length;){const r=t[s];if(r===e)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++s];for(;"string"==typeof e;)e=t[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function is(e,t,n=!1){for(let r=0;r<t.length;r++)if(ns(e,t[r],n))return!0;return!1}function os(e,t){return e?":not("+t.trim()+")":t}function as(e){let t=e[0],n=1,r=2,s="",i=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];s+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""===s||rs(o)||(t+=os(i,s),s=""),r=o,i=i||!rs(r);n++}return""!==s&&(t+=os(i,s)),t}const us={};function ls(e){cs($e(),Be(),pt()+e,Ye())}function cs(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&vt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&_t(t,r,0,n)}mt(n)}function hs(e,t){return e<<17|t<<2}function ds(e){return e>>17&32767}function fs(e){return 2|e}function ps(e){return(131068&e)>>2}function ms(e,t){return-131069&e|t<<2}function gs(e){return 1|e}function ys(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],i=n[r+1];if(-1!==i){const n=e.data[i];it(s),n.contentQueries(2,t[i],i)}}}function vs(e,t,n,r,s,i,o,a,u,l){const c=t.blueprint.slice();return c[0]=s,c[2]=140|r,je(c),c[3]=c[15]=e,c[8]=n,c[10]=o||e&&e[10],c[11]=a||e&&e[11],c[12]=u||e&&e[12]||null,c[9]=l||e&&e[9]||null,c[6]=i,c[16]=2==t.type?e[16]:c,c}function _s(e,t,n,r,s){let i=e.data[t];if(null===i)i=function(e,t,n,r,s){const i=Ge(),o=We(),a=e.data[t]=function(e,t,n,r,s,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,t,r,s);return null===e.firstChild&&(e.firstChild=a),null!==i&&(o?null==i.child&&null!==a.parent&&(i.child=a):null===i.next&&(i.next=a)),a}(e,t,n,r,s),qe.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const e=function(){const e=qe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();i.injectorIndex=null===e?-1:e.injectorIndex}return Ke(i,!0),i}function ws(e,t,n,r){if(0===n)return-1;const s=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function bs(e,t,n){ut(t);try{const r=e.viewQuery;null!==r&&Ys(1,r,n);const s=e.template;null!==s&&Es(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ys(e,t),e.staticViewQueries&&Ys(2,e.viewQuery,n);const i=e.components;null!==i&&function(e,t){for(let n=0;n<t.length;n++)Zs(e,t[n])}(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,ft()}}function Ts(e,t,n,r){const s=t[2];if(256==(256&s))return;ut(t);const i=Ye();try{je(t),qe.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Es(e,t,n,2,r);const o=3==(3&s);if(!i)if(o){const n=e.preOrderCheckHooks;null!==n&&vt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&_t(t,n,0,null),wt(t,0)}if(function(e){for(let t=xr(e);null!==t;t=Nr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ve(r,1),n[2]|=1024}}}(t),function(e){for(let t=xr(e);null!==t;t=Nr(t))for(let e=he;e<t.length;e++){const n=t[e],r=n[1];Me(n)&&Ts(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&ys(e,t),!i)if(o){const n=e.contentCheckHooks;null!==n&&vt(t,n)}else{const n=e.contentHooks;null!==n&&_t(t,n,1),wt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)mt(~r);else{const s=r,i=n[++e],o=n[++e];nt(i,s),o(2,t[s])}}}finally{mt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)$s(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&Ys(2,u,r),!i)if(o){const n=e.viewCheckHooks;null!==n&&vt(t,n)}else{const n=e.viewHooks;null!==n&&_t(t,n,2),wt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ve(t[3],-1))}finally{ft()}}function Ss(e,t,n,r){const s=t[10],i=!Ye(),o=Fe(t);try{i&&!o&&s.begin&&s.begin(),o&&bs(e,t,r),Ts(e,t,n,r)}finally{i&&!o&&s.end&&s.end()}}function Es(e,t,n,r,s){const i=pt(),o=2&r;try{mt(-1),o&&t.length>ce&&cs(e,t,ce,Ye()),n(r,s)}finally{mt(i)}}function Is(e,t,n){if(pe(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const t=e.data[s];t.contentQueries&&t.contentQueries(1,n[s],s)}}}function Cs(e,t,n){ze()&&(function(e,t,n,r){const s=n.directiveStart,i=n.directiveEnd;e.firstCreatePass||Ft(n,t),vr(r,t);const o=n.initialInputs;for(let a=s;a<i;a++){const r=e.data[a],i=ye(r);i&&Vs(t,n,r);const u=Kt(t,e,a,n);vr(u,t),null!==o&&qs(0,a-s,u,r,0,o),i&&(Le(n.index,t)[8]=u)}}(e,t,n,Oe(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,s=n.directiveEnd,i=n.index,o=qe.lFrame.currentDirectiveIndex;try{mt(i);for(let n=r;n<s;n++){const r=e.data[n],s=t[n];rt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ls(r,s)}}finally{mt(-1),rt(o)}}(e,t,n))}function ks(e,t,n=Oe){const r=t.localNames;if(null!==r){let s=t.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(t,e):e[o];e[s++]=a}}}function As(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=xs(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function xs(e,t,n,r,s,i,o,a,u,l){const c=ce+r,h=c+s,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:us);return n}(c,h),f="function"==typeof l?l():l;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ns(e,t,n,r){const s=Xs(t);null===n?s.push(r):(s.push(n),e.firstCreatePass&&ei(e).push(r,s.length-1))}function Rs(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,s):n[r]=[t,s]}return n}function Os(e,t,n,r,s,i,o,a){const u=Oe(t,n);let l,c=t.inputs;var h;!a&&null!=c&&(l=c[r])?(ni(e,n,l,r,s),me(t)&&function(e,t){const n=Le(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,s=null!=o?o(s,t.value||"",r):s,Ae(i)?i.setProperty(u,r,s):kt(r)||(u.setProperty?u.setProperty(r,s):u[r]=s))}function Ds(e,t,n,r){let s=!1;if(ze()){const i=function(e,t,n){const r=e.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];is(n,o.selectors,!1)&&(s||(s=[]),Vt(Ft(n,t),e,o.type),ye(o)?(Fs(e,n),s.unshift(o)):s.push(o))}return s}(e,t,n),o=null===r?null:{"":-1};if(null!==i){s=!0,Us(n,e.data.length,i.length);for(let e=0;e<i.length;e++){const t=i[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=ws(e,t,i.length,null);for(let s=0;s<i.length;s++){const l=i[s];n.mergedAttrs=At(n.mergedAttrs,l.hostAttrs),js(e,n,t,u,l),Ms(u,l,o),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128);const c=l.type.prototype;!r&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,s=t.attrs,i=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,l=null===s||es(t)?null:zs(n,s);i.push(l),o=Rs(n,u,o),a=Rs(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=i,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const s=n[t[e+1]];if(null==s)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],s)}}}(n,r,o)}return n.mergedAttrs=At(n.mergedAttrs,n.attrs),s}function Ps(e,t,n,r,s,i){const o=i.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const i=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=i&&n.push(i),n.push(r,s,o)}}function Ls(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Fs(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Ms(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ye(t)&&(n[""]=e)}}function Us(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function js(e,t,n,r,s){e.data[r]=s;const i=s.factory||(s.factory=ve(s.type)),o=new Et(i,ye(s),null);e.blueprint[r]=o,n[r]=o,Ps(e,t,0,r,ws(e,n,s.hostVars,us),s)}function Vs(e,t,n){const r=Oe(t,e),s=As(n),i=e[10],o=Gs(e,vs(e,s,null,n.onPush?64:16,r,t,i,i.createRenderer(r,n),null,null));e[t.index]=o}function qs(e,t,n,r,s,i){const o=i[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const s=o[t++],i=o[t++],a=o[t++];null!==e?r.setInput(n,a,s,i):n[i]=a}}}function zs(e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,e[s],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Bs(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function $s(e,t){const n=Le(t,e);if(Me(n)){const e=n[1];80&n[2]?Ts(e,n,e.template,n[8]):n[5]>0&&Hs(n)}}function Hs(e){for(let n=xr(e);null!==n;n=Nr(n))for(let e=he;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Ts(e,t,e.template,t[8])}else t[5]>0&&Hs(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Le(t[n],e);Me(r)&&r[5]>0&&Hs(r)}}function Zs(e,t){const n=Le(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),bs(r,n,n[8])}function Gs(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Ks(e){for(;e;){e[2]|=64;const t=Ar(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Ws(e,t,n){const r=t[10];r.begin&&r.begin();try{Ts(e,t,e.template,n)}catch(s){throw ti(t,s),s}finally{r.end&&r.end()}}function Qs(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=_r(n),s=r[1];Ss(s,r,s.template,n)}}(e[8])}function Ys(e,t,n){it(0),t(e,n)}const Js=(()=>Promise.resolve(null))();function Xs(e){return e[7]||(e[7]=[])}function ei(e){return e.cleanup||(e.cleanup=[])}function ti(e,t){const n=e[9],r=n?n.get(Tr,null):null;r&&r.handleError(t)}function ni(e,t,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],u=t[o],l=e.data[o];null!==l.setInput?l.setInput(u,s,r,a):u[a]=s}}function ri(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,i=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?i=e:1==i?s=f(s,e):2==i&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}const si=new rn("INJECTOR",-1);class ii{get(e,t=pn){if(t===pn){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const oi=new rn("Set Injector scope."),ai={},ui={};let li;function ci(){return void 0===li&&(li=new ii),li}function hi(e,t=null,n=null,r){return new di(e,n,t||ci(),r)}class di{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&un(t,n=>this.processProvider(n,e,t)),un([e],e=>this.processInjectorType(e,[],s)),this.records.set(si,mi(void 0,this));const i=this.records.get(oi);this.scope=null!=i?i.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=pn,n=R.Default){this.assertNotDestroyed();const r=_n(this),s=D(void 0);try{if(!(n&R.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof rn)&&E(e);t=n&&this.injectableDefInScope(n)?mi(fi(e),ai):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&R.Self?ci():this.parent).get(e,t=n&R.Optional&&t===pn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(e)),r)throw o;return function(e,t,n,r){const s=e.ngTempTokenPath;throw t[gn]&&s.unshift(t[gn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let s=d(t);if(Array.isArray(t))s=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}s=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(mn,"\n  ")}`}("\n"+e.message,s,n,r),e.ngTokenPath=s,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{D(s),_n(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=g(e)))return!1;let r=C(e);const s=null==r&&e.ngModule||void 0,i=void 0===s?e:s,o=-1!==n.indexOf(i);if(void 0!==s&&(r=C(s)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(i);try{un(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];un(r,e=>this.processProvider(e,n,r||$))}}this.injectorDefTypes.add(i);const a=ve(i)||(()=>new i);this.records.set(i,mi(a,ai));const u=r.providers;if(null!=u&&!o){const t=e;un(u,e=>this.processProvider(e,t,u))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,n){let r=yi(e=g(e))?e:g(e&&e.provide);const s=function(e,t,n){return gi(e)?mi(void 0,e.useValue):mi(pi(e),ai)}(e);if(yi(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=mi(void 0,ai,!0),t.factory=()=>Tn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,s)}hydrate(e,t){var n;return t.value===ai&&(t.value=ui,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=g(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function fi(e){const t=E(e),n=null!==t?t.factory:ve(e);if(null!==n)return n;if(e instanceof rn)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[k]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function pi(e,t,n){let r;if(yi(e)){const t=g(e);return ve(t)||fi(t)}if(gi(e))r=()=>g(e.useValue);else if((s=e)&&s.useFactory)r=()=>e.useFactory(...Tn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>bn(g(e.useExisting));else{const t=g(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ve(t)||fi(t);r=()=>new t(...Tn(e.deps))}var s;return r}function mi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function gi(e){return null!==e&&"object"==typeof e&&yn in e}function yi(e){return"function"==typeof e}const vi=function(e,t,n){return function(e,t=null,n=null,r){const s=hi(e,t,n,r);return s._resolveInjectorDefTypes(),s}({name:n},t,e,n)};class _i{static create(e,t){return Array.isArray(e)?vi(e,t,""):vi(e.providers,e.parent,e.name||"")}}function wi(e,t){yt(_r(e)[1],Ze())}function bi(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let s;if(ye(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");s=t.\u0275dir}if(s){if(n){r.push(s);const t=e;t.inputs=Ti(e.inputs),t.declaredInputs=Ti(e.declaredInputs),t.outputs=Ti(e.outputs);const n=s.hostBindings;n&&Ii(e,n);const i=s.viewQuery,o=s.contentQueries;if(i&&Si(e,i),o&&Ei(e,o),h(e.inputs,s.inputs),h(e.declaredInputs,s.declaredInputs),h(e.outputs,s.outputs),ye(s)&&s.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(s.data.animation)}}const t=s.features;if(t)for(let r=0;r<t.length;r++){const s=t[r];s&&s.ngInherit&&s(e),s===bi&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const s=e[r];s.hostVars=t+=s.hostVars,s.hostAttrs=At(s.hostAttrs,n=At(n,s.hostAttrs))}}(r)}function Ti(e){return e===B?{}:e===$?[]:e}function Si(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ei(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,s)=>{t(e,r,s),n(e,r,s)}:t}function Ii(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}_i.THROW_IF_NOT_FOUND=pn,_i.NULL=new ii,_i.\u0275prov=T({token:_i,providedIn:"any",factory:()=>bn(si)}),_i.__NG_ELEMENT_ID__=-1;let Ci=null;function ki(){if(!Ci){const e=z.Symbol;if(e&&e.iterator)Ci=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ci=n)}}}return Ci}class Ai{constructor(e){this.wrapped=e}static wrap(e){return new Ai(e)}static unwrap(e){return Ai.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ai}}function xi(e){return!!Ni(e)&&(Array.isArray(e)||!(e instanceof Map)&&ki()in e)}function Ni(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ri(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Oi(e,t,n,r){const s=Be();return Ri(s,et(),t)&&($e(),function(e,t,n,r,s,i){const o=Oe(e,t);!function(e,t,n,r,s,i,o){if(null==i)Ae(e)?e.removeAttribute(t,s,n):t.removeAttribute(s);else{const a=null==o?_(i):o(i,r||"",s);Ae(e)?e.setAttribute(t,s,a,n):n?t.setAttributeNS(n,s,a):t.setAttribute(s,a)}}(t[11],o,i,e.value,n,r,s)}(gt(),s,e,t,n,r)),Oi}function Di(e,t,n,r){return Ri(e,et(),n)?t+_(n)+r:us}function Pi(e,t,n,r,s,i,o,a){const u=Be(),l=$e(),c=e+ce,h=l.firstCreatePass?function(e,t,n,r,s,i,o,a,u){const l=t.consts,c=_s(t,e,4,o||null,Ue(l,a));Ds(t,n,c,Ue(l,u)),yt(t,c);const h=c.tViews=xs(2,c,r,s,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l);return null!==t.queries&&(t.queries.template(t,c),h.queries=t.queries.embeddedTView(c)),c}(c,l,u,t,n,r,s,i,o):l.data[c];Ke(h,!1);const d=u[11].createComment("");zr(l,u,d,h),vr(d,u),Gs(u,u[c]=Bs(d,u,d,h)),ge(h)&&Cs(l,u,h),null!=o&&ks(u,h,a)}function Li(e){return Pe(qe.lFrame.contextLView,ce+e)}function Fi(e,t=R.Default){const n=Be();return null===n?bn(e,t):Bt(Ze(),n,g(e),t)}function Mi(e,t,n){const r=Be();return Ri(r,et(),t)&&Os($e(),gt(),r,e,t,r[11],n,!1),Mi}function Ui(e,t,n,r,s){const i=s?"class":"style";ni(e,n,t.inputs[i],i,r)}function ji(e,t,n,r){const s=Be(),i=$e(),o=ce+e,a=s[11],u=s[o]=Dr(a,t,qe.lFrame.currentNamespace),l=i.firstCreatePass?function(e,t,n,r,s,i,o){const a=t.consts,u=_s(t,e,2,s,Ue(a,i));return Ds(t,n,u,Ue(a,o)),null!==u.attrs&&ri(u,u.attrs,!1),null!==u.mergedAttrs&&ri(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,i,s,0,t,n,r):i.data[o];Ke(l,!0);const c=l.mergedAttrs;null!==c&&It(a,u,c);const h=l.classes;null!==h&&Qr(a,u,h);const d=l.styles;null!==d&&Wr(a,u,d),64!=(64&l.flags)&&zr(i,s,u,l),0===qe.lFrame.elementDepthCount&&vr(u,s),qe.lFrame.elementDepthCount++,ge(l)&&(Cs(i,s,l),Is(i,l,s)),null!==r&&ks(s,l)}function Vi(){let e=Ze();We()?Qe():(e=e.parent,Ke(e,!1));const t=e;qe.lFrame.elementDepthCount--;const n=$e();n.firstCreatePass&&(yt(n,e),pe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ui(n,t,Be(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ui(n,t,Be(),t.stylesWithoutHost,!1)}function qi(e,t,n,r){ji(e,t,n,r),Vi()}function zi(e,t,n){const r=Be(),s=$e(),i=e+ce,o=s.firstCreatePass?function(e,t,n,r,s){const i=t.consts,o=Ue(i,r),a=_s(t,e,8,"ng-container",o);return null!==o&&ri(a,o,!0),Ds(t,n,a,Ue(i,s)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,s,r,t,n):s.data[i];Ke(o,!0);const a=r[i]=r[11].createComment("");zr(s,r,a,o),vr(a,r),ge(o)&&(Cs(s,r,o),Is(s,o,r)),null!=n&&ks(r,o)}function Bi(){let e=Ze();const t=$e();We()?Qe():(e=e.parent,Ke(e,!1)),t.firstCreatePass&&(yt(t,e),pe(e)&&t.queries.elementEnd(e))}function $i(){return Be()}function Hi(e){return!!e&&"function"==typeof e.then}function Zi(e){return!!e&&"function"==typeof e.subscribe}const Gi=Zi;function Ki(e,t,n,r){const s=Be(),i=$e(),o=Ze();return function(e,t,n,r,s,i,o,a){const u=ge(r),l=e.firstCreatePass&&ei(e),c=Xs(t);let h=!0;if(3&r.type||a){const d=Oe(r,t),f=a?a(d):d,p=c.length,m=a?e=>a(Ne(e[r.index])):r.index;if(Ae(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const s=e.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const e=s[i];if(e===n&&s[i+1]===r){const e=t[7],n=s[i+2];return e.length>n?e[n]:null}"string"==typeof e&&(i+=2)}return null}(e,t,s,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=i,o.__ngLastListenerFn__=i,h=!1;else{i=Qi(r,t,0,i,!1);const e=n.listen(f,s,i);c.push(i,e),l&&l.push(s,m,p,p+1)}}else i=Qi(r,t,0,i,!0),f.addEventListener(s,i,o),c.push(i),l&&l.push(s,m,p,o)}else i=Qi(r,t,0,i,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[s])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(i),o=c.length;c.push(i,e),l&&l.push(s,r.index,o,-(o+1))}}}(i,s,s[11],o,e,t,!!n,r),Ki}function Wi(e,t,n,r){try{return!1!==n(r)}catch(s){return ti(e,s),!1}}function Qi(e,t,n,r,s){return function n(i){if(i===Function)return r;const o=2&e.flags?Le(e.index,t):t;0==(32&t[2])&&Ks(o);let a=Wi(t,0,r,i),u=n.__ngNextListenerFn__;for(;u;)a=Wi(t,0,u,i)&&a,u=u.__ngNextListenerFn__;return s&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function Yi(e=1){return function(e){return(qe.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,qe.lFrame.contextLView))[8]}(e)}function Ji(e,t,n){return Xi(e,"",t,"",n),Ji}function Xi(e,t,n,r,s){const i=Be(),o=Di(i,t,n,r);return o!==us&&Os($e(),gt(),i,e,o,i[11],s,!1),Xi}function eo(e,t,n,r,s){const i=e[n+1],o=null===t;let a=r?ds(i):ps(i),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];to(e[a],t)&&(u=!0,e[a+1]=r?gs(n):fs(n)),a=r?ds(n):ps(n)}u&&(e[n+1]=r?fs(i):gs(i))}function to(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&fn(e,t)>=0}const no={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ro(e){return e.substring(no.key,no.keyEnd)}function so(e,t){const n=no.textEnd;return n===t?-1:(t=no.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,no.key=t,n),io(e,t,n))}function io(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function oo(e,t){return function(e,t,n,r){const s=Be(),i=$e(),o=tt(2);i.firstUpdatePass&&co(i,e,o,true),t!==us&&Ri(s,o,t)&&po(i,i.data[pt()],s,s[11],e,s[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=d(Mn(e))),e}(t),true,o)}(e,t),oo}function ao(e){!function(e,t,n,r){const s=$e(),i=tt(2);s.firstUpdatePass&&co(s,null,i,r);const o=Be();if(n!==us&&Ri(o,i,n)){const a=s.data[pt()];if(yo(a,r)&&!lo(s,i)){let e=a.classesWithoutHost;null!==e&&(n=f(e,n||"")),Ui(s,a,o,n,r)}else!function(e,t,n,r,s,i,o,a){s===us&&(s=$);let u=0,l=0,c=0<s.length?s[0]:null,h=0<i.length?i[0]:null;for(;null!==c||null!==h;){const o=u<s.length?s[u+1]:void 0,d=l<i.length?i[l+1]:void 0;let f,p=null;c===h?(u+=2,l+=2,o!==d&&(p=h,f=d)):null===h||null!==c&&c<h?(u+=2,p=c):(l+=2,p=h,f=d),null!==p&&po(e,t,n,r,p,f,true,a),c=u<s.length?s[u]:null,h=l<i.length?i[l]:null}}(s,a,o,o[11],o[i+1],o[i+1]=function(e,t,n){if(null==n||""===n)return $;const r=[],s=Mn(n);if(Array.isArray(s))for(let i=0;i<s.length;i++)e(r,s[i],!0);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&e(r,i,s[i]);else"string"==typeof s&&t(r,s);return r}(e,t,n),0,i)}}(hn,uo,e,!0)}function uo(e,t){for(let n=function(e){return function(e){no.key=0,no.keyEnd=0,no.value=0,no.valueEnd=0,no.textEnd=e.length}(e),so(e,io(e,0,no.textEnd))}(t);n>=0;n=so(t,n))hn(e,ro(t),!0)}function lo(e,t){return t>=e.expandoStartIndex}function co(e,t,n,r){const s=e.data;if(null===s[n+1]){const i=s[pt()],o=lo(e,n);yo(i,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const s=function(e){const t=qe.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let i=r?t.residualClasses:t.residualStyles;if(null===s)0===(r?t.classBindings:t.styleBindings)&&(n=fo(n=ho(null,e,t,n,r),t.attrs,r),i=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==s)if(n=ho(s,e,t,n,r),null===i){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ps(r))return e[ds(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=ho(null,e,t,n[1],r),n=fo(n,t.attrs,r),function(e,t,n,r){e[ds(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else i=function(e,t,n){let r;const s=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<s;i++)r=fo(r,e[i].hostAttrs,n);return fo(r,t.attrs,n)}(e,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),n}(s,i,t,r),function(e,t,n,r,s,i){let o=i?t.classBindings:t.styleBindings,a=ds(o),u=ps(o);e[r]=n;let l,c=!1;if(Array.isArray(n)){const e=n;l=e[1],(null===l||fn(e,l)>0)&&(c=!0)}else l=n;if(s)if(0!==u){const t=ds(e[a+1]);e[r+1]=hs(t,a),0!==t&&(e[t+1]=ms(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=hs(a,0),0!==a&&(e[a+1]=ms(e[a+1],r)),a=r;else e[r+1]=hs(u,0),0===a?a=r:e[u+1]=ms(e[u+1],r),u=r;c&&(e[r+1]=fs(e[r+1])),eo(e,l,r,!0),eo(e,l,r,!1),function(e,t,n,r,s){const i=s?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&fn(i,t)>=0&&(n[r+1]=gs(n[r+1]))}(t,l,e,r,i),o=hs(a,u),i?t.classBindings=o:t.styleBindings=o}(s,i,t,n,o,r)}}function ho(e,t,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=t[a],r=fo(r,i.hostAttrs,s),i!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function fo(e,t,n){const r=n?1:2;let s=-1;if(null!==t)for(let i=0;i<t.length;i++){const o=t[i];"number"==typeof o?s=o:s===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),hn(e,o,!!n||t[++i]))}return void 0===e?null:e}function po(e,t,n,r,s,i,o,a){if(!(3&t.type))return;const u=e.data,l=u[a+1];go(1==(1&l)?mo(u,t,n,s,ps(l),o):void 0)||(go(i)||2==(2&l)&&(i=mo(u,null,n,s,a,o)),function(e,t,n,r,s){const i=Ae(e);if(t)s?i?e.addClass(n,r):n.classList.add(r):i?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Cr.DashCase;if(null==s)i?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof s&&s.endsWith("!important");o&&(s=s.slice(0,-10),t|=Cr.Important),i?e.setStyle(n,r,s,t):n.style.setProperty(r,s,o?"important":"")}}}(r,o,Re(pt(),n),s,i))}function mo(e,t,n,r,s,i){const o=null===t;let a;for(;s>0;){const t=e[s],i=Array.isArray(t),u=i?t[1]:t,l=null===u;let c=n[s+1];c===us&&(c=l?$:void 0);let h=l?dn(c,r):u===r?c:void 0;if(i&&!go(h)&&(h=dn(t,r)),go(h)&&(a=h,o))return a;const d=e[s+1];s=o?ds(d):ps(d)}if(null!==t){let e=i?t.residualClasses:t.residualStyles;null!=e&&(a=dn(e,r))}return a}function go(e){return void 0!==e}function yo(e,t){return 0!=(e.flags&(t?16:32))}function vo(e,t=""){const n=Be(),r=$e(),s=e+ce,i=r.firstCreatePass?_s(r,s,1,t,null):r.data[s],o=n[s]=function(e,t){return Ae(e)?e.createText(t):e.createTextNode(t)}(n[11],t);zr(r,n,o,i),Ke(i,!1)}function _o(e){return wo("",e,""),_o}function wo(e,t,n){const r=Be(),s=Di(r,e,t,n);return s!==us&&function(e,t,n){const r=Re(t,e);!function(e,t,n){Ae(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,pt(),s),wo}function bo(e,t,n){const r=Be();return Ri(r,et(),t)&&Os($e(),gt(),r,e,t,r[11],n,!0),bo}const To=void 0;var So=["en",[["a","p"],["AM","PM"],To],[["AM","PM"],To,To],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],To,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],To,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",To,"{1} 'at' {0}",To],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Eo={};function Io(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ko(t);if(n)return n;const r=t.split("-")[0];if(n=ko(r),n)return n;if("en"===r)return So;throw new Error(`Missing locale data for the locale "${e}".`)}function Co(e){return Io(e)[Ao.PluralCase]}function ko(e){return e in Eo||(Eo[e]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[e]),Eo[e]}var Ao=(()=>((Ao=Ao||{})[Ao.LocaleId=0]="LocaleId",Ao[Ao.DayPeriodsFormat=1]="DayPeriodsFormat",Ao[Ao.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ao[Ao.DaysFormat=3]="DaysFormat",Ao[Ao.DaysStandalone=4]="DaysStandalone",Ao[Ao.MonthsFormat=5]="MonthsFormat",Ao[Ao.MonthsStandalone=6]="MonthsStandalone",Ao[Ao.Eras=7]="Eras",Ao[Ao.FirstDayOfWeek=8]="FirstDayOfWeek",Ao[Ao.WeekendRange=9]="WeekendRange",Ao[Ao.DateFormat=10]="DateFormat",Ao[Ao.TimeFormat=11]="TimeFormat",Ao[Ao.DateTimeFormat=12]="DateTimeFormat",Ao[Ao.NumberSymbols=13]="NumberSymbols",Ao[Ao.NumberFormats=14]="NumberFormats",Ao[Ao.CurrencyCode=15]="CurrencyCode",Ao[Ao.CurrencySymbol=16]="CurrencySymbol",Ao[Ao.CurrencyName=17]="CurrencyName",Ao[Ao.Currencies=18]="Currencies",Ao[Ao.Directionality=19]="Directionality",Ao[Ao.PluralCase=20]="PluralCase",Ao[Ao.ExtraData=21]="ExtraData",Ao))();const xo="en-US";let No=xo;function Ro(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(No=e.toLowerCase().replace(/_/g,"-"))}function Oo(e,t,n,r,s){if(e=g(e),Array.isArray(e))for(let i=0;i<e.length;i++)Oo(e[i],t,n,r,s);else{const i=$e(),o=Be();let a=yi(e)?e:g(e.provide),u=pi(e);const l=Ze(),c=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(yi(e)||!e.multi){const r=new Et(u,s,Fi),f=Lo(a,t,s?c:c+d,h);-1===f?(Vt(Ft(l,o),i,a),Do(i,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Lo(a,t,c+d,h),p=Lo(a,t,c,c+d),m=f>=0&&n[f],g=p>=0&&n[p];if(s&&!g||!s&&!m){Vt(Ft(l,o),i,a);const c=function(e,t,n,r,s){const i=new Et(e,n,Fi);return i.multi=[],i.index=t,i.componentProviders=0,Po(i,s,r&&!n),i}(s?Mo:Fo,n.length,s,r,u);!s&&g&&(n[p].providerFactory=c),Do(i,e,t.length,0),t.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),n.push(c),o.push(c)}else Do(i,e,f>-1?f:p,Po(n[s?p:f],u,!s&&r));!s&&r&&g&&n[p].componentProviders++}}}function Do(e,t,n,r){const s=yi(t);if(s||t.useClass){const i=(t.useClass||t).prototype.ngOnDestroy;if(i){const o=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,i]):o[e+1].push(r,i)}else o.push(n,i)}}}function Po(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Lo(e,t,n,r){for(let s=n;s<r;s++)if(t[s]===e)return s;return-1}function Fo(e,t,n,r){return Uo(this.multi,[])}function Mo(e,t,n,r){const s=this.multi;let i;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Kt(n,n[1],this.providerFactory.index,r);i=t.slice(0,e),Uo(s,i);for(let n=e;n<t.length;n++)i.push(t[n])}else i=[],Uo(s,i);return i}function Uo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function jo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=$e();if(r.firstCreatePass){const s=ye(e);Oo(n,r.data,r.blueprint,s,!0),Oo(t,r.data,r.blueprint,s,!1)}}(n,r?r(e):e,t)}}class Vo{}class qo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class zo{}function Bo(...e){}function $o(e,t){return new Zo(Oe(e,t))}zo.NULL=new qo;const Ho=function(){return $o(Ze(),Be())};let Zo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Ho,e})();function Go(e){return e instanceof Zo?e.nativeElement:e}class Ko{}let Wo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Qo(),e})();const Qo=function(){const e=Be(),t=Le(Ze().index,e);return function(e){return e[11]}(de(t)?t:e)};let Yo=(()=>{class e{}return e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null}),e})();class Jo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Xo=new Jo("12.1.5");class ea{constructor(){}supports(e){return xi(e)}create(e){return new na(e)}}const ta=(e,t)=>t;class na{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ta}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const i=!n||t&&t.currentIndex<oa(n,r,s)?t:n,o=oa(i,r,s),a=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{s||(s=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;t<=i&&i<e&&(s[n]=r+1)}s[i.previousIndex]=t-e}}o!==a&&e(i,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!xi(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,s=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,t)),Object.is(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,t),i=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ki()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,e,r,t)),Object.is(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,r,t),i=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new ra(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ia),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ia),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ra{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sa{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class ia{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new sa,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oa(e,t,n){const r=e.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+t+s}class aa{constructor(){}supports(e){return e instanceof Map||Ni(e)}create(){return new ua}}class ua{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ni(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new la(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class la{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ca(){return new ha([new ea])}let ha=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||ca()),deps:[[e,new Cn,new In]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=T({token:e,providedIn:"root",factory:ca}),e})();function da(){return new fa([new aa])}let fa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||da()),deps:[[e,new Cn,new In]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=T({token:e,providedIn:"root",factory:da}),e})();function pa(e,t,n,r,s=!1){for(;null!==n;){const i=t[n.index];if(null!==i&&r.push(Ne(i)),fe(i))for(let e=he;e<i.length;e++){const t=i[e],n=t[1].firstChild;null!==n&&pa(t[1],t,n,r)}const o=n.type;if(8&o)pa(e,t,n.child,r);else if(32&o){const e=kr(n,t);let s;for(;s=e();)r.push(s)}else if(16&o){const e=$r(t,n);if(Array.isArray(e))r.push(...e);else{const n=Ar(t[16]);pa(n[1],n,e,r,!0)}}n=s?n.projectionNext:n.next}return r}class ma{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return pa(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(fe(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Lr(e,n),cn(t,n))}this._attachedToViewContainer=!1}Fr(this._lView[1],this._lView)}onDestroy(e){Ns(this._lView[1],this._lView,null,e)}markForCheck(){Ks(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ws(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Je(!0);try{Ws(e,t,n)}finally{Je(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Gr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class ga extends ma{constructor(e){super(e),this._view=e}detectChanges(){Qs(this._view)}checkNoChanges(){!function(e){Je(!0);try{Qs(e)}finally{Je(!1)}}(this._view)}get context(){return null}}const ya=function(e){return function(e,t,n){if(me(e)&&!n){const n=Le(e.index,t);return new ma(n,n)}return 47&e.type?new ma(t[16],t):null}(Ze(),Be(),16==(16&e))};let va=(()=>{class e{}return e.__NG_ELEMENT_ID__=ya,e})();const _a=[new aa],wa=new ha([new ea]),ba=new fa(_a),Ta=function(){return Ca(Ze(),Be())};let Sa=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ta,e})();const Ea=Sa,Ia=class extends Ea{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=vs(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),bs(t,n,e),new ma(n)}};function Ca(e,t){return 4&e.type?new Ia(t,e,$o(e,t)):null}class ka{}class Aa{}const xa=function(){return La(Ze(),Be())};let Na=(()=>{class e{}return e.__NG_ELEMENT_ID__=xa,e})();const Ra=Na,Oa=class extends Ra{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return $o(this._hostTNode,this._hostLView)}get injector(){return new Yt(this._hostTNode,this._hostLView)}get parentInjector(){const e=jt(this._hostTNode,this._hostLView);if(Nt(e)){const t=Ot(e,this._hostLView),n=Rt(e);return new Yt(t[1].data[n+8],t)}return new Yt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Da(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-he}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,s){const i=n||this.parentInjector;if(!s&&null==e.ngModule&&i){const e=i.get(ka,null);e&&(s=e)}const o=e.create(i,r,void 0,s);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(fe(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Oa(t,t[6],t[3]);r.detach(r.indexOf(e))}}const s=this._adjustIndex(t),i=this._lContainer;!function(e,t,n,r){const s=he+r,i=n.length;r>0&&(n[s-1][4]=t),r<i-he?(t[4]=n[s],ln(n,he+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,i,s);const o=Hr(s,i),a=n[11],u=qr(a,i[7]);return null!==u&&function(e,t,n,r,s,i){r[0]=s,r[6]=t,Gr(e,r,n,1,s,i)}(r,i[6],a,n,u,o),e.attachToViewContainerRef(),ln(Pa(i),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Da(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Lr(this._lContainer,t);n&&(cn(Pa(this._lContainer),t),Fr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Lr(this._lContainer,t);return n&&null!=cn(Pa(this._lContainer),t)?new ma(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Da(e){return e[8]}function Pa(e){return e[8]||(e[8]=[])}function La(e,t){let n;const r=t[e.index];if(fe(r))n=r;else{let s;if(8&e.type)s=Ne(r);else{const n=t[11];s=n.createComment("");const r=Oe(e,t);Ur(n,qr(n,r),s,function(e,t){return Ae(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Bs(r,t,s,e),Gs(t,n)}return new Oa(n,e,t)}const Fa={};class Ma extends zo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ue(e);return new Va(t,this.ngModule)}}function Ua(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const ja=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sr});class Va extends Vo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(as).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ua(this.componentDef.inputs)}get outputs(){return Ua(this.componentDef.outputs)}create(e,t,n,r){const s=(r=r||this.ngModule)?function(e,t){return{get:(n,r,s)=>{const i=e.get(n,Fa,s);return i!==Fa||r===Fa?i:t.get(n,r,s)}}}(e,r.injector):e,i=s.get(Ko,xe),o=s.get(Yo,null),a=i.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=n?function(e,t,n){if(Ae(e))return e.selectRootElement(t,n===M.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(i.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:Sr,clean:Js,playerHandler:null,flags:0},d=xs(0,null,null,1,0,null,null,null,null,null),f=vs(null,d,h,c,null,null,i,a,o,s);let p,m;ut(f);try{const e=function(e,t,n,r,s,i){const o=n[1];n[20]=e;const a=_s(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(ri(a,u,!0),null!==e&&(It(s,e,u),null!==a.classes&&Qr(s,e,a.classes),null!==a.styles&&Wr(s,e,a.styles)));const l=r.createRenderer(e,t),c=vs(n,As(t),null,t.onPush?64:16,n[20],a,r,l,null,null);return o.firstCreatePass&&(Vt(Ft(a,n),o,t.type),Fs(o,a),Us(a,n.length,1)),Gs(n,c),n[20]=c}(l,this.componentDef,f,i,a);if(l)if(n)It(a,l,["ng-version",Xo.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===s?""!==i&&t.push(i,e[++r]):8===s&&n.push(i);else{if(!rs(s))break;s=i}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&It(a,l,e),t&&t.length>0&&Qr(a,l,t.join(" "))}if(m=De(d,ce),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,s){const i=n[1],o=function(e,t,n){const r=Ze();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),js(e,r,t,ws(e,t,1,null),n));const s=Kt(t,e,r.directiveStart,r);vr(s,t);const i=Oe(r,t);return i&&vr(i,t),s}(i,n,t);if(r.components.push(o),e[8]=o,s&&s.forEach(e=>e(o,t)),t.contentQueries){const e=Ze();t.contentQueries(1,o,e.directiveStart)}const a=Ze();return!i.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(mt(a.index),Ps(n[1],a,0,a.directiveStart,a.directiveEnd,t),Ls(t,o)),o}(e,this.componentDef,f,h,[wi]),bs(d,f,null)}finally{ft()}return new qa(this.componentType,p,$o(m,f),f,m)}}class qa extends class{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new ga(r),this.componentType=e}get injector(){return new Yt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const za=new Map;class Ba extends ka{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ma(this);const n=le(e),r=e[W]||null;r&&Ro(r),this._bootstrapComponents=Ir(n.bootstrap),this._r3Injector=hi(e,t,[{provide:ka,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=_i.THROW_IF_NOT_FOUND,n=R.Default){return e===_i||e===ka||e===si?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $a extends Aa{constructor(e){super(),this.moduleType=e,null!==le(e)&&function(e){const t=new Set;!function e(n){const r=le(n,!0),s=r.id;null!==s&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(s,za.get(s),n),za.set(s,n));const i=Ir(r.imports);for(const o of i)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Ba(this.moduleType,e)}}function Ha(e,t,n,r){return Za(Be(),Xe(),e,t,n,r)}function Za(e,t,n,r,s,i){const o=t+n;return Ri(e,o,s)?function(e,t,n){return e[t]=n}(e,o+1,i?r.call(i,s):r(s)):function(e,t){const n=e[t];return n===us?void 0:n}(e,o+1)}function Ga(e,t){const n=$e();let r;const s=e+ce;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(s,r.onDestroy)):r=n.data[s];const i=r.factory||(r.factory=ve(r.type)),o=D(Fi);try{const e=Pt(!1),t=i();return Pt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Be(),s,t),t}finally{D(o)}}function Ka(e,t,n){const r=e+ce,s=Be(),i=Pe(s,r);return function(e,t){return Ai.isWrapped(t)&&(t=Ai.unwrap(t),e[qe.lFrame.bindingIndex]=us),t}(s,function(e,t){return e[1].data[t].pure}(s,r)?Za(s,Xe(),t,i.transform,n,i):i.transform(n))}function Wa(e){return t=>{setTimeout(e,void 0,t)}}const Qa=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,i,o;let a=e,u=t||(()=>null),l=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(i=t.error)||void 0===i?void 0:i.bind(t),l=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=Wa(u),a&&(a=Wa(a)),l&&(l=Wa(l)));const c=super.subscribe({next:a,error:u,complete:l});return e instanceof s.w&&e.add(c),c}};function Ya(){return this._results[ki()]()}class Ja{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ki(),n=Ja.prototype;n[t]||(n[t]=Ya)}get changes(){return this._changes||(this._changes=new Qa)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=an(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],i=t[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Xa{constructor(e){this.queryList=e,this.matches=null}clone(){return new Xa(this.queryList)}setDirty(){this.queryList.setDirty()}}class eu{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new eu(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==hu(e,t).matches&&this.queries[t].setDirty()}}class tu{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class nu{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new nu(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ru{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ru(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,su(t,s)),this.matchTNodeWithReadOption(e,t,Gt(t,e,s,!1,!1))}else n===Sa?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Zo||r===Na||r===Sa&&4&t.type)this.addMatch(t.index,-2);else{const n=Gt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function su(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function iu(e,t,n,r){return-1===n?function(e,t){return 11&e.type?$o(e,t):4&e.type?Ca(e,t):null}(t,e):-2===n?function(e,t,n){return n===Zo?$o(t,e):n===Sa?Ca(t,e):n===Na?La(t,e):void 0}(e,t,r):Kt(e,e[1],n,t)}function ou(e,t,n,r){const s=t[19].queries[r];if(null===s.matches){const r=e.data,i=n.matches,o=[];for(let e=0;e<i.length;e+=2){const s=i[e];o.push(s<0?null:iu(t,r[s],i[e+1],n.metadata.read))}s.matches=o}return s.matches}function au(e,t,n,r){const s=e.queries.getByIndex(n),i=s.matches;if(null!==i){const o=ou(e,t,s,n);for(let e=0;e<i.length;e+=2){const n=i[e];if(n>0)r.push(o[e/2]);else{const s=i[e+1],o=t[-n];for(let e=he;e<o.length;e++){const t=o[e];t[17]===t[3]&&au(t[1],t,s,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];au(n[1],n,s,r)}}}}}return r}function uu(e){const t=Be(),n=$e(),r=st();it(r+1);const s=hu(n,r);if(e.dirty&&Fe(t)===(2==(2&s.metadata.flags))){if(null===s.matches)e.reset([]);else{const i=s.crossesNgTemplate?au(n,t,r,[]):ou(n,t,s,r);e.reset(i,Go),e.notifyOnChanges()}return!0}return!1}function lu(e,t,n,r){const s=$e();if(s.firstCreatePass){const i=Ze();(function(e,t,n){null===e.queries&&(e.queries=new nu),e.queries.track(new ru(t,n))})(s,new tu(t,n,r),i.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(s,e),2==(2&n)&&(s.staticContentQueries=!0)}!function(e,t,n){const r=new Ja(4==(4&n));Ns(e,t,r,r.destroy),null===t[19]&&(t[19]=new eu),t[19].queries.push(new Xa(r))}(s,Be(),n)}function cu(){return e=Be(),t=st(),e[19].queries[t].queryList;var e,t}function hu(e,t){return e.queries.getByIndex(t)}const du=new rn("Application Initializer");let fu=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Bo,this.reject=Bo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Hi(t))e.push(t);else if(Gi(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(bn(du,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const pu=new rn("AppId"),mu={provide:pu,useFactory:function(){return`${gu()}${gu()}${gu()}`},deps:[]};function gu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yu=new rn("Platform Initializer"),vu=new rn("Platform ID"),_u=new rn("appBootstrapListener");let wu=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const bu=new rn("LocaleId"),Tu=new rn("DefaultCurrencyCode");class Su{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Eu=function(e){return new $a(e)},Iu=Eu,Cu=function(e){return Promise.resolve(Eu(e))},ku=function(e){const t=Eu(e),n=Ir(le(e).declarations).reduce((e,t)=>{const n=ue(t);return n&&e.push(new Va(n)),e},[]);return new Su(t,n)},Au=ku,xu=function(e){return Promise.resolve(ku(e))};let Nu=(()=>{class e{constructor(){this.compileModuleSync=Iu,this.compileModuleAsync=Cu,this.compileModuleAndAllComponentsSync=Au,this.compileModuleAndAllComponentsAsync=xu}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Ru=(()=>Promise.resolve(0))();function Ou(e){"undefined"==typeof Zone?Ru.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Du{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qa(!1),this.onMicrotaskEmpty=new Qa(!1),this.onStable=new Qa(!1),this.onError=new Qa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=z.requestAnimationFrame,t=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(z,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Fu(e),e.isCheckStableRunning=!0,Lu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Fu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{try{return Mu(e),n.invokeTask(s,i,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&t(),Uu(e)}},onInvoke:(n,r,s,i,o,a,u)=>{try{return Mu(e),n.invoke(s,i,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Uu(e)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Fu(e),Lu(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Du.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Du.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,e,Pu,Bo,Bo);try{return s.runTask(i,t,n)}finally{s.cancelTask(i)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Pu={};function Lu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Fu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Mu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Uu(e){e._nesting--,Lu(e)}class ju{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qa,this.onMicrotaskEmpty=new Qa,this.onStable=new Qa,this.onError=new Qa}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Vu=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Du.assertNotInAngularZone(),Ou(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ou(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(bn(Du))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})(),qu=(()=>{class e{constructor(){this._applications=new Map,Hu.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Hu.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();class zu{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Bu(e){Hu=e}let $u,Hu=new zu,Zu=!0,Gu=!1;function Ku(){return Gu=!0,Zu}function Wu(){if(Gu)throw new Error("Cannot enable prod mode after platform setup.");Zu=!1}const Qu=new rn("AllowMultipleToken");class Yu{constructor(e,t){this.name=e,this.token=t}}function Ju(e,t,n=[]){const r=`Platform: ${t}`,s=new rn(r);return(t=[])=>{let i=Xu();if(!i||i.injector.get(Qu,!1))if(e)e(n.concat(t).concat({provide:s,useValue:!0}));else{const e=n.concat(t).concat({provide:s,useValue:!0},{provide:oi,useValue:"platform"});!function(e){if($u&&!$u.destroyed&&!$u.injector.get(Qu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$u=e.get(el);const t=e.get(yu,null);t&&t.forEach(e=>e())}(_i.create({providers:e,name:r}))}return function(e){const t=Xu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function Xu(){return $u&&!$u.destroyed?$u:null}let el=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new ju:("zone.js"===e?void 0:e)||new Du({enableLongStackTrace:Ku(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Du,useValue:n}];return n.run(()=>{const t=_i.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(t),i=s.injector.get(Tr,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{i.handleError(e)}});s.onDestroy(()=>{rl(this._modules,s),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Hi(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(i,n,()=>{const e=s.injector.get(fu);return e.runInitializers(),e.donePromise.then(()=>(Ro(s.injector.get(bu,xo)||xo),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=tl({},t);return function(e,t,n){const r=new $a(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(nl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(bn(_i))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function tl(e,t){return Array.isArray(t)?t.reduce(tl,e):Object.assign(Object.assign({},e),t)}let nl=(()=>{class e{constructor(e,t,n,r,s){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new i.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new i.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Du.assertNotInAngularZone(),Ou(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(c,h.pipe(e=>{return(0,u.x)()((t=l,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,a.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Vo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ka),s=n.create(_i.NULL,[],t||n.selector,r),i=s.location.nativeElement,o=s.injector.get(Vu,null),a=o&&s.injector.get(qu);return o&&a&&a.registerApplication(i,o),s.onDestroy(()=>{this.detachView(s.hostView),rl(this.components,s),a&&a.unregisterApplication(i)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;rl(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(_u,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(bn(Du),bn(_i),bn(Tr),bn(zo),bn(fu))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function rl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class sl{}class il{}const ol={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let al=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||ol}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>ul(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+s]).then(e=>ul(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(bn(Nu),bn(il,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function ul(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const ll=function(e){return null},cl=Ju(null,"core",[{provide:vu,useValue:"unknown"},{provide:el,deps:[_i]},{provide:qu,deps:[]},{provide:wu,deps:[]}]),hl=[{provide:nl,useClass:nl,deps:[Du,_i,Tr,zo,fu]},{provide:ja,deps:[Du],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:fu,useClass:fu,deps:[[new In,du]]},{provide:Nu,useClass:Nu,deps:[]},mu,{provide:ha,useFactory:function(){return wa},deps:[]},{provide:fa,useFactory:function(){return ba},deps:[]},{provide:bu,useFactory:function(e){return Ro(e=e||"undefined"!=typeof $localize&&$localize.locale||xo),e},deps:[[new En(bu),new In,new Cn]]},{provide:Tu,useValue:"USD"}];let dl=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(bn(nl))},e.\u0275mod=re({type:e}),e.\u0275inj=S({providers:hl}),e})()},8006:(e,t,n)=>{"use strict";n.d(t,{zQ:()=>P,ww:()=>L,rT:()=>N,f7:()=>O,L6:()=>A,_Q:()=>x,lh:()=>R,Qv:()=>k,nw:()=>D});var r=n(3018),s=n(9765),i=n(5917),o=n(7574),a=n(4402),u=n(6682),l=n(7771),c=n(5319),h=n(309),d=n(7971),f=n(8858);class p extends s.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new m(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=n.length;let i;if(this.closed)throw new d.N;if(this.isStopped||this.hasError?i=c.w.EMPTY:(this.observers.push(e),i=new f.W(this,e)),r&&e.add(e=new h.ht(e,r)),t)for(let o=0;o<s&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<s&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),i}_getNow(){return(this.scheduler||l.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,s=r.length;let i=0;for(;i<s&&!(e-r[i].time<n);)i++;return s>t&&(i=Math.max(i,s-t)),i>0&&r.splice(0,i),r}}class m{constructor(e,t){this.time=e,this.value=t}}function g(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let s,i,o=0,a=!1,u=!1;return function(l){let c;o++,!s||a?(a=!1,s=new p(e,t,r),c=s.subscribe(this),i=l.subscribe({next(e){s.next(e)},error(e){a=!0,s.error(e)},complete(){u=!0,i=void 0,s.complete()}}),u&&(i=void 0)):c=s.subscribe(this),this.add(()=>{o--,c.unsubscribe(),c=void 0,i&&!u&&n&&0===o&&(i.unsubscribe(),i=void 0,s=void 0)})}}(r))}var y=n(3190);function v(e,t){return t?(0,y.w)(()=>e,t):(0,y.w)(()=>e)}var _=n(8002),w=n(8049),b=n(3101),T=n(5435),S=n(9126),E=n(8939),I=n(8583),C=n(7841);const k=new r.OlP("angularfire2.auth.use-emulator"),A=new r.OlP("angularfire2.auth.settings"),x=new r.OlP("angularfire2.auth.tenant-id"),N=new r.OlP("angularfire2.auth.langugage-code"),R=new r.OlP("angularfire2.auth.use-device-language"),O=new r.OlP("angularfire.auth.persistence"),D=(e,t,n,r,s,i,o,a)=>(0,S.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=s,i&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,s,i,o,a]);let P=(()=>{class e{constructor(e,t,r,l,c,d,f,p,m,C,k){const A=new s.xQ,x=(0,i.of)(void 0).pipe((0,h.QV)(c.outsideAngular),(0,y.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,6780)))),(0,_.U)(()=>(0,E.on)(e,l,t)),(0,_.U)(e=>D(e,l,d,p,m,C,f,k)),g({bufferSize:1,refCount:!1}));if((0,I.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,i.of)(null);else{x.pipe((0,w.P)()).subscribe();const e=x.pipe((0,y.w)(e=>e.getRedirectResult().then(e=>e,()=>null)),S.iC,g({bufferSize:1,refCount:!1})),t=x.pipe((0,y.w)(e=>new o.y(t=>({unsubscribe:l.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=x.pipe((0,y.w)(e=>new o.y(t=>({unsubscribe:l.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(v(t),(0,b.R)(c.outsideAngular),(0,h.QV)(c.insideAngular)),this.user=e.pipe(v(n),(0,b.R)(c.outsideAngular),(0,h.QV)(c.insideAngular)),this.idToken=this.user.pipe((0,y.w)(e=>e?(0,a.D)(e.getIdToken()):(0,i.of)(null))),this.idTokenResult=this.user.pipe((0,y.w)(e=>e?(0,a.D)(e.getIdTokenResult()):(0,i.of)(null))),this.credential=(0,u.T)(e,A,this.authState.pipe((0,T.h)(e=>!e))).pipe((0,_.U)(e=>(null==e?void 0:e.user)?e:null),(0,b.R)(c.outsideAngular),(0,h.QV)(c.insideAngular))}return(0,E.pX)(this,x,l,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>A.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(E.Dh),r.LFG(E.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(S.HU),r.LFG(k,8),r.LFG(A,8),r.LFG(x,8),r.LFG(N,8),r.LFG(R,8),r.LFG(O,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),L=(()=>{class e{constructor(){C.Z.registerVersion("angularfire",S.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[P]}),e})()},5391:(e,t,n)=>{"use strict";n.d(t,{ST:()=>sm,yb:()=>im});var r=n(3018),s=n(3637),i=n(7574),o=n(4402),a=n(5917),u=n(9126),l=n(7393);function c(){return e=>e.lift(new h)}class h{call(e,t){return t.subscribe(new d(e))}}class d extends l.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class f{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new p(e,this.compare,this.keySelector))}}class p extends l.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var m=n(9761),g=n(8002),y=n(2145),v=n(5435),_=n(8939),w=n(8583),b=(n(6780),n(4486)),T=n(6304),S=n(5452),E=n(6034),I=n(300),C=n(4685),k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function A(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var x,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},R=R||{},O=N||self;function D(){}function P(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function L(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var F="closure_uid_"+(1e9*Math.random()>>>0),M=0;function U(e,t,n){return e.call.apply(e.bind,arguments)}function j(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function V(e,t,n){return(V=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?U:j).apply(null,arguments)}function q(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function z(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function B(){this.s=this.s,this.o=this.o}var $={};B.prototype.s=!1,B.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,F)&&e[F]||(e[F]=++M)}(this);delete $[e]}},B.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var H=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Z=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,s="string"==typeof e?e.split(""):e,i=0;i<r;i++)i in s&&t.call(n,s[i],i,e)};function G(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function W(e){return/^[\s\xa0]*$/.test(e)}var Q,Y=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function J(e,t){return-1!=e.indexOf(t)}function X(e,t){return e<t?-1:e>t?1:0}e:{var ee=O.navigator;if(ee){var te=ee.userAgent;if(te){Q=te;break e}}Q=""}function ne(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function re(e){var t={};for(var n in e)t[n]=e[n];return t}var se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(e,t){for(var n,r,s=1;s<arguments.length;s++){for(n in r=arguments[s])e[n]=r[n];for(var i=0;i<se.length;i++)n=se[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function oe(e){return oe[" "](e),e}oe[" "]=D;var ae,ue,le=J(Q,"Opera"),ce=J(Q,"Trident")||J(Q,"MSIE"),he=J(Q,"Edge"),de=he||ce,fe=J(Q,"Gecko")&&!(J(Q.toLowerCase(),"webkit")&&!J(Q,"Edge"))&&!(J(Q,"Trident")||J(Q,"MSIE"))&&!J(Q,"Edge"),pe=J(Q.toLowerCase(),"webkit")&&!J(Q,"Edge");function me(){var e=O.document;return e?e.documentMode:void 0}e:{var ge="",ye=(ue=Q,fe?/rv:([^\);]+)(\)|;)/.exec(ue):he?/Edge\/([\d\.]+)/.exec(ue):ce?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ue):pe?/WebKit\/(\S+)/.exec(ue):le?/(?:Version)[ \/]?(\S+)/.exec(ue):void 0);if(ye&&(ge=ye?ye[1]:""),ce){var ve=me();if(null!=ve&&ve>parseFloat(ge)){ae=String(ve);break e}}ae=ge}var _e={};var we=O.document&&ce&&(me()||parseInt(ae,10))||void 0,be=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{O.addEventListener("test",D,t),O.removeEventListener("test",D,t)}catch(n){}return e}();function Te(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Se(e,t){if(Te.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(fe){e:{try{oe(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ee[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Se.Z.h.call(this)}}Te.prototype.h=function(){this.defaultPrevented=!0},z(Se,Te);var Ee={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function ke(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=s,this.key=++Ce,this.ca=this.fa=!1}function Ae(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function xe(e){this.src=e,this.g={},this.h=0}function Ne(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=H(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Ae(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Re(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.ca&&i.listener==t&&i.capture==!!n&&i.ia==r)return s}return-1}xe.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Re(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ke(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var Oe="closure_lm_"+(1e6*Math.random()|0),De={};function Pe(e,t,n,r,s){if(r&&r.once)return Fe(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Pe(e,t[i],n,r,s);return null}return n=Be(n),e&&e[Ie]?e.N(t,n,L(r)?!!r.capture:!!r,s):Le(e,t,n,!1,r,s)}function Le(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=L(s)?!!s.capture:!!s,a=qe(e);if(a||(e[Oe]=a=new xe(e)),(n=a.add(t,n,r,o,i)).proxy)return n;if(r=function(){var e=Ve;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)be||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(je(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fe(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Fe(e,t[i],n,r,s);return null}return n=Be(n),e&&e[Ie]?e.O(t,n,L(r)?!!r.capture:!!r,s):Le(e,t,n,!0,r,s)}function Me(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Me(e,t[i],n,r,s);else r=L(r)?!!r.capture:!!r,n=Be(n),e&&e[Ie]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Re(i=e.g[t],n,r,s))&&(Ae(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--))):e&&(e=qe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Re(t,n,r,s)),(n=-1<e?t[e]:null)&&Ue(n))}function Ue(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ie])Ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(je(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=qe(t))?(Ne(n,e),0==n.h&&(n.src=null,t[Oe]=null)):Ae(e)}}}function je(e){return e in De?De[e]:De[e]="on"+e}function Ve(e,t){if(e.ca)e=!0;else{t=new Se(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ue(e),e=n.call(r,t)}return e}function qe(e){return(e=e[Oe])instanceof xe?e:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(e){return"function"==typeof e?e:(e[ze]||(e[ze]=function(t){return e.handleEvent(t)}),e[ze])}function $e(){B.call(this),this.i=new xe(this),this.P=this,this.I=null}function He(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Te(t,e);else if(t instanceof Te)t.target=t.target||e;else{var s=t;ie(t=new Te(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=Ze(o,r,!0,t)&&s}if(s=Ze(o=t.g=e,r,!0,t)&&s,s=Ze(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=Ze(o=t.g=n[i],r,!1,t)&&s}function Ze(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ne(e.i,o),s=!1!==a.call(u,r)&&s}}return s&&!r.defaultPrevented}z($e,B),$e.prototype[Ie]=!0,$e.prototype.removeEventListener=function(e,t,n,r){Me(this,e,t,n,r)},$e.prototype.M=function(){if($e.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ae(n[r]);delete t.g[e],t.h--}}this.I=null},$e.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$e.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ge=O.JSON.stringify;function Ke(){var e=nt,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var We,Qe=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Ye.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Ye=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new Je},function(e){return e.reset()}),Je=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Xe(e){O.setTimeout(function(){throw e},0)}function et(e,t){We||function(){var e=O.Promise.resolve(void 0);We=function(){e.then(rt)}}(),tt||(We(),tt=!0),nt.add(e,t)}var tt=!1,nt=new Qe;function rt(){for(var e;e=Ke();){try{e.h.call(e.g)}catch(n){Xe(n)}var t=Ye;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}tt=!1}function st(e,t){$e.call(this),this.h=e||1,this.g=t||O,this.j=V(this.kb,this),this.l=Date.now()}function it(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ot(e,t,n){if("function"==typeof e)n&&(e=V(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=V(e.handleEvent,e)}return 2147483647<Number(t)?-1:O.setTimeout(e,t||0)}function at(e){e.g=ot(function(){e.g=null,e.i&&(e.i=!1,at(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}z(st,$e),(x=st.prototype).da=!1,x.S=null,x.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),He(this,"tick"),this.da&&(it(this),this.start()))}},x.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},x.M=function(){st.Z.M.call(this),it(this),delete this.g};var ut=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:at(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(O.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(B);function lt(e){B.call(this),this.h=e,this.g={}}z(lt,B);var ct=[];function ht(e,t,n,r){Array.isArray(n)||(n&&(ct[0]=n.toString()),n=ct);for(var s=0;s<n.length;s++){var i=Pe(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function dt(e){ne(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ue(e)},e),e.g={}}function ft(){this.g=!0}function pt(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return Ge(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}lt.prototype.M=function(){lt.Z.M.call(this),dt(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ft.prototype.Aa=function(){this.g=!1},ft.prototype.info=function(){};var mt={},gt=null;function yt(){return gt=gt||new $e}function vt(e){Te.call(this,mt.Ma,e)}function _t(e){var t=yt();He(t,new vt(t,e))}function wt(e,t){Te.call(this,mt.STAT_EVENT,e),this.stat=t}function bt(e){var t=yt();He(t,new wt(t,e))}function Tt(e,t){Te.call(this,mt.Na,e),this.size=t}function St(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){e()},t)}mt.Ma="serverreachability",z(vt,Te),mt.STAT_EVENT="statevent",z(wt,Te),mt.Na="timingevent",z(Tt,Te);var Et={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},It={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ct(){}function kt(){}Ct.prototype.h=null;var At,xt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nt(){Te.call(this,"d")}function Rt(){Te.call(this,"c")}function Ot(){}function Dt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new lt(this),this.P=Lt,this.W=new st(e=de?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Pt}function Pt(){this.i=null,this.g="",this.h=!1}z(Nt,Te),z(Rt,Te),z(Ot,Ct),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},At=new Ot;var Lt=45e3,Ft={},Mt={};function Ut(e,t,n){e.K=1,e.v=un(tn(t)),e.s=n,e.U=!0,jt(e,null)}function jt(e,t){e.F=Date.now(),Bt(e),e.A=tn(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),bn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Pt,e.g=Tr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ut(V(e.Ia,e,e.g),e.O)),ht(e.V,e.g,"readystatechange",e.gb),t=e.H?re(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_t(1),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function Vt(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function qt(e,t,n){for(var r,s=!0;!e.I&&e.C<n.length;){if((r=zt(e,n))==Mt){4==t&&(e.o=4,bt(14),s=!1),pt(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ft){e.o=4,bt(15),pt(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}pt(e.j,e.m,r,null),Kt(e,r)}Vt(e)&&r!=Mt&&r!=Ft&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,bt(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),pr(t),t.L=!0,bt(11))):(pt(e.j,e.m,n,"[Invalid Chunked Response]"),Gt(e),Zt(e))}function zt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mt:(n=Number(t.substring(n,r)),isNaN(n)?Ft:(r+=1)+n>t.length?Mt:(t=t.substr(r,n),e.C=r+n,t))}function Bt(e){e.Y=Date.now()+e.P,$t(e,e.P)}function $t(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=St(V(e.eb,e),t)}function Ht(e){e.B&&(O.clearTimeout(e.B),e.B=null)}function Zt(e){0==e.l.G||e.I||yr(e.l,e)}function Gt(e){Ht(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,it(e.W),dt(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Kt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||An(n.i,e)))if(n.I=e.N,!e.J&&An(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;gr(n),ir(n)}fr(n),bt(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=St(V(n.ab,n),6e3));if(1>=kn(n.i)&&n.ka){try{n.ka()}catch(i){}n.ka=void 0}}else _r(n,11)}else if((e.J||n.g==e)&&gr(n),!W(t))for(s=n.Ca.g.parse(t),t=0;t<s.length;t++){var i=s[t];if(n.U=i[0],i=i[1],2==n.G)if("c"==i[0]){n.J=i[1],n.la=i[2];var o=i[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=i[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=i[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(J(c,"spdy")||J(c,"quic")||J(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(xn(h,h.h),h.h=null))}if(r.D){var d=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,an(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=e;if((r=n).oa=br(r,r.H?r.la:null,r.W),f.J){Nn(r.i,f);var p=f,m=r.K;m&&p.setTimeout(m),p.B&&(Ht(p),Bt(p)),r.g=f}else dr(r);0<n.l.length&&ur(n)}else"stop"!=i[0]&&"close"!=i[0]||_r(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?_r(n,7):sr(n):"noop"!=i[0]&&n.j&&n.j.wa(i),n.A=0)}_t(4)}catch(i){}}function Wt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(P(e)||"string"==typeof e)Z(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(P(e)||"string"==typeof e){n=[];for(var r=e.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,e)n[r++]=s;s=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(P(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}}function Qt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Qt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Yt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Jt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var s={};for(n=t=0;t<e.g.length;)Jt(s,r=e.g[t])||(e.g[n++]=r,s[r]=1),t++;e.g.length=n}}function Jt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(x=Dt.prototype).setTimeout=function(e){this.P=e},x.gb=function(e){e=e.target;var t=this.L;t&&3==Xn(e)?t.l():this.Ia(e)},x.Ia=function(e){try{if(e==this.g)e:{var t=Xn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||de||this.g&&(this.h.h||this.g.ga()||er(this.g)))){this.I||4!=t||7==n||_t(8==n||0>=r?3:2),Ht(this);var s=this.g.ba();this.N=s;t:if(Vt(this)){var i=er(this.g);e="";var o=i.length,a=4==Xn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gt(this),Zt(this);var u="";break t}this.h.i=new O.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:a&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==s,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,s),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(l)){var h=l;break t}}h=null}if(!(s=h)){this.i=!1,this.o=3,bt(12),Gt(this),Zt(this);break e}pt(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kt(this,s)}this.U?(qt(this,t,u),de&&this.i&&3==t&&(ht(this.V,this.W,"tick",this.fb),this.W.start())):(pt(this.j,this.m,u,null),Kt(this,u)),4==t&&Gt(this),this.i&&!this.I&&(4==t?yr(this.l,this):(this.i=!1,Bt(this)))}else 400==s&&0<u.indexOf("Unknown SID")?(this.o=3,bt(12)):(this.o=0,bt(13)),Gt(this),Zt(this)}}}catch(t){}},x.fb=function(){if(this.g){var e=Xn(this.g),t=this.g.ga();this.C<t.length&&(Ht(this),qt(this,e,t),this.i&&4!=e&&Bt(this))}},x.cancel=function(){this.I=!0,Gt(this)},x.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(_t(3),bt(17)),Gt(this),this.o=2,Zt(this)):$t(this,this.Y-e)},(x=Qt.prototype).R=function(){Yt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},x.T=function(){return Yt(this),this.g.concat()},x.get=function(e,t){return Jt(this.h,e)?this.h[e]:t},x.set=function(e,t){Jt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},x.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);e.call(t,i,s,this)}};var Xt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function en(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof en){this.g=void 0!==t?t:e.g,nn(this,e.j),this.s=e.s,rn(this,e.i),sn(this,e.m),this.l=e.l,t=e.h;var n=new yn;n.i=t.i,t.g&&(n.g=new Qt(t.g),n.h=t.h),on(this,n),this.o=e.o}else e&&(n=String(e).match(Xt))?(this.g=!!t,nn(this,n[1]||"",!0),this.s=ln(n[2]||""),rn(this,n[3]||"",!0),sn(this,n[4]),this.l=ln(n[5]||"",!0),on(this,n[6]||"",!0),this.o=ln(n[7]||"")):(this.g=!!t,this.h=new yn(null,this.g))}function tn(e){return new en(e)}function nn(e,t,n){e.j=n?ln(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function rn(e,t,n){e.i=n?ln(t,!0):t}function sn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function on(e,t,n){t instanceof yn?(e.h=t,function(e,t){t&&!e.j&&(vn(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_n(this,t),bn(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=cn(t,mn)),e.h=new yn(t,e.g))}function an(e,t,n){e.h.set(t,n)}function un(e){return an(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ln(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function cn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,hn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}en.prototype.toString=function(){var e=[],t=this.j;t&&e.push(cn(t,dn,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(cn(t,dn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(cn(n,"/"==n.charAt(0)?pn:fn,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",cn(n,gn)),e.join("")};var dn=/[#\/\?@]/g,fn=/[#\?:]/g,pn=/[#\?]/g,mn=/[#\?@]/g,gn=/#/g;function yn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vn(e){e.g||(e.g=new Qt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _n(e,t){vn(e),t=Tn(e,t),Jt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Jt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Yt(e)))}function wn(e,t){return vn(e),t=Tn(e,t),Jt(e.g.h,t)}function bn(e,t,n){_n(e,t),0<n.length&&(e.i=null,e.g.set(Tn(e,t),K(n)),e.h+=n.length)}function Tn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(x=yn.prototype).add=function(e,t){vn(this),this.i=null,e=Tn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},x.forEach=function(e,t){vn(this),this.g.forEach(function(n,r){Z(n,function(n){e.call(t,n,r,this)},this)},this)},x.T=function(){vn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var s=e[r],i=0;i<s.length;i++)n.push(t[r]);return n},x.R=function(e){vn(this);var t=[];if("string"==typeof e)wn(this,e)&&(t=G(t,this.g.get(Tn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=G(t,e[n])}return t},x.set=function(e,t){return vn(this),this.i=null,wn(this,e=Tn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},x.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},x.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.i=e.join("&")};var Sn=function(e,t){this.h=e,this.g=t};function En(e){this.l=e||In,e=O.PerformanceNavigationTiming?0<(e=O.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(O.g&&O.g.Ea&&O.g.Ea()&&O.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var In=10;function Cn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function kn(e){return e.h?1:e.g?e.g.size:0}function An(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xn(e,t){e.g?e.g.add(t):e.h=t}function Nn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var s=A(e.g.values()),i=s.next();!i.done;i=s.next())r=r.concat(i.value.D)}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r}return K(e.i)}function On(){}function Dn(){this.g=new On}function Pn(e,t,n){var r=n||"";try{Wt(e,function(e,n){var s=e;L(e)&&(s=Ge(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ln(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function Fn(e){this.l=e.$b||null,this.j=e.ib||!1}function Mn(e,t){$e.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Un,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}En.prototype.cancel=function(){var e,t;if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=A(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},On.prototype.stringify=function(e){return O.JSON.stringify(e,void 0)},On.prototype.parse=function(e){return O.JSON.parse(e,void 0)},z(Fn,Ct),Fn.prototype.g=function(){return new Mn(this.l,this.j)},Fn.prototype.i=function(e){return function(){return e}}({}),z(Mn,$e);var Un=0;function jn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Vn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qn(e)}function qn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(x=Mn.prototype).open=function(e,t){if(this.readyState!=Un)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qn(this)},x.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||O).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vn(this)),this.readyState=Un},x.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==O.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},x.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vn(this):qn(this),3==this.readyState&&jn(this)}},x.Ua=function(e){this.g&&(this.response=this.responseText=e,Vn(this))},x.Ta=function(e){this.g&&(this.response=e,Vn(this))},x.ha=function(){this.g&&Vn(this)},x.setRequestHeader=function(e,t){this.v.append(e,t)},x.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},x.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zn=O.JSON.parse;function Bn(e){$e.call(this),this.headers=new Qt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$n,this.K=this.L=!1}z(Bn,$e);var $n="",Hn=/^https?$/i,Zn=["POST","PUT"];function Gn(e){return"content-type"==e.toLowerCase()}function Kn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wn(e),Yn(e)}function Wn(e){e.D||(e.D=!0,He(e,"complete"),He(e,"error"))}function Qn(e){if(e.h&&void 0!==R&&(!e.C[1]||4!=Xn(e)||2!=e.ba()))if(e.v&&4==Xn(e))ot(e.Fa,0,e);else if(He(e,"readystatechange"),4==Xn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var s;if(s=0===n){var i=String(e.H).match(Xt)[1]||null;if(!i&&O.self&&O.self.location){var o=O.self.location.protocol;i=o.substr(0,o.length-1)}s=!Hn.test(i?i.toLowerCase():"")}t=s}if(t)He(e,"complete"),He(e,"success");else{e.m=6;try{var a=2<Xn(e)?e.g.statusText:""}catch(u){a=""}e.j=a+" ["+e.ba()+"]",Wn(e)}}finally{Yn(e)}}}function Yn(e,t){if(e.g){Jn(e);var n=e.g,r=e.C[0]?D:null;e.g=null,e.C=null,t||He(e,"ready");try{n.onreadystatechange=r}catch(s){}}}function Jn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(O.clearTimeout(e.A),e.A=null)}function Xn(e){return e.g?e.g.readyState:0}function er(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case $n:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function tr(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ne(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):an(e,t,n))}function nr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function rr(e){this.za=0,this.l=[],this.h=new ft,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nr("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nr("baseRetryDelayMs",5e3,e),this.$a=nr("retryDelaySeedMs",1e4,e),this.Ya=nr("forwardChannelMaxRetries",2,e),this.ra=nr("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new En(e&&e.concurrentRequestLimit),this.Ca=new Dn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function sr(e){if(or(e),3==e.G){var t=e.V++,n=tn(e.F);an(n,"SID",e.J),an(n,"RID",t),an(n,"TYPE","terminate"),cr(e,n),(t=new Dt(e,e.h,t,void 0)).K=2,t.v=un(tn(n)),n=!1,O.navigator&&O.navigator.sendBeacon&&(n=O.navigator.sendBeacon(t.v.toString(),"")),!n&&O.Image&&((new Image).src=t.v,n=!0),n||(t.g=Tr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Bt(t)}wr(e)}function ir(e){e.g&&(pr(e),e.g.cancel(),e.g=null)}function or(e){ir(e),e.u&&(O.clearTimeout(e.u),e.u=null),gr(e),e.i.cancel(),e.m&&("number"==typeof e.m&&O.clearTimeout(e.m),e.m=null)}function ar(e,t){e.l.push(new Sn(e.Za++,t)),3==e.G&&ur(e)}function ur(e){Cn(e.i)||e.m||(e.m=!0,et(e.Ha,e),e.C=0)}function lr(e,t){var n;n=t?t.m:e.V++;var r=tn(e.F);an(r,"SID",e.J),an(r,"RID",n),an(r,"AID",e.U),cr(e,r),e.o&&e.s&&tr(r,e.o,e.s),n=new Dt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=hr(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),xn(e.i,n),Ut(n,r,t)}function cr(e,t){e.j&&Wt({},function(e,n){an(t,n,e)})}function hr(e,t,n){n=Math.min(e.l.length,n);var r=e.j?V(e.j.Oa,e.j,e):null;e:for(var s=e.l,i=-1;;){var o=["count="+n];-1==i?0<n?o.push("ofs="+(i=s[0].h)):i=0:o.push("ofs="+i);for(var a=!0,u=0;u<n;u++){var l=s[u].h,c=s[u].g;if(0>(l-=i))i=Math.max(0,s[u].h-100),a=!1;else try{Pn(c,o,"req"+l+"_")}catch(Jr){r&&r(c)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function dr(e){e.g||e.u||(e.Y=1,et(e.Ga,e),e.A=0)}function fr(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=St(V(e.Ga,e),vr(e,e.A)),e.A++,0))}function pr(e){null!=e.B&&(O.clearTimeout(e.B),e.B=null)}function mr(e){e.g=new Dt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=tn(e.oa);an(t,"RID","rpc"),an(t,"SID",e.J),an(t,"CI",e.N?"0":"1"),an(t,"AID",e.U),cr(e,t),an(t,"TYPE","xmlhttp"),e.o&&e.s&&tr(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=un(tn(t)),n.s=null,n.U=!0,jt(n,e)}function gr(e){null!=e.v&&(O.clearTimeout(e.v),e.v=null)}function yr(e,t){var n=null;if(e.g==t){gr(e),pr(e),e.g=null;var r=2}else{if(!An(e.i,t))return;n=t.D,Nn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var s=e.C;He(r=yt(),new Tt(r,n,t,s)),ur(e)}else dr(e);else if(3==(s=t.o)||0==s&&0<e.I||!(1==r&&function(e,t){return!(kn(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=St(V(e.Ha,e,t),vr(e,e.C)),e.C++,0)))}(e,t)||2==r&&fr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:_r(e,5);break;case 4:_r(e,10);break;case 3:_r(e,6);break;default:_r(e,2)}}function vr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function _r(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=V(e.jb,e);n||(n=new en("//www.google.com/images/cleardot.gif"),O.location&&"http"==O.location.protocol||nn(n,"https"),un(n)),function(e,t){var n=new ft;if(O.Image){var r=new Image;r.onload=q(Ln,n,r,"TestLoadImage: loaded",!0,t),r.onerror=q(Ln,n,r,"TestLoadImage: error",!1,t),r.onabort=q(Ln,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=q(Ln,n,r,"TestLoadImage: timeout",!1,t),O.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else bt(2);e.G=0,e.j&&e.j.va(t),wr(e),or(e)}function wr(e){e.G=0,e.I=-1,e.j&&(0==Rn(e.i).length&&0==e.l.length||(e.i.i.length=0,K(e.l),e.l.length=0),e.j.ua())}function br(e,t,n){var r=function(e){return e instanceof en?tn(e):new en(e,void 0)}(n);if(""!=r.i)t&&rn(r,t+"."+r.i),sn(r,r.m);else{var s=O.location;r=function(e,t,n,r){var s=new en(null,void 0);return e&&nn(s,e),t&&rn(s,t),n&&sn(s,n),r&&(s.l=r),s}(s.protocol,t?t+"."+s.hostname:s.hostname,+s.port,n)}return e.aa&&ne(e.aa,function(e,t){an(r,t,e)}),n=e.sa,(t=e.D)&&n&&an(r,t,n),an(r,"VER",e.ma),cr(e,r),r}function Tr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Bn(n&&e.Ba&&!e.qa?new Fn({ib:!0}):e.qa)).L=e.H,t}function Sr(){}function Er(){if(ce&&!(10<=Number(we)))throw Error("Environmental error: no available transport.")}function Ir(e,t){$e.call(this),this.g=new rr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!W(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!W(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Ar(this)}function Cr(e){Nt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kr(){Rt.call(this),this.status=1}function Ar(e){this.g=e}(x=Bn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():At.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:At),this.g.onreadystatechange=V(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(i){return void Kn(this,i)}e=n||"";var s=new Qt(this.headers);r&&Wt(r,function(e,t){s.set(t,e)}),r=function(e){e:{for(var t=Gn,n=e.length,r="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in r&&t.call(void 0,r[s],s,e)){t=s;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(s.T()),n=O.FormData&&e instanceof O.FormData,!(0<=H(Zn,t))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jn(this),0<this.B&&((this.K=function(e){return ce&&function(){return e=_e,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=Y(String(ae)).split("."),n=Y("9").split("."),r=Math.max(t.length,n.length),s=0;0==e&&s<r;s++){var i=t[s]||"",o=n[s]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=X(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||X(0==i[2].length,0==o[2].length)||X(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=V(this.pa,this)):this.A=ot(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Kn(this,i)}},x.pa=function(){void 0!==R&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,He(this,"timeout"),this.abort(8))},x.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,He(this,"complete"),He(this,"abort"),Yn(this))},x.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yn(this,!0)),Bn.Z.M.call(this)},x.Fa=function(){this.s||(this.F||this.v||this.l?Qn(this):this.cb())},x.cb=function(){Qn(this)},x.ba=function(){try{return 2<Xn(this)?this.g.status:-1}catch(ue){return-1}},x.ga=function(){try{return this.g?this.g.responseText:""}catch(ue){return""}},x.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zn(t)}},x.Da=function(){return this.m},x.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(x=rr.prototype).ma=8,x.G=1,x.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},x.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Dt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ie(n=re(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,s=0;s<this.l.length;s++){var i=this.l[s];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=s;break e}if(4096===r||s===this.l.length-1){r=s+1;break e}}r=1e3}else r=1e3;r=hr(this,t,r),an(s=tn(this.F),"RID",e),an(s,"CVER",22),this.D&&an(s,"X-HTTP-Session-Id",this.D),cr(this,s),this.o&&n&&tr(s,this.o,n),xn(this.i,t),this.Ra&&an(s,"TYPE","init"),this.ja?(an(s,"$req",r),an(s,"SID","null"),t.$=!0,Ut(t,s,null)):Ut(t,s,r),this.G=2}}else 3==this.G&&(e?lr(this,e):0==this.l.length||Cn(this.i)||lr(this))},x.Ga=function(){if(this.u=null,mr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=St(V(this.bb,this),e)}},x.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,bt(10),ir(this),mr(this))},x.ab=function(){null!=this.v&&(this.v=null,ir(this),fr(this),bt(19))},x.jb=function(e){e?(this.h.info("Successfully pinged google.com"),bt(2)):(this.h.info("Failed to ping google.com"),bt(1))},(x=Sr.prototype).xa=function(){},x.wa=function(){},x.va=function(){},x.ua=function(){},x.Oa=function(){},Er.prototype.g=function(e,t){return new Ir(e,t)},z(Ir,$e),Ir.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),et(V(e.hb,e,t))),bt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=br(e,null,e.W),ur(e)},Ir.prototype.close=function(){sr(this.g)},Ir.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,ar(this.g,t)}else this.v?((t={}).__data__=Ge(e),ar(this.g,t)):ar(this.g,e)},Ir.prototype.M=function(){this.g.j=null,delete this.j,sr(this.g),delete this.g,Ir.Z.M.call(this)},z(Cr,Nt),z(kr,Rt),z(Ar,Sr),Ar.prototype.xa=function(){He(this.g,"a")},Ar.prototype.wa=function(e){He(this.g,new Cr(e))},Ar.prototype.va=function(e){He(this.g,new kr(e))},Ar.prototype.ua=function(){He(this.g,"b")},Er.prototype.createWebChannel=Er.prototype.g,Ir.prototype.send=Ir.prototype.u,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,Et.NO_ERROR=0,Et.TIMEOUT=8,Et.HTTP_ERROR=6,It.COMPLETE="complete",kt.EventType=xt,xt.OPEN="a",xt.CLOSE="b",xt.ERROR="c",xt.MESSAGE="d",$e.prototype.listen=$e.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var xr=Et,Nr=It,Rr=mt,Or=Fn,Dr=kt,Pr=Bn;class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let Fr="9.0.2";const Mr=new I.Yd("@firebase/firestore");function Ur(){return Mr.logLevel}function jr(e,...t){if(Mr.logLevel<=I.in.DEBUG){const n=t.map(zr);Mr.debug(`Firestore (${Fr}): ${e}`,...n)}}function Vr(e,...t){if(Mr.logLevel<=I.in.ERROR){const n=t.map(zr);Mr.error(`Firestore (${Fr}): ${e}`,...n)}}function qr(e,...t){if(Mr.logLevel<=I.in.WARN){const n=t.map(zr);Mr.warn(`Firestore (${Fr}): ${e}`,...n)}}function zr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Br(e="Unexpected state"){const t=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: `+e;throw Vr(t),new Error(t)}function $r(e,t){e||Br()}function Hr(e,t){return e}const Zr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gr extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wr{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Qr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class Yr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Jr{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const s=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let i=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Kr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable((0,T.Z)(function*(){yield t.promise,yield s(n.currentUser)}))},a=e=>{jr("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(jr("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Kr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(jr("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?($r("string"==typeof t.accessToken),new Wr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $r(null===e||"string"==typeof e),new Lr(e)}}class Xr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Lr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class es{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Xr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ts{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function ns(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ts.T=-1;class rs{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=ns(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}}function ss(e,t){return e<t?-1:e>t?1:0}function is(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function os(e){return e+"\0"}class as{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Gr(Zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Gr(Zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Gr(Zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Gr(Zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return as.fromMillis(Date.now())}static fromDate(e){return as.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new as(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ss(this.nanoseconds,e.nanoseconds):ss(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class us{constructor(e){this.timestamp=e}static fromTimestamp(e){return new us(e)}static min(){return new us(new as(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ls(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ds{constructor(e,t,n){void 0===t?t=0:t>e.length&&Br(),void 0===n?n=e.length-t:n>e.length-t&&Br(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ds.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ds?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fs extends ds{construct(e,t,n){return new fs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new fs(t)}static emptyPath(){return new fs([])}}const ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends ds{construct(e,t,n){return new ms(e,t,n)}static isValidIdentifier(e){return ps.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ms(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Gr(Zr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Gr(Zr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Gr(Zr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(t)}static emptyPath(){return new ms([])}}class gs{constructor(e){this.fields=e,e.sort(ms.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return is(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ys(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ys(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ss(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const vs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(e){if($r(!!e),"string"==typeof e){let t=0;const n=vs.exec(e);if($r(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ws(e.seconds),nanos:ws(e.nanos)}}function ws(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bs(e){return"string"==typeof e?ys.fromBase64String(e):ys.fromUint8Array(e)}function Ts(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ss(e){const t=e.mapValue.fields.__previous_value__;return Ts(t)?Ss(t):t}function Es(e){const t=_s(e.mapValue.fields.__local_write_time__.timestampValue);return new as(t.seconds,t.nanos)}function Is(e){return null==e}function Cs(e){return 0===e&&1/e==-1/0}function ks(e){return"number"==typeof e&&Number.isInteger(e)&&!Cs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class As{constructor(e){this.path=e}static fromPath(e){return new As(fs.fromString(e))}static fromName(e){return new As(fs.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===fs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new As(new fs(e.slice()))}}function xs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ts(e)?4:10:Br()}function Ns(e,t){const n=xs(e);if(n!==xs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Es(e).isEqual(Es(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_s(e.timestampValue),r=_s(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bs(e.bytesValue).isEqual(bs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ws(e.geoPointValue.latitude)===ws(t.geoPointValue.latitude)&&ws(e.geoPointValue.longitude)===ws(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ws(e.integerValue)===ws(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ws(e.doubleValue),r=ws(t.doubleValue);return n===r?Cs(n)===Cs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return is(e.arrayValue.values||[],t.arrayValue.values||[],Ns);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ls(n)!==ls(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ns(n[s],r[s])))return!1;return!0}(e,t);default:return Br()}}function Rs(e,t){return void 0!==(e.values||[]).find(e=>Ns(e,t))}function Os(e,t){const n=xs(e),r=xs(t);if(n!==r)return ss(n,r);switch(n){case 0:return 0;case 1:return ss(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ws(e.integerValue||e.doubleValue),r=ws(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ds(e.timestampValue,t.timestampValue);case 4:return Ds(Es(e),Es(t));case 5:return ss(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bs(e),r=bs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=ss(n[s],r[s]);if(0!==e)return e}return ss(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ss(ws(e.latitude),ws(t.latitude));return 0!==n?n:ss(ws(e.longitude),ws(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Os(n[s],r[s]);if(e)return e}return ss(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=ss(r[o],i[o]);if(0!==e)return e;const t=Os(n[r[o]],s[i[o]]);if(0!==t)return t}return ss(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Br()}}function Ds(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ss(e,t);const n=_s(e),r=_s(t),s=ss(n.seconds,r.seconds);return 0!==s?s:ss(n.nanos,r.nanos)}function Ps(e){return Ls(e)}function Ls(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_s(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bs(e.bytesValue).toBase64():"referenceValue"in e?As.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ls(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Ls(e.fields[s])}`;return n+"}"}(e.mapValue):Br();var t}function Fs(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ms(e){return!!e&&"integerValue"in e}function Us(e){return!!e&&"arrayValue"in e}function js(e){return!!e&&"nullValue"in e}function Vs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qs(e){return!!e&&"mapValue"in e}function zs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return cs(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=zs(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zs(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Bs{constructor(e){this.value=e}static empty(){return new Bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zs(t)}setAll(e){let t=ms.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=zs(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());qs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){cs(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Bs(zs(this.value))}}function $s(e){const t=[];return cs(e.fields,(e,n)=>{const r=new ms([e]);if(qs(n)){const e=$s(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new gs(t)}class Hs{constructor(e,t,n,r,s){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=s}static newInvalidDocument(e){return new Hs(e,0,us.min(),Bs.empty(),0)}static newFoundDocument(e,t,n){return new Hs(e,1,t,n,0)}static newNoDocument(e,t){return new Hs(e,2,t,Bs.empty(),0)}static newUnknownDocument(e,t){return new Hs(e,3,t,Bs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Hs(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zs{constructor(e,t=null,n=[],r=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.A=null}}function Gs(e,t=null,n=[],r=[],s=null,i=null,o=null){return new Zs(e,t,n,r,s,i,o)}function Ks(e){const t=Hr(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Ps(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Is(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=ai(t.startAt)),t.endAt&&(e+="|ub:",e+=ai(t.endAt)),t.A=e}return t.A}function Ws(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<e.orderBy.length;s++)if(!li(e.orderBy[s],t.orderBy[s]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if((n=e.filters[s]).op!==(r=t.filters[s]).op||!n.field.isEqual(r.field)||!Ns(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hi(e.startAt,t.startAt)&&hi(e.endAt,t.endAt)}function Qs(e){return As.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ys extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Js(e,t,n):"array-contains"===t?new ni(e,n):"in"===t?new ri(e,n):"not-in"===t?new si(e,n):"array-contains-any"===t?new ii(e,n):new Ys(e,t,n)}static R(e,t,n){return"in"===t?new Xs(e,n):new ei(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Os(t,this.value)):null!==t&&xs(this.value)===xs(t)&&this.P(Os(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Br()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Js extends Ys{constructor(e,t,n){super(e,t,n),this.key=As.fromName(n.referenceValue)}matches(e){const t=As.comparator(e.key,this.key);return this.P(t)}}class Xs extends Ys{constructor(e,t){super(e,"in",t),this.keys=ti(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ei extends Ys{constructor(e,t){super(e,"not-in",t),this.keys=ti(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ti(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>As.fromName(e.referenceValue))}class ni extends Ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Us(t)&&Rs(t.arrayValue,this.value)}}class ri extends Ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rs(this.value.arrayValue,t)}}class si extends Ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rs(this.value.arrayValue,t)}}class ii extends Ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Us(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Rs(this.value.arrayValue,e))}}class oi{constructor(e,t){this.position=e,this.before=t}}function ai(e){return`${e.before?"b":"a"}:${e.position.map(e=>Ps(e)).join(",")}`}class ui{constructor(e,t="asc"){this.field=e,this.dir=t}}function li(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ci(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?As.comparator(As.fromName(o.referenceValue),n.key):Os(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function hi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ns(e.position[n],t.position[n]))return!1;return!0}class di{constructor(e,t=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function fi(e,t,n,r,s,i,o,a){return new di(e,t,n,r,s,i,o,a)}function pi(e){return new di(e)}function mi(e){return!Is(e.limit)&&"F"===e.limitType}function gi(e){return!Is(e.limit)&&"L"===e.limitType}function yi(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function vi(e){for(const t of e.filters)if(t.v())return t.field;return null}function _i(e){return null!==e.collectionGroup}function wi(e){const t=Hr(e);if(null===t.V){t.V=[];const e=vi(t),n=yi(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new ui(e)),t.V.push(new ui(ms.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new ui(ms.keyField(),e))}}}return t.V}function bi(e){const t=Hr(e);if(!t.S)if("F"===t.limitType)t.S=Gs(t.path,t.collectionGroup,wi(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of wi(t))e.push(new ui(s.field,"desc"===s.dir?"asc":"desc"));const n=t.endAt?new oi(t.endAt.position,!t.endAt.before):null,r=t.startAt?new oi(t.startAt.position,!t.startAt.before):null;t.S=Gs(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function Ti(e,t,n){return new di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Si(e,t){return Ws(bi(e),bi(t))&&e.limitType===t.limitType}function Ei(e){return`${Ks(bi(e))}|lt:${e.limitType}`}function Ii(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ps(t.value)}`;var t}).join(", ")}]`),Is(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+ai(e.startAt)),e.endAt&&(t+=", endAt: "+ai(e.endAt)),`Target(${t})`}(bi(e))}; limitType=${e.limitType})`}function Ci(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):As.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!ci(e.startAt,wi(e),t)||e.endAt&&ci(e.endAt,wi(e),t))}(e,t)}function ki(e){return(t,n)=>{let r=!1;for(const s of wi(e)){const e=Ai(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Ai(e,t,n){const r=e.field.isKeyField()?As.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Os(r,s):Br()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Br()}}function xi(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cs(t)?"-0":t}}function Ni(e){return{integerValue:""+e}}function Ri(e,t){return ks(t)?Ni(t):xi(e,t)}class Oi{constructor(){this._=void 0}}function Di(e,t,n){return e instanceof Fi?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mi?Ui(e,t):e instanceof ji?Vi(e,t):function(e,t){const n=Li(e,t),r=zi(n)+zi(e.C);return Ms(n)&&Ms(e.C)?Ni(r):xi(e.N,r)}(e,t)}function Pi(e,t,n){return e instanceof Mi?Ui(e,t):e instanceof ji?Vi(e,t):n}function Li(e,t){return e instanceof qi?Ms(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Fi extends Oi{}class Mi extends Oi{constructor(e){super(),this.elements=e}}function Ui(e,t){const n=Bi(t);for(const r of e.elements)n.some(e=>Ns(e,r))||n.push(r);return{arrayValue:{values:n}}}class ji extends Oi{constructor(e){super(),this.elements=e}}function Vi(e,t){let n=Bi(t);for(const r of e.elements)n=n.filter(e=>!Ns(e,r));return{arrayValue:{values:n}}}class qi extends Oi{constructor(e,t){super(),this.N=e,this.C=t}}function zi(e){return ws(e.integerValue||e.doubleValue)}function Bi(e){return Us(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $i{constructor(e,t){this.field=e,this.transform=t}}class Hi{constructor(e,t){this.version=e,this.transformResults=t}}class Zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gi(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ki{}function Wi(e,t,n){e instanceof eo?function(e,t,n){const r=e.value.clone(),s=ro(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof to?function(e,t,n){if(!Gi(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ro(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(no(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qi(e,t,n){e instanceof eo?function(e,t,n){if(!Gi(e.precondition,t))return;const r=e.value.clone(),s=so(e.fieldTransforms,n,t);r.setAll(s),t.convertToFoundDocument(Xi(t),r).setHasLocalMutations()}(e,t,n):e instanceof to?function(e,t,n){if(!Gi(e.precondition,t))return;const r=so(e.fieldTransforms,n,t),s=t.data;s.setAll(no(e)),s.setAll(r),t.convertToFoundDocument(Xi(t),s).setHasLocalMutations()}(e,t,n):function(e,t){Gi(e.precondition,t)&&t.convertToNoDocument(us.min())}(e,t)}function Yi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Li(r.transform,e||null);null!=s&&(null==n&&(n=Bs.empty()),n.set(r.field,s))}return n||null}function Ji(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&is(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mi&&t instanceof Mi||e instanceof ji&&t instanceof ji?is(e.elements,t.elements,Ns):e instanceof qi&&t instanceof qi?Ns(e.C,t.C):e instanceof Fi&&t instanceof Fi}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Xi(e){return e.isFoundDocument()?e.version:us.min()}class eo extends Ki{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class to extends Ki{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}}function no(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ro(e,t,n){const r=new Map;$r(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Pi(o,a,n[s]))}return r}function so(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Di(e,i,t))}return r}class io extends Ki{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class oo extends Ki{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ao{constructor(e){this.count=e}}var uo,lo;function co(e){switch(e){case Zr.OK:return Br();case Zr.CANCELLED:case Zr.UNKNOWN:case Zr.DEADLINE_EXCEEDED:case Zr.RESOURCE_EXHAUSTED:case Zr.INTERNAL:case Zr.UNAVAILABLE:case Zr.UNAUTHENTICATED:return!1;case Zr.INVALID_ARGUMENT:case Zr.NOT_FOUND:case Zr.ALREADY_EXISTS:case Zr.PERMISSION_DENIED:case Zr.FAILED_PRECONDITION:case Zr.ABORTED:case Zr.OUT_OF_RANGE:case Zr.UNIMPLEMENTED:case Zr.DATA_LOSS:return!0;default:return Br()}}function ho(e){if(void 0===e)return Vr("GRPC error has no .code"),Zr.UNKNOWN;switch(e){case uo.OK:return Zr.OK;case uo.CANCELLED:return Zr.CANCELLED;case uo.UNKNOWN:return Zr.UNKNOWN;case uo.DEADLINE_EXCEEDED:return Zr.DEADLINE_EXCEEDED;case uo.RESOURCE_EXHAUSTED:return Zr.RESOURCE_EXHAUSTED;case uo.INTERNAL:return Zr.INTERNAL;case uo.UNAVAILABLE:return Zr.UNAVAILABLE;case uo.UNAUTHENTICATED:return Zr.UNAUTHENTICATED;case uo.INVALID_ARGUMENT:return Zr.INVALID_ARGUMENT;case uo.NOT_FOUND:return Zr.NOT_FOUND;case uo.ALREADY_EXISTS:return Zr.ALREADY_EXISTS;case uo.PERMISSION_DENIED:return Zr.PERMISSION_DENIED;case uo.FAILED_PRECONDITION:return Zr.FAILED_PRECONDITION;case uo.ABORTED:return Zr.ABORTED;case uo.OUT_OF_RANGE:return Zr.OUT_OF_RANGE;case uo.UNIMPLEMENTED:return Zr.UNIMPLEMENTED;case uo.DATA_LOSS:return Zr.DATA_LOSS;default:return Br()}}(lo=uo||(uo={}))[lo.OK=0]="OK",lo[lo.CANCELLED=1]="CANCELLED",lo[lo.UNKNOWN=2]="UNKNOWN",lo[lo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lo[lo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lo[lo.NOT_FOUND=5]="NOT_FOUND",lo[lo.ALREADY_EXISTS=6]="ALREADY_EXISTS",lo[lo.PERMISSION_DENIED=7]="PERMISSION_DENIED",lo[lo.UNAUTHENTICATED=16]="UNAUTHENTICATED",lo[lo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lo[lo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lo[lo.ABORTED=10]="ABORTED",lo[lo.OUT_OF_RANGE=11]="OUT_OF_RANGE",lo[lo.UNIMPLEMENTED=12]="UNIMPLEMENTED",lo[lo.INTERNAL=13]="INTERNAL",lo[lo.UNAVAILABLE=14]="UNAVAILABLE",lo[lo.DATA_LOSS=15]="DATA_LOSS";class fo{constructor(e,t){this.comparator=e,this.root=t||mo.EMPTY}insert(e,t){return new fo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(e){return new fo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new po(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new po(this.root,e,this.comparator,!1)}getReverseIterator(){return new po(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new po(this.root,e,this.comparator,!0)}}class po{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mo{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:mo.RED,this.left=null!=r?r:mo.EMPTY,this.right=null!=s?s:mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new mo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Br();if(this.right.isRed())throw Br();const e=this.left.check();if(e!==this.right.check())throw Br();return e+(this.isRed()?0:1)}}mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1,mo.EMPTY=new class{constructor(){this.size=0}get key(){throw Br()}get value(){throw Br()}get color(){throw Br()}get left(){throw Br()}get right(){throw Br()}copy(e,t,n,r,s){return this}insert(e,t,n){return new mo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class go{constructor(e){this.comparator=e,this.data=new fo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yo(this.data.getIterator())}getIteratorFrom(e){return new yo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof go))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new go(this.comparator);return t.data=e,t}}class yo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const vo=new fo(As.comparator);function _o(){return vo}const wo=new fo(As.comparator);function bo(){return wo}const To=new fo(As.comparator);function So(){return To}const Eo=new go(As.comparator);function Io(...e){let t=Eo;for(const n of e)t=t.add(n);return t}const Co=new go(ss);function ko(){return Co}class Ao{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ao(us.min(),n,ko(),_o(),Io())}}class xo{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xo(ys.EMPTY_BYTE_STRING,t,Io(),Io(),Io())}}class No{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class Ro{constructor(e,t){this.targetId=e,this.O=t}}class Oo{constructor(e,t,n=ys.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Do{constructor(){this.F=0,this.M=Fo(),this.L=ys.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Io(),t=Io(),n=Io();return this.M.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Br()}}),new xo(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=Fo()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Po{constructor(e){this.tt=e,this.et=new Map,this.nt=_o(),this.st=Lo(),this.it=new go(ss)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:Br()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Qs(e))if(0===n){const n=new As(e.path);this.at(t,n,Hs.newNoDocument(n,us.min()))}else $r(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const s=this.dt(r);if(s){if(n.current&&Qs(s.target)){const t=new As(s.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,Hs.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=Io();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new Ao(e,t,this.it,this.nt,n);return this.nt=_o(),this.st=Lo(),this.it=new go(ss),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Do,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new go(ss),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||jr("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new Do),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Lo(){return new fo(As.comparator)}function Fo(){return new fo(As.comparator)}const Mo={asc:"ASCENDING",desc:"DESCENDING"},Uo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class jo{constructor(e,t){this.databaseId=e,this.D=t}}function Vo(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qo(e,t){return e.D?t.toBase64():t.toUint8Array()}function zo(e,t){return Vo(e,t.toTimestamp())}function Bo(e){return $r(!!e),us.fromTimestamp(function(e){const t=_s(e);return new as(t.seconds,t.nanos)}(e))}function $o(e,t){return function(e){return new fs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ho(e){const t=fs.fromString(e);return $r(ma(t)),t}function Zo(e,t){return $o(e.databaseId,t.path)}function Go(e,t){const n=Ho(t);if(n.get(1)!==e.databaseId.projectId)throw new Gr(Zr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gr(Zr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new As(Yo(n))}function Ko(e,t){return $o(e.databaseId,t)}function Wo(e){const t=Ho(e);return 4===t.length?fs.emptyPath():Yo(t)}function Qo(e){return new fs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yo(e){return $r(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jo(e,t,n){return{name:Zo(e,t),fields:n.value.mapValue.fields}}function Xo(e,t,n){const r=Go(e,t.name),s=Bo(t.updateTime),i=new Bs({mapValue:{fields:t.fields}}),o=Hs.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ea(e,t){let n;if(t instanceof eo)n={update:Jo(e,t.key,t.value)};else if(t instanceof io)n={delete:Zo(e,t.key)};else if(t instanceof to)n={update:Jo(e,t.key,t.data),updateMask:pa(t.fieldMask)};else{if(!(t instanceof oo))return Br();n={verify:Zo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Fi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ji)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qi)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Br()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:zo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Br()}(e,t.precondition)),n}function ta(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Zi.updateTime(Bo(e.updateTime)):void 0!==e.exists?Zi.exists(e.exists):Zi.none()}(t.currentDocument):Zi.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?($r("REQUEST_TIME"===t.setToServerValue),n=new Fi):"appendMissingElements"in t?n=new Mi(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new ji(t.removeAllFromArray.values||[]):"increment"in t?n=new qi(e,t.increment):Br();const r=ms.fromServerFormat(t.fieldPath);return new $i(r,n)}(e,t)):[];if(t.update){const s=Go(e,t.update.name),i=new Bs({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new gs((e.fieldPaths||[]).map(e=>ms.fromServerFormat(e)))}(t.updateMask);return new to(s,i,e,n,r)}return new eo(s,i,n,r)}if(t.delete){const r=Go(e,t.delete);return new io(r,n)}if(t.verify){const r=Go(e,t.verify);return new oo(r,n)}return Br()}function na(e,t){return{documents:[Ko(e,t.path)]}}function ra(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ko(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ko(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Vs(e.value))return{unaryFilter:{field:ca(e.field),op:"IS_NAN"}};if(js(e.value))return{unaryFilter:{field:ca(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vs(e.value))return{unaryFilter:{field:ca(e.field),op:"IS_NOT_NAN"}};if(js(e.value))return{unaryFilter:{field:ca(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(e.field),op:la(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ca(e.field),direction:ua(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(e,t){return e.D||Is(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=oa(t.startAt)),t.endAt&&(n.structuredQuery.endAt=oa(t.endAt)),n}function sa(e){let t=Wo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){$r(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=ia(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new ui(ha(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Is(t)?null:t}(n.limit));let u=null;n.startAt&&(u=aa(n.startAt));let l=null;return n.endAt&&(l=aa(n.endAt)),fi(t,s,o,i,a,"F",u,l)}function ia(e){return e?void 0!==e.unaryFilter?[fa(e)]:void 0!==e.fieldFilter?[da(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>ia(e)).reduce((e,t)=>e.concat(t)):Br():[]}function oa(e){return{before:e.before,values:e.position}}function aa(e){return new oi(e.values||[],!!e.before)}function ua(e){return Mo[e]}function la(e){return Uo[e]}function ca(e){return{fieldPath:e.canonicalString()}}function ha(e){return ms.fromServerFormat(e.fieldPath)}function da(e){return Ys.create(ha(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Br()}}(e.fieldFilter.op),e.fieldFilter.value)}function fa(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ha(e.unaryFilter.field);return Ys.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ha(e.unaryFilter.field);return Ys.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ha(e.unaryFilter.field);return Ys.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ha(e.unaryFilter.field);return Ys.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Br()}}function pa(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ma(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ga(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=va(t)),t=ya(e.get(n),t);return va(t)}function ya(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function va(e){return e+"\x01\x01"}function _a(e){const t=e.length;if($r(t>=2),2===t)return $r("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fs.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&Br(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:Br()}i=t+2}return new fs(r)}class wa{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ba{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}ba.store="owner",ba.key="owner";class Ta{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}Ta.store="mutationQueues",Ta.keyPath="userId";class Sa{constructor(e,t,n,r,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=s}}Sa.store="mutations",Sa.keyPath="batchId",Sa.userMutationsIndex="userMutationsIndex",Sa.userMutationsKeyPath=["userId","batchId"];class Ea{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ga(t)]}static key(e,t,n){return[e,ga(t),n]}}Ea.store="documentMutations",Ea.PLACEHOLDER=new Ea;class Ia{constructor(e,t){this.path=e,this.readTime=t}}class Ca{constructor(e,t){this.path=e,this.version=t}}class ka{constructor(e,t,n,r,s,i){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=s,this.parentPath=i}}ka.store="remoteDocuments",ka.readTimeIndex="readTimeIndex",ka.readTimeIndexPath="readTime",ka.collectionReadTimeIndex="collectionReadTimeIndex",ka.collectionReadTimeIndexPath=["parentPath","readTime"];class Aa{constructor(e){this.byteSize=e}}Aa.store="remoteDocumentGlobal",Aa.key="remoteDocumentGlobalKey";class xa{constructor(e,t,n,r,s,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=i,this.query=o}}xa.store="targets",xa.keyPath="targetId",xa.queryTargetsIndexName="queryTargetsIndex",xa.queryTargetsKeyPath=["canonicalId","targetId"];class Na{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Na.store="targetDocuments",Na.keyPath=["targetId","path"],Na.documentTargetsIndex="documentTargetsIndex",Na.documentTargetsKeyPath=["path","targetId"];class Ra{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Ra.key="targetGlobalKey",Ra.store="targetGlobal";class Oa{constructor(e,t){this.collectionId=e,this.parent=t}}Oa.store="collectionParents",Oa.keyPath=["collectionId","parent"];class Da{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Da.store="clientMetadata",Da.keyPath="clientId";class Pa{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Pa.store="bundles",Pa.keyPath="bundleId";class La{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}La.store="namedQueries",La.keyPath="name";const Fa=[Ta.store,Sa.store,Ea.store,ka.store,xa.store,ba.store,Ra.store,Na.store,Da.store,Aa.store,Oa.store,Pa.store,La.store],Ma="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ua{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ja{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Br(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ja((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ja?t:ja.resolve(t)}catch(e){return ja.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ja.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ja.reject(t)}static resolve(e){return new ja((t,n)=>{t(e)})}static reject(e){return new ja((t,n)=>{n(e)})}static waitFor(e){return new ja((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=ja.resolve(!1);for(const n of e)t=t.next(e=>e?ja.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Va{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new Kr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new Ba(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=Ka(t.target.error);this.Tt.reject(new Ba(e,n))}}static open(e,t,n,r){try{return new Va(t,e.transaction(r,n))}catch(e){throw new Ba(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(jr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Ha(t)}}class qa{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===qa.Rt((0,C.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return jr("SimpleDb","Removing database:",e),Za(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if(qa.Pt())return!0;const e=(0,C.z$)(),t=qa.Rt(e),n=0<t&&t<10,r=qa.vt(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,T.Z)(function*(){return t.db||(jr("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=e=>{n(e.target.result)},s.onblocked=()=>{r(new Ba(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Gr(Zr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Gr(Zr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Ba(e,n))},s.onupgradeneeded=e=>{jr("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,s.transaction,e.oldVersion,t.version).next(()=>{jr("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var s=this;return(0,T.Z)(function*(){const i="readonly"===t;let o=0;for(;;){++o;try{s.db=yield s.Dt(e);const t=Va.open(s.db,e,i?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),ja.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(jr("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),s.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class za{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Za(this.kt.delete())}}class Ba extends Gr{constructor(e,t){super(Zr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $a(e){return"IndexedDbTransactionError"===e.name}class Ha{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(jr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Za(n)}add(e){return jr("SimpleDb","ADD",this.store.name,e,e),Za(this.store.add(e))}get(e){return Za(this.store.get(e)).next(t=>(void 0===t&&(t=null),jr("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return jr("SimpleDb","DELETE",this.store.name,e),Za(this.store.delete(e))}count(){return jr("SimpleDb","COUNT",this.store.name),Za(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){jr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new ja((n,r)=>{t.onerror=e=>{const t=Ka(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new ja((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new za(s),o=t(s.primaryKey,s.value,i);if(o instanceof ja){const e=o.catch(e=>(i.done(),ja.reject(e)));n.push(e)}i.isDone?r():null===i.Ft?s.continue():s.continue(i.Ft)}}).next(()=>ja.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Za(e){return new ja((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Ka(e.target.error);n(t)}})}let Ga=!1;function Ka(e){const t=qa.Rt((0,C.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Gr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ga||(Ga=!0,setTimeout(()=>{throw e},0)),e}}return e}class Wa extends Ua{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Qa(e,t){const n=Hr(e);return qa.St(n.Qt,t)}class Ya{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Wi(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Qi(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Qi(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(us.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Io())}isEqual(e){return this.batchId===e.batchId&&is(this.mutations,e.mutations,(e,t)=>Ji(e,t))&&is(this.baseMutations,e.baseMutations,(e,t)=>Ji(e,t))}}class Ja{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){$r(e.mutations.length===n.length);let r=So();const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ja(e,t,n,r)}}class Xa{constructor(e,t,n,r,s=us.min(),i=us.min(),o=ys.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o}withSequenceNumber(e){return new Xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eu{constructor(e){this.Wt=e}}function tu(e,t){if(t.document)return Xo(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=As.fromSegments(t.noDocument.path),n=ou(t.noDocument.readTime),r=Hs.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=As.fromSegments(t.unknownDocument.path),n=ou(t.unknownDocument.version);return Hs.newUnknownDocument(e,n)}return Br()}function nu(e,t,n){const r=ru(n),s=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Zo(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Vo(e,t.version.toTimestamp())}}(e.Wt,t);return new ka(null,null,n,t.hasCommittedMutations,r,s)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=iu(t.version),i=t.hasCommittedMutations;return new ka(null,new Ia(e,n),null,i,r,s)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=iu(t.version);return new ka(new Ca(e,n),null,null,!0,r,s)}return Br()}function ru(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function su(e){const t=new as(e[0],e[1]);return us.fromTimestamp(t)}function iu(e){const t=e.toTimestamp();return new wa(t.seconds,t.nanoseconds)}function ou(e){const t=new as(e.seconds,e.nanoseconds);return us.fromTimestamp(t)}function au(e,t){const n=(t.baseMutations||[]).map(t=>ta(e.Wt,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform&&(e.updateTransforms=t.mutations[i+1].transform.fieldTransforms,t.mutations.splice(i+1,1),++i)}const r=t.mutations.map(t=>ta(e.Wt,t)),s=as.fromMillis(t.localWriteTimeMs);return new Ya(t.batchId,s,n,r)}function uu(e){const t=ou(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ou(e.lastLimboFreeSnapshotVersion):us.min();let r;var s;return void 0!==e.query.documents?($r(1===(s=e.query).documents.length),r=bi(pi(Wo(s.documents[0])))):r=function(e){return bi(sa(e))}(e.query),new Xa(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ys.fromBase64String(e.resumeToken))}function lu(e,t){const n=iu(t.snapshotVersion),r=iu(t.lastLimboFreeSnapshotVersion);let s;s=Qs(t.target)?na(e.Wt,t.target):ra(e.Wt,t.target);const i=t.resumeToken.toBase64();return new xa(t.targetId,Ks(t.target),n,i,t.sequenceNumber,r,s)}function cu(e){const t=sa({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ti(t,t.limit,"L"):t}class hu{getBundleMetadata(e,t){return du(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:ou(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return du(e).put({bundleId:(n=t).id,createTime:iu(Bo(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return fu(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:cu(t.bundledQuery),readTime:ou(t.readTime)};var t})}saveNamedQuery(e,t){return fu(e).put(function(e){return{name:e.name,readTime:iu(Bo(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function du(e){return Qa(e,Pa.store)}function fu(e){return Qa(e,La.store)}class pu{constructor(){this.Gt=new mu}addToCollectionParentIndex(e,t){return this.Gt.add(t),ja.resolve()}getCollectionParents(e,t){return ja.resolve(this.Gt.getEntries(t))}}class mu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new go(fs.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new go(fs.comparator)).toArray()}}class gu{constructor(){this.zt=new mu}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const s={collectionId:n,parent:ga(r)};return yu(e).put(s)}return ja.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[os(t),""],!1,!0);return yu(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(_a(r.parent))}return n})}}function yu(e){return Qa(e,Oa.store)}const vu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _u{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new _u(e,_u.DEFAULT_COLLECTION_PERCENTILE,_u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wu(e,t,n){const r=e.store(Sa.store),s=e.store(Ea.store),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));i.push(u.next(()=>{$r(1===a)}));const l=[];for(const c of n.mutations){const e=Ea.key(t,c.key.path,n.batchId);i.push(s.delete(e)),l.push(c.key)}return ja.waitFor(i).next(()=>l)}function bu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Br();t=e.noDocument}return JSON.stringify(t).length}_u.DEFAULT_COLLECTION_PERCENTILE=10,_u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_u.DEFAULT=new _u(41943040,_u.DEFAULT_COLLECTION_PERCENTILE,_u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_u.DISABLED=new _u(-1,0,0);class Tu{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){$r(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Tu(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Eu(e).Kt({index:Sa.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=Iu(e),i=Eu(e);return i.add({}).next(o=>{$r("number"==typeof o);const a=new Ya(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>ea(e.Wt,t)),s=n.mutations.map(t=>ea(e.Wt,t));return new Sa(t,n.batchId,n.localWriteTime.toMillis(),r,s)}(this.N,this.userId,a),l=[];let c=new go((e,t)=>ss(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Ea.key(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),l.push(i.put(u)),l.push(s.put(t,Ea.PLACEHOLDER))}return c.forEach(t=>{l.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),ja.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return Eu(e).get(t).next(e=>e?($r(e.userId===this.userId),au(this.N,e)):null)}Xt(e,t){return this.Jt[t]?ja.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Eu(e).Kt({index:Sa.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&($r(t.batchId>=n),s=au(this.N,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Eu(e).Kt({index:Sa.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Eu(e).Lt(Sa.userMutationsIndex,t).next(e=>e.map(e=>au(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ea.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Iu(e).Kt({range:r},(n,r,i)=>{const[o,a,u]=n,l=_a(a);if(o===this.userId&&t.path.isEqual(l))return Eu(e).get(u).next(e=>{if(!e)throw Br();$r(e.userId===this.userId),s.push(au(this.N,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new go(ss);const r=[];return t.forEach(t=>{const s=Ea.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=Iu(e).Kt({range:i},(e,r,s)=>{const[i,o,a]=e,u=_a(o);i===this.userId&&t.path.isEqual(u)?n=n.add(a):s.done()});r.push(o)}),ja.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Ea.prefixForPath(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new go(ss);return Iu(e).Kt({range:i},(e,t,s)=>{const[i,a,u]=e,l=_a(a);i===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(u)):s.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Eu(e).get(t).next(e=>{if(null===e)throw Br();$r(e.userId===this.userId),n.push(au(this.N,e))}))}),ja.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return wu(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),ja.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ja.resolve();const n=IDBKeyRange.lowerBound(Ea.prefixForUser(this.userId)),r=[];return Iu(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=_a(e[1]);r.push(t)}else n.done()}).next(()=>{$r(0===r.length)})})}containsKey(e,t){return Su(e,this.userId,t)}ee(e){return Cu(e).get(this.userId).next(e=>e||new Ta(this.userId,-1,""))}}function Su(e,t,n){const r=Ea.prefixForPath(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Iu(e).Kt({range:i,qt:!0},(e,n,r)=>{const[i,a,u]=e;i===t&&a===s&&(o=!0),r.done()}).next(()=>o)}function Eu(e){return Qa(e,Sa.store)}function Iu(e){return Qa(e,Ea.store)}function Cu(e){return Qa(e,Ta.store)}class ku{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new ku(0)}static ie(){return new ku(-1)}}class Au{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new ku(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>us.fromTimestamp(new as(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xu(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>($r(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return xu(e).Kt((i,o)=>{const a=uu(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))}).next(()=>ja.waitFor(s)).next(()=>r)}forEachTarget(e,t){return xu(e).Kt((e,n)=>{const r=uu(n);t(r)})}re(e){return Nu(e).get(Ra.key).next(e=>($r(null!==e),e))}oe(e,t){return Nu(e).put(Ra.key,t)}ae(e,t){return xu(e).put(lu(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Ks(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return xu(e).Kt({range:r,index:xa.queryTargetsIndexName},(e,n,r)=>{const i=uu(n);Ws(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Ru(e);return t.forEach(t=>{const i=ga(t.path);r.push(s.put(new Na(n,i))),r.push(this.referenceDelegate.addReference(e,n,t))}),ja.waitFor(r)}removeMatchingKeys(e,t,n){const r=Ru(e);return ja.forEach(t,t=>{const s=ga(t.path);return ja.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Ru(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ru(e);let s=Io();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=_a(e[1]),i=new As(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=ga(t.path),r=IDBKeyRange.bound([n],[os(n)],!1,!0);let s=0;return Ru(e).Kt({index:Na.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(s++,r.done())}).next(()=>s>0)}Et(e,t){return xu(e).get(t).next(e=>e?uu(e):null)}}function xu(e){return Qa(e,xa.store)}function Nu(e){return Qa(e,Ra.store)}function Ru(e){return Qa(e,Na.store)}function Ou(e){return Du.apply(this,arguments)}function Du(){return(Du=(0,T.Z)(function*(e){if(e.code!==Zr.FAILED_PRECONDITION||e.message!==Ma)throw e;jr("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Pu([e,t],[n,r]){const s=ss(e,n);return 0===s?ss(t,r):s}class Lu{constructor(e){this.ue=e,this.buffer=new go(Pu),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Pu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fu{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;jr("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,T.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){$a(e)?jr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Ou(e)}yield t._e(e)}))}}class Mu{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ja.resolve(ts.T);const n=new Lu(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(jr("LruGarbageCollector","Garbage collection skipped; disabled"),ja.resolve(vu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(jr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vu):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,s,i,o,a,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(jr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),Ur()<=I.in.DEBUG&&jr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-l}ms\n\tDetermined least recently used ${r} in `+(o-i)+"ms\n"+`\tRemoved ${s} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-l}ms`),ja.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}class Uu{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Mu(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,(e,n)=>t(n))}addReference(e,t,n){return ju(e,n)}removeReference(e,t,n){return ju(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ju(e,t)}Ie(e,t){return function(e,t){let n=!1;return Cu(e).jt(r=>Su(e,r,t).next(e=>(e&&(n=!0),ja.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Te(e,(i,o)=>{if(o<=t){const t=this.Ie(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i),Ru(e).delete([0,ga(i.path)])))});r.push(t)}}).next(()=>ja.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ju(e,t)}Te(e,t){const n=Ru(e);let r,s=ts.T;return n.Kt({index:Na.documentTargetsIndex},([e,n],{path:i,sequenceNumber:o})=>{0===e?(s!==ts.T&&t(new As(_a(r)),s),s=o,r=i):s=ts.T}).next(()=>{s!==ts.T&&t(new As(_a(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ju(e,t){return Ru(e).put(function(e,t){return new Na(0,ga(e.path),t)}(t,e.currentSequenceNumber))}class Vu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){cs(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return hs(this.inner)}}class qu{constructor(){this.changes=new Vu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:us.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Hs.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ja.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zu{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Hu(e).put(Zu(t),n)}removeEntry(e,t){const n=Hu(e),r=Zu(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return Hu(e).get(Zu(t)).next(e=>this.Re(t,e))}be(e,t){return Hu(e).get(Zu(t)).next(e=>({document:this.Re(t,e),size:bu(e)}))}getEntries(e,t){let n=_o();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=_o(),r=new fo(As.comparator);return this.Pe(e,t,(e,t)=>{const s=this.Re(e,t);n=n.insert(e,s),r=r.insert(e,bu(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return ja.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),s=t.getIterator();let i=s.getNext();return Hu(e).Kt({range:r},(e,t,r)=>{const o=As.fromSegments(e);for(;i&&As.comparator(i,o)<0;)n(i,null),i=s.getNext();i&&i.isEqual(o)&&(n(i,t),i=s.hasNext()?s.getNext():null),i?r.Mt(i.path.toArray()):r.done()}).next(()=>{for(;i;)n(i,null),i=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=_o();const s=t.path.length+1,i={};if(n.isEqual(us.min())){const e=t.path.toArray();i.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=ru(n);i.range=IDBKeyRange.lowerBound([e,r],!0),i.index=ka.collectionReadTimeIndex}return Hu(e).Kt(i,(e,n,i)=>{if(e.length!==s)return;const o=tu(this.N,n);t.path.isPrefixOf(o.key.path)?Ci(t,o)&&(r=r.insert(o.key,o)):i.done()}).next(()=>r)}newChangeBuffer(e){return new Bu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return $u(e).get(Aa.key).next(e=>($r(!!e),e))}Ae(e,t){return $u(e).put(Aa.key,t)}Re(e,t){if(t){const e=tu(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(us.min()))return e}return Hs.newInvalidDocument(e)}}class Bu extends qu{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Vu(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new go((e,t)=>ss(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.De.get(s);if(i.document.isValidDocument()){const a=nu(this.Se.N,i.document,this.getReadTime(s));r=r.add(s.path.popLast());const u=bu(a);n+=u-o,t.push(this.Se.addEntry(e,s,a))}else if(n-=o,this.trackRemovals){const n=nu(this.Se.N,Hs.newNoDocument(s,us.min()),this.getReadTime(s));t.push(this.Se.addEntry(e,s,n))}else t.push(this.Se.removeEntry(e,s))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),ja.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function $u(e){return Qa(e,Aa.store)}function Hu(e){return Qa(e,ka.store)}function Zu(e){return e.path.toArray()}class Gu{constructor(e){this.N=e}Ct(e,t,n,r){$r(n<r&&n>=0&&r<=11);const s=new Va("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ba.store)}(e),function(e){e.createObjectStore(Ta.store,{keyPath:Ta.keyPath}),e.createObjectStore(Sa.store,{keyPath:Sa.keyPath,autoIncrement:!0}).createIndex(Sa.userMutationsIndex,Sa.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Ea.store)}(e),Ku(e),function(e){e.createObjectStore(ka.store)}(e));let i=ja.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Na.store),e.deleteObjectStore(xa.store),e.deleteObjectStore(Ra.store)}(e),Ku(e)),i=i.next(()=>function(e){const t=e.store(Ra.store),n=new Ra(0,0,us.min().toTimestamp(),0);return t.put(Ra.key,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(Sa.store).Lt().next(n=>{e.deleteObjectStore(Sa.store),e.createObjectStore(Sa.store,{keyPath:Sa.keyPath,autoIncrement:!0}).createIndex(Sa.userMutationsIndex,Sa.userMutationsKeyPath,{unique:!0});const r=t.store(Sa.store),s=n.map(e=>r.put(e));return ja.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(Da.store,{keyPath:Da.keyPath})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.Ce(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(Aa.store)}(e),this.Ne(s)))),n<7&&r>=7&&(i=i.next(()=>this.xe(s))),n<8&&r>=8&&(i=i.next(()=>this.ke(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(ka.store);t.createIndex(ka.readTimeIndex,ka.readTimeIndexPath,{unique:!1}),t.createIndex(ka.collectionReadTimeIndex,ka.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(i=i.next(()=>this.$e(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(Pa.store,{keyPath:Pa.keyPath})}(e),function(e){e.createObjectStore(La.store,{keyPath:La.keyPath})}(e)})),i}Ne(e){let t=0;return e.store(ka.store).Kt((e,n)=>{t+=bu(n)}).next(()=>{const n=new Aa(t);return e.store(Aa.store).put(Aa.key,n)})}Ce(e){const t=e.store(Ta.store),n=e.store(Sa.store);return t.Lt().next(t=>ja.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(Sa.userMutationsIndex,r).next(n=>ja.forEach(n,n=>{$r(n.userId===t.userId);const r=au(this.N,n);return wu(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(Na.store),n=e.store(ka.store);return e.store(Ra.store).get(Ra.key).next(e=>{const r=[];return n.Kt((n,s)=>{const i=new fs(n),o=function(e){return[0,ga(e)]}(i);r.push(t.get(o).next(n=>n?ja.resolve():(n=>t.put(new Na(0,ga(n),e.highestListenSequenceNumber)))(i)))}).next(()=>ja.waitFor(r))})}ke(e,t){e.createObjectStore(Oa.store,{keyPath:Oa.keyPath});const n=t.store(Oa.store),r=new mu,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:ga(r)})}};return t.store(ka.store).Kt({qt:!0},(e,t)=>{const n=new fs(e);return s(n.popLast())}).next(()=>t.store(Ea.store).Kt({qt:!0},([e,t,n],r)=>{const i=_a(t);return s(i.popLast())}))}$e(e){const t=e.store(xa.store);return t.Kt((e,n)=>{const r=uu(n),s=lu(this.N,r);return t.put(s)})}}function Ku(e){e.createObjectStore(Na.store,{keyPath:Na.keyPath}).createIndex(Na.documentTargetsIndex,Na.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(xa.store,{keyPath:xa.keyPath}).createIndex(xa.queryTargetsIndexName,xa.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ra.store)}const Wu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qu{constructor(e,t,n,r,s,i,o,a,u,l){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=s,this.window=i,this.document=o,this.Fe=u,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Qu.bt())throw new Gr(Zr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uu(this,r),this.We=t+"main",this.N=new eu(a),this.Ge=new qa(this.We,11,new Gu(this.N)),this.ze=new Au(this.referenceDelegate,this.N),this.Ht=new gu,this.He=function(e,t){return new zu(e,t)}(this.N,this.Ht),this.Je=new hu,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Gr(Zr.FAILED_PRECONDITION,Wu);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ts(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,T.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,T.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,T.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ju(e).put(new Da(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if($a(e))return jr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return jr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Yu(e).get(ba.key).next(e=>ja.resolve(this.cn(e)))}un(e){return Ju(e).delete(this.clientId)}hn(){var e=this;return(0,T.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Qa(t,Da.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),s=t.filter(e=>-1===r.indexOf(e));return ja.forEach(s,e=>n.delete(e.clientId)).next(()=>s)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?ja.resolve(!0):Yu(e).get(ba.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Gr(Zr.FAILED_PRECONDITION,Wu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ju(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&jr("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,T.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[ba.store,Da.store],t=>{const n=new Wa(t,ts.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Ju(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return Tu.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return jr("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",Fa,s=>(r=new Wa(s,this.Le?this.Le.next():ts.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Gr(Zr.FAILED_PRECONDITION,Ma);return n(r)}).next(e=>this.an(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return Yu(e).get(ba.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Gr(Zr.FAILED_PRECONDITION,Wu)})}an(e){const t=new ba(this.clientId,this.allowTabSynchronization,Date.now());return Yu(e).put(ba.key,t)}static bt(){return qa.bt()}on(e){const t=Yu(e);return t.get(ba.key).next(e=>this.cn(e)?(jr("IndexedDbPersistence","Releasing primary lease."),t.delete(ba.key)):ja.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(Vr(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,C.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return jr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Vr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yu(e){return Qa(e,ba.store)}function Ju(e){return Qa(e,Da.store)}function Xu(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class el{constructor(e,t){this.progress=e,this.Tn=t}}class tl{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return As.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):_i(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new As(t)).next(e=>{let t=bo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let s=bo();return this.Ht.getCollectionParents(e,r).next(i=>ja.forEach(i,i=>{const o=function(e,t){return new di(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}Dn(e,t,n){let r,s;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(s=t,this.Cn(e,s,r).next(e=>{r=e;for(const t of s)for(const e of t.mutations){const n=e.key;let s=r.get(n);null==s&&(s=Hs.newInvalidDocument(n),r=r.insert(n,s)),Qi(e,s,t.localWriteTime),s.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{Ci(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=Io();for(const i of t)for(const e of i.mutations)e instanceof to&&null===n.get(e.key)&&(r=r.add(e.key));let s=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(s=s.insert(e,t))}),s))}}class nl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=Io(),r=Io();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new nl(e,t.fromCache,n,r)}}class rl{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(us.min())?this.Fn(e,t):this.On.Pn(e,r).next(s=>{const i=this.Mn(t,s);return(mi(t)||gi(t))&&this.Ln(t.limitType,i,r,n)?this.Fn(e,t):(Ur()<=I.in.DEBUG&&jr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ii(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(i.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new go(ki(e));return t.forEach((t,r)=>{Ci(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Fn(e,t){return Ur()<=I.in.DEBUG&&jr("QueryEngine","Using full collection scan to execute query:",Ii(t)),this.On.getDocumentsMatchingQuery(e,t,us.min())}}class sl{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new fo(ss),this.qn=new Vu(e=>Ks(e),Ws),this.Kn=us.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new tl(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function il(e,t,n,r){return new sl(e,t,n,r)}function ol(e,t){return al.apply(this,arguments)}function al(){return(al=(0,T.Z)(function*(e,t){const n=Hr(e);let r=n.In,s=n.Qn;const i=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.In.getAllMutationBatches(e).next(o=>(i=o,r=n.persistence.getMutationQueue(t),s=new tl(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=Io();for(const e of i){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return s.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=s,n.Bn.$n(n.Qn),i})).apply(this,arguments)}function ul(e,t){const n=Hr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=ja.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);$r(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function ll(e){const t=Hr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function cl(e,t){const n=Hr(e),r=t.snapshotVersion;let s=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.jn.newChangeBuffer({trackRemovals:!0});s=n.Un;const o=[];t.targetChanges.forEach((t,i)=>{const a=s.get(i);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,i).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,i)));const u=t.resumeToken;if(u.approximateByteSize()>0){const l=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);s=s.insert(i,l),function(e,t,n){return $r(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,l,t)&&o.push(n.ze.updateTargetData(e,l))}});let a=_o();if(t.documentUpdates.forEach((r,s)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(hl(e,i,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(us.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return ja.waitFor(o).next(()=>i.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=s,e))}function hl(e,t,n,r,s){let i=Io();return n.forEach(e=>i=i.add(e)),t.getEntries(e,i).next(e=>{let i=_o();return n.forEach((n,o)=>{const a=e.get(n),u=(null==s?void 0:s.get(n))||r;o.isNoDocument()&&o.version.isEqual(us.min())?(t.removeEntry(n,u),i=i.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,u),i=i.insert(n,o)):jr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),i})}function dl(e,t){const n=Hr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function fl(e,t){const n=Hr(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(s=>s?(r=s,ja.resolve(r)):n.ze.allocateTargetId(e).next(s=>(r=new Xa(t,s,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function pl(e,t,n){return ml.apply(this,arguments)}function ml(){return(ml=(0,T.Z)(function*(e,t,n){const r=Hr(e),s=r.Un.get(t),i=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!$a(e))throw e;jr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(s.target)})).apply(this,arguments)}function gl(e,t,n){const r=Hr(e);let s=us.min(),i=Io();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Hr(e),s=r.qn.get(n);return void 0!==s?ja.resolve(r.Un.get(s)):r.ze.getTargetData(t,n)}(r,e,bi(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?s:us.min(),n?i:Io())).next(e=>({documents:e,Gn:i})))}function yl(e,t){const n=Hr(e),r=Hr(n.ze),s=n.Un.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function vl(e){const t=Hr(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Hr(e);let s=_o(),i=ru(n);const o=Hu(t),a=IDBKeyRange.lowerBound(i,!0);return o.Kt({index:ka.readTimeIndex,range:a},(e,t)=>{const n=tu(r.N,t);s=s.insert(n.key,n),i=t.readTime}).next(()=>({Tn:s,readTime:su(i)}))}(t.jn,e,t.Kn)).then(({Tn:e,readTime:n})=>(t.Kn=n,e))}function _l(){return(_l=(0,T.Z)(function*(e){const t=Hr(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Hu(e);let n=us.min();return t.Kt({index:ka.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=su(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function wl(){return(wl=(0,T.Z)(function*(e,t,n,r){const s=Hr(e);let i=Io(),o=_o(),a=So();for(const c of n){const e=t.zn(c.metadata.name);c.document&&(i=i.add(e)),o=o.insert(e,t.Hn(c)),a=a.insert(e,t.Jn(c.metadata.readTime))}const u=s.jn.newChangeBuffer({trackRemovals:!0}),l=yield fl(s,function(e){return bi(pi(fs.fromString(`__bundle__/docs/${e}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",e=>hl(e,u,o,us.min(),a).next(t=>(u.apply(e),t)).next(t=>s.ze.removeMatchingKeysForTargetId(e,l.targetId).next(()=>s.ze.addMatchingKeys(e,i,l.targetId)).next(()=>s.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function bl(e,t){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,T.Z)(function*(e,t,n=Io()){const r=yield fl(e,bi(cu(t.bundledQuery))),s=Hr(e);return s.persistence.runTransaction("Save named query","readwrite",e=>{const i=Bo(t.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Je.saveNamedQuery(e,t);const o=r.withResumeToken(ys.EMPTY_BYTE_STRING,i);return s.Un=s.Un.insert(o.targetId,o),s.ze.updateTargetData(e,o).next(()=>s.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>s.ze.addMatchingKeys(e,n,r.targetId)).next(()=>s.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class Sl{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return ja.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:Bo(n.createTime)}),ja.resolve()}getNamedQuery(e,t){return ja.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:cu(e.bundledQuery),readTime:Bo(e.readTime)}}(t)),ja.resolve()}}class El{constructor(){this.Zn=new go(Il.ts),this.es=new go(Il.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Il(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new Il(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new As(new fs([])),n=new Il(t,e),r=new Il(t,e+1),s=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),s.push(e.key)}),s}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new As(new fs([])),n=new Il(t,e),r=new Il(t,e+1);let s=Io();return this.es.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Il(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Il{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return As.comparator(e.key,t.key)||ss(e.ls,t.ls)}static ns(e,t){return ss(e.ls,t.ls)||As.comparator(e.key,t.key)}}class Cl{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new go(Il.ts)}checkEmpty(e){return ja.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const s=this.fs;this.fs++;const i=new Ya(s,t,n,r);this.In.push(i);for(const o of r)this.ds=this.ds.add(new Il(o.key,s)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return ja.resolve(i)}lookupMutationBatch(e,t){return ja.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return ja.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return ja.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return ja.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Il(t,0),r=new Il(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);s.push(t)}),ja.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new go(ss);return t.forEach(e=>{const t=new Il(e,0),r=new Il(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),ja.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;As.isDocumentKey(s)||(s=s.child(""));const i=new Il(new As(s),0);let o=new go(ss);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},i),ja.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){$r(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return ja.forEach(t.mutations,r=>{const s=new Il(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new Il(t,0),r=this.ds.firstAfterOrEqual(n);return ja.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ja.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class kl{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new fo(As.comparator),this.size=0}addEntry(e,t,n){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-i,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ja.resolve(n?n.document.clone():Hs.newInvalidDocument(t))}getEntries(e,t){let n=_o();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Hs.newInvalidDocument(e))}),ja.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=_o();const s=new As(t.path.child("")),i=this.docs.getIteratorFrom(s);for(;i.hasNext();){const{key:e,value:{document:s,readTime:o}}=i.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Ci(t,s)&&(r=r.insert(s.key,s.clone()))}return ja.resolve(r)}Es(e,t){return ja.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Al(this)}getSize(e){return ja.resolve(this.size)}}class Al extends qu{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),ja.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class xl{constructor(e){this.persistence=e,this.Ts=new Vu(e=>Ks(e),Ws),this.lastRemoteSnapshotVersion=us.min(),this.highestTargetId=0,this.Is=0,this.As=new El,this.targetCount=0,this.Rs=ku.se()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),ja.resolve()}getLastRemoteSnapshotVersion(e){return ja.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ja.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ja.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),ja.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ku(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,ja.resolve()}updateTargetData(e,t){return this.ae(t),ja.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,ja.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Ts.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),ja.waitFor(s).next(()=>r)}getTargetCount(e){return ja.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return ja.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),ja.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),ja.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),ja.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return ja.resolve(n)}containsKey(e,t){return ja.resolve(this.As.containsKey(t))}}class Nl{constructor(e,t){this.bs={},this.Le=new ts(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new xl(this),this.Ht=new pu,this.He=function(e,t){return new kl(e,t)}(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new eu(t),this.Je=new Sl(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Cl(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){jr("MemoryPersistence","Starting transaction:",e);const r=new Rl(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return ja.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class Rl extends Ua{constructor(e){super(),this.currentSequenceNumber=e}}class Ol{constructor(e){this.persistence=e,this.Ds=new El,this.Cs=null}static Ns(e){return new Ol(e)}get xs(){if(this.Cs)return this.Cs;throw Br()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),ja.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),ja.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),ja.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ja.forEach(this.xs,n=>{const r=As.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return ja.or([()=>ja.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function Dl(e,t){return`firestore_clients_${e}_${t}`}function Pl(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Ll(e,t){return`firestore_targets_${e}_${t}`}class Fl{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new Gr(r.error.code,r.error.message))),i?new Fl(e,t,r.state,s):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ml{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new Gr(n.error.code,n.error.message))),s?new Ml(e,n.state,r):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ul{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=ko();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=ks(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new Ul(e,s):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jl{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jl(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Vl{constructor(){this.activeTargetIds=ko()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ql{constructor(e,t,n,r,s){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new fo(ss),this.started=!1,this.Ks=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.js=Dl(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Vl),this.Ws=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,T.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(Dl(e.persistenceKey,r));if(t){const n=Ul.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ll(this.persistenceKey,e));if(n){const r=Ml.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ll(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return jr("SharedClientState","READ",e,t),t}setItem(e,t){jr("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){jr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(jr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,T.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=ts.T;if(null!=e)try{const n=JSON.parse(e);$r("number"==typeof n),t=n}catch(e){Vr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==ts.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new Fl(this.currentUser,e,t,n),s=Pl(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Os())}ni(e){const t=Pl(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=Ll(this.persistenceKey,e),s=new Ml(e,t,n);this.setItem(r,s.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return Ul.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return Fl.$s(new Lr(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return Ml.$s(r,t)}Xs(e){return jl.$s(e)}li(e){var t=this;return(0,T.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);jr("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),s=this.ti(n),i=[],o=[];return s.forEach(e=>{r.has(e)||i.push(e)}),r.forEach(e=>{s.has(e)||o.push(e)}),this.syncEngine.gi(i,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=ko();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class zl{constructor(){this.yi=new Vl,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Vl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Bl{Ei(e){}shutdown(){}}class $l{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){jr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){jr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Zl{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Gl extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const s=this.Bi(e,t);jr("RestConnection","Sending: ",s,n);const i={};return this.Ui(i,r),this.qi(e,s,i,n).then(e=>(jr("RestConnection","Received: ",e),e),t=>{throw qr("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Fr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${Hl[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((s,i)=>{const o=new Pr;o.listenOnce(Nr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case xr.NO_ERROR:const t=o.getResponseJson();jr("Connection","XHR received:",JSON.stringify(t)),s(t);break;case xr.TIMEOUT:jr("Connection",'RPC "'+e+'" timed out'),i(new Gr(Zr.DEADLINE_EXCEEDED,"Request time out"));break;case xr.HTTP_ERROR:const n=o.getStatus();if(jr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Zr).indexOf(t)>=0?t:Zr.UNKNOWN}(e.status);i(new Gr(t,e.message))}else i(new Gr(Zr.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Gr(Zr.UNAVAILABLE,"Connection failed."));break;default:Br()}}finally{jr("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new Er,s=yt(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(i.xmlHttpFactory=new Or({})),this.Ui(i.initMessageHeaders,t),(0,C.uI)()||(0,C.b$)()||(0,C.d)()||(0,C.w1)()||(0,C.Mn)()||(0,C.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");jr("Connection","Creating WebChannel: "+o,i);const a=r.createWebChannel(o,i);let u=!1,l=!1;const c=new Zl({vi:e=>{l?jr("Connection","Not sending because WebChannel is closed:",e):(u||(jr("Connection","Opening WebChannel transport."),a.open(),u=!0),jr("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return h(a,Dr.EventType.OPEN,()=>{l||jr("Connection","WebChannel transport opened.")}),h(a,Dr.EventType.CLOSE,()=>{l||(l=!0,jr("Connection","WebChannel transport closed"),c.$i())}),h(a,Dr.EventType.ERROR,e=>{l||(l=!0,qr("Connection","WebChannel transport errored:",e),c.$i(new Gr(Zr.UNAVAILABLE,"The operation could not be completed")))}),h(a,Dr.EventType.MESSAGE,e=>{var t;if(!l){const n=e.data[0];$r(!!n);const r=n,s=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(s){jr("Connection","WebChannel received error:",s);const e=s.status;let t=function(e){const t=uo[e];if(void 0!==t)return ho(t)}(e),n=s.message;void 0===t&&(t=Zr.INTERNAL,n="Unknown error status: "+e+" with message "+s.message),l=!0,c.$i(new Gr(t,n)),a.close()}else jr("Connection","WebChannel received:",n),c.Oi(n)}}),h(s,Rr.STAT_EVENT,e=>{10===e.stat?jr("Connection","Detected buffering proxy"):11===e.stat&&jr("Connection","Detected no buffering proxy")}),setTimeout(()=>{c.ki()},0),c}}function Kl(){return"undefined"!=typeof window?window:null}function Wl(){return"undefined"!=typeof document?document:null}function Ql(e){return new jo(e,!0)}class Yl{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=s,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&jr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Jl{constructor(e,t,n,r,s,i){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=s,this.listener=i,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Yl(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,T.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,T.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,T.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===Zr.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===Zr.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new Gr(Zr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,T.Z)(function*(){e.state=0,e.start()}))}pr(e){return jr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(jr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xl extends Jl{constructor(e,t,n,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,s),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Br()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.D?($r(void 0===t||"string"==typeof t),ys.fromBase64String(t||"")):($r(void 0===t||t instanceof Uint8Array),ys.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Zr.UNKNOWN:ho(e.code);return new Gr(t,e.message||"")}(o);n=new Oo(r,s,i,a||null)}else if("documentChange"in t){const r=t.documentChange,s=Go(e,r.document.name),i=Bo(r.document.updateTime),o=new Bs({mapValue:{fields:r.document.fields}}),a=Hs.newFoundDocument(s,i,o);n=new No(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,s=Go(e,r.document),i=r.readTime?Bo(r.readTime):us.min(),o=Hs.newNoDocument(s,i);n=new No([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,s=Go(e,r.document);n=new No([],r.removedTargetIds||[],s,null)}else{if(!("filter"in t))return Br();{const e=t.filter,r=new ao(e.count||0);n=new Ro(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return us.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?us.min():t.readTime?Bo(t.readTime):us.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Qo(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Qs(r)?{documents:na(e,r)}:{query:ra(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=qo(e,t.resumeToken):t.snapshotVersion.compareTo(us.min())>0&&(n.readTime=Vo(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Br()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Qo(this.N),t.removeTarget=e,this.wr(t)}}class ec extends Jl{constructor(e,t,n,r,s){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,s),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if($r(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?($r(void 0!==t),e.map(e=>function(e,t){let n=Bo(e.updateTime?e.updateTime:t);return n.isEqual(us.min())&&(n=Bo(t)),new Hi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Bo(e.commitTime);return this.listener.vr(n,t)}return $r(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Qo(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ea(this.N,e))};this.wr(t)}}class tc extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Gr(Zr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Gr(Zr.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Gr(Zr.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class nc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Vr(t),this.$r=!1):jr("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class rc{constructor(e,t,n,r,s){var i=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=s,this.Qr.Ei(e=>{n.enqueueAndForget((0,T.Z)(function*(){var e;pc(i)&&(jr("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,T.Z)(function*(e){const t=Hr(e);t.Kr.add(4),yield oc(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield sc(t)}),function(t){return e.apply(this,arguments)})(i))}))}),this.Wr=new nc(n,r)}}function sc(e){return ic.apply(this,arguments)}function ic(){return(ic=(0,T.Z)(function*(e){if(pc(e))for(const t of e.jr)yield t(!0)})).apply(this,arguments)}function oc(e){return ac.apply(this,arguments)}function ac(){return(ac=(0,T.Z)(function*(e){for(const t of e.jr)yield t(!1)})).apply(this,arguments)}function uc(e,t){const n=Hr(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),fc(n)?dc(n):qc(n).cr()&&cc(n,t))}function lc(e,t){const n=Hr(e),r=qc(n);n.qr.delete(t),r.cr()&&hc(n,t),0===n.qr.size&&(r.cr()?r.lr():pc(n)&&n.Wr.set("Unknown"))}function cc(e,t){e.Gr.Y(t.targetId),qc(e).Ir(t)}function hc(e,t){e.Gr.Y(t),qc(e).Ar(t)}function dc(e){e.Gr=new Po({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),qc(e).start(),e.Wr.Or()}function fc(e){return pc(e)&&!qc(e).ar()&&e.qr.size>0}function pc(e){return 0===Hr(e).Kr.size}function mc(e){e.Gr=void 0}function gc(e){return yc.apply(this,arguments)}function yc(){return(yc=(0,T.Z)(function*(e){e.qr.forEach((t,n)=>{cc(e,t)})})).apply(this,arguments)}function vc(e,t){return _c.apply(this,arguments)}function _c(){return(_c=(0,T.Z)(function*(e,t){mc(e),fc(e)?(e.Wr.Lr(t),dc(e)):e.Wr.set("Unknown")})).apply(this,arguments)}function wc(e,t,n){return bc.apply(this,arguments)}function bc(){return(bc=(0,T.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof Oo&&2===t.state&&t.cause)try{yield(r=(0,T.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){jr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Tc(e,n)}else if(t instanceof No?e.Gr.rt(t):t instanceof Ro?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(us.min()))try{const t=yield ll(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.qr.get(r);s&&e.qr.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(ys.EMPTY_BYTE_STRING,n.snapshotVersion)),hc(e,t);const r=new Xa(n.target,t,1,n.sequenceNumber);cc(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){jr("RemoteStore","Failed to raise snapshot:",t),yield Tc(e,t)}var r})).apply(this,arguments)}function Tc(e,t,n){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,T.Z)(function*(e,t,n){if(!$a(t))throw t;e.Kr.add(1),yield oc(e),e.Wr.set("Offline"),n||(n=()=>ll(e.localStore)),e.asyncQueue.enqueueRetryable((0,T.Z)(function*(){jr("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield sc(e)}))})).apply(this,arguments)}function Ec(e,t){return t().catch(n=>Tc(e,n,t))}function Ic(e){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,T.Z)(function*(e){const t=Hr(e),n=zc(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;kc(t);)try{const e=yield dl(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,Ac(t,e)}catch(e){yield Tc(t,e)}xc(t)&&Nc(t)})).apply(this,arguments)}function kc(e){return pc(e)&&e.Ur.length<10}function Ac(e,t){e.Ur.push(t);const n=zc(e);n.cr()&&n.br&&n.Pr(t.mutations)}function xc(e){return pc(e)&&!zc(e).ar()&&e.Ur.length>0}function Nc(e){zc(e).start()}function Rc(e){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,T.Z)(function*(e){zc(e).Sr()})).apply(this,arguments)}function Dc(e){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,T.Z)(function*(e){const t=zc(e);for(const n of e.Ur)t.Pr(n.mutations)})).apply(this,arguments)}function Lc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,T.Z)(function*(e,t,n){const r=e.Ur.shift(),s=Ja.from(r,t,n);yield Ec(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),yield Ic(e)})).apply(this,arguments)}function Mc(e,t){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,T.Z)(function*(e,t){var n;t&&zc(e).br&&(yield(n=(0,T.Z)(function*(e,t){if(co(n=t.code)&&n!==Zr.ABORTED){const n=e.Ur.shift();zc(e).hr(),yield Ec(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Ic(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),xc(e)&&Nc(e)})).apply(this,arguments)}function jc(e,t){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,T.Z)(function*(e,t){const n=Hr(e);t?(n.Kr.delete(2),yield sc(n)):t||(n.Kr.add(2),yield oc(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function qc(e){return e.zr||(e.zr=function(e,t,n){const r=Hr(e);return r.Cr(),new Xl(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:gc.bind(null,e),Ci:vc.bind(null,e),Tr:wc.bind(null,e)}),e.jr.push(function(){var t=(0,T.Z)(function*(t){t?(e.zr.hr(),fc(e)?dc(e):e.Wr.set("Unknown")):(yield e.zr.stop(),mc(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function zc(e){return e.Hr||(e.Hr=function(e,t,n){const r=Hr(e);return r.Cr(),new ec(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Rc.bind(null,e),Ci:Mc.bind(null,e),Vr:Dc.bind(null,e),vr:Lc.bind(null,e)}),e.jr.push(function(){var t=(0,T.Z)(function*(t){t?(e.Hr.hr(),yield Ic(e)):(yield e.Hr.stop(),e.Ur.length>0&&(jr("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class Bc{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Bc(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gr(Zr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $c(e,t){if(Vr("AsyncQueue",`${t}: ${e}`),$a(e))return new Gr(Zr.UNAVAILABLE,`${t}: ${e}`);throw e}class Hc{constructor(e){this.comparator=e?(t,n)=>e(t,n)||As.comparator(t.key,n.key):(e,t)=>As.comparator(e.key,t.key),this.keyedMap=bo(),this.sortedSet=new fo(this.comparator)}static emptySet(e){return new Hc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Hc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Zc{constructor(){this.Jr=new fo(As.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Br():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class Gc{constructor(e,t,n,r,s,i,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Gc(e,t,Hc.emptySet(t),s,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Si(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Kc{constructor(){this.Xr=void 0,this.listeners=[]}}class Wc{constructor(){this.queries=new Vu(e=>Ei(e),Si),this.onlineState="Unknown",this.Zr=new Set}}function Qc(e,t){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,T.Z)(function*(e,t){const n=Hr(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Kc),s)try{i.Xr=yield n.onListen(r)}catch(e){const n=$c(e,`Initialization of query '${Ii(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.eo(n.onlineState),i.Xr&&t.no(i.Xr)&&nh(n)})).apply(this,arguments)}function Jc(e,t){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,T.Z)(function*(e,t){const n=Hr(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function eh(e,t){const n=Hr(e);let r=!1;for(const s of t){const e=n.queries.get(s.query);if(e){for(const t of e.listeners)t.no(s)&&(r=!0);e.Xr=s}}r&&nh(n)}function th(e,t,n){const r=Hr(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function nh(e){e.Zr.forEach(e=>{e.next()})}class rh{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Gc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=Gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class sh{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class ih{constructor(e){this.N=e}zn(e){return Go(this.N,e)}Hn(e){return e.metadata.exists?Xo(this.N,e.document,!1):Hs.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Bo(e)}}class oh{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=ah(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new ih(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Io()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,T.Z)(function*(){const t=yield function(e,t,n,r){return wl.apply(this,arguments)}(e.localStore,new ih(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield bl(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new el(Object.assign({},e.progress),t)})()}}function ah(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class uh{constructor(e){this.key=e}}class lh{constructor(e){this.key=e}}class ch{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Io(),this.mutatedKeys=Io(),this.po=ki(e),this.Eo=new Hc(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new Zc,r=t?t.Eo:this.Eo;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a=mi(this.query)&&r.size===this.query.limit?r.last():null,u=gi(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),c=Ci(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ro(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.po(c,a)>0||u&&this.po(c,u)<0)&&(o=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(o=!0)),f&&(c?(i=i.add(c),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),mi(this.query)||gi(this.query))for(;i.size>this.query.limit;){const e=mi(this.query)?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Eo:i,Ao:n,Ln:o,mutatedKeys:s}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const s=e.Ao.Yr();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Br()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.bo(n);const i=t?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==s.length||a?{snapshot:new Gc(this.query,e.Eo,r,s,e.mutatedKeys,0===o,a,!1),vo:i}:{vo:i}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Zc,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Io(),this.Eo.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new lh(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new uh(n))}),t}So(e){this._o=e.Gn,this.yo=Io();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return Gc.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class hh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class dh{constructor(e){this.key=e,this.Co=!1}}class fh{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.No={},this.xo=new Vu(e=>Ei(e),Si),this.ko=new Map,this.$o=new Set,this.Oo=new fo(As.comparator),this.Fo=new Map,this.Mo=new El,this.Lo={},this.Bo=new Map,this.Uo=ku.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function ph(e,t){return mh.apply(this,arguments)}function mh(){return(mh=(0,T.Z)(function*(e,t){const n=sd(e);let r,s;const i=n.xo.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Do();else{const e=yield fl(n.localStore,bi(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=yield gh(n,t,r,"current"===i),n.isPrimaryClient&&uc(n.remoteStore,e)}return s})).apply(this,arguments)}function gh(e,t,n,r){return yh.apply(this,arguments)}function yh(){return(yh=(0,T.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(s=(0,T.Z)(function*(e,t,n,r){let s=t.view.Io(n);s.Ln&&(s=yield gl(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,s)));const i=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i);return Lh(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return s.apply(this,arguments)})(e,t,n,r);var s};const s=yield gl(e.localStore,t,!0),i=new ch(t,s.Gn),o=i.Io(s.documents),a=xo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=i.applyChanges(o,e.isPrimaryClient,a);Lh(e,n,u.vo);const l=new hh(t,n,i);return e.xo.set(t,l),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),u.snapshot})).apply(this,arguments)}function vh(e,t){return _h.apply(this,arguments)}function _h(){return(_h=(0,T.Z)(function*(e,t){const n=Hr(e),r=n.xo.get(t),s=n.ko.get(r.targetId);if(s.length>1)return n.ko.set(r.targetId,s.filter(e=>!Si(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield pl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),lc(n.remoteStore,r.targetId),Dh(n,r.targetId)}).catch(Ou))):(Dh(n,r.targetId),yield pl(n.localStore,r.targetId,!0))})).apply(this,arguments)}function wh(){return(wh=(0,T.Z)(function*(e,t,n){const r=id(e);try{const e=yield function(e,t){const n=Hr(e),r=as.now(),s=t.reduce((e,t)=>e.add(t.key),Io());let i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,s).next(s=>{i=s;const o=[];for(const e of t){const t=Yi(e,i.get(e.key));null!=t&&o.push(new to(e.key,t,$s(t.value.mapValue),Zi.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(i),{batchId:e.batchId,changes:i}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new fo(ss)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield Uh(r,e.changes),yield Ic(r.remoteStore)}catch(e){const t=$c(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function bh(e,t){return Th.apply(this,arguments)}function Th(){return(Th=(0,T.Z)(function*(e,t){const n=Hr(e);try{const e=yield cl(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&($r(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?$r(r.Co):e.removedDocuments.size>0&&($r(r.Co),r.Co=!1))}),yield Uh(n,e,t)}catch(e){yield Ou(e)}})).apply(this,arguments)}function Sh(e,t,n){const r=Hr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const s=r.view.eo(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Hr(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.eo(t)&&(r=!0)}),r&&nh(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Eh(e,t,n){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,T.Z)(function*(e,t,n){const r=Hr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Fo.get(t),i=s&&s.key;if(i){let e=new fo(As.comparator);e=e.insert(i,Hs.newNoDocument(i,us.min()));const n=Io().add(i),s=new Ao(us.min(),new Map,new go(ss),e,n);yield bh(r,s),r.Oo=r.Oo.remove(i),r.Fo.delete(t),Mh(r)}else yield pl(r.localStore,t,!1).then(()=>Dh(r,t,n)).catch(Ou)})).apply(this,arguments)}function Ch(e,t){return kh.apply(this,arguments)}function kh(){return(kh=(0,T.Z)(function*(e,t){const n=Hr(e),r=t.batch.batchId;try{const e=yield ul(n.localStore,t);Oh(n,r,null),Rh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Uh(n,e)}catch(e){yield Ou(e)}})).apply(this,arguments)}function Ah(e,t,n){return xh.apply(this,arguments)}function xh(){return(xh=(0,T.Z)(function*(e,t,n){const r=Hr(e);try{const e=yield function(e,t){const n=Hr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>($r(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);Oh(r,t,n),Rh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Uh(r,e)}catch(n){yield Ou(n)}})).apply(this,arguments)}function Nh(){return(Nh=(0,T.Z)(function*(e,t){const n=Hr(e);pc(n.remoteStore)||jr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Hr(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=$c(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function Rh(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function Oh(e,t,n){const r=Hr(e);let s=r.Lo[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Lo[r.currentUser.toKey()]=s}}function Dh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||Ph(e,t)})}function Ph(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(lc(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),Mh(e))}function Lh(e,t,n){for(const r of n)r instanceof uh?(e.Mo.addReference(r.key,t),Fh(e,r)):r instanceof lh?(jr("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||Ph(e,r.key)):Br()}function Fh(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(jr("SyncEngine","New document in limbo: "+n),e.$o.add(r),Mh(e))}function Mh(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new As(fs.fromString(t)),r=e.Uo.next();e.Fo.set(r,new dh(n)),e.Oo=e.Oo.insert(n,r),uc(e.remoteStore,new Xa(bi(pi(n.path)),r,2,ts.T))}}function Uh(e,t,n){return jh.apply(this,arguments)}function jh(){return(jh=(0,T.Z)(function*(e,t,n){const r=Hr(e),s=[],i=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),s.push(e);const t=nl.kn(a.targetId,e);i.push(t)}}))}),yield Promise.all(o),r.No.Tr(s),yield(a=(0,T.Z)(function*(e,t){const n=Hr(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ja.forEach(t,t=>ja.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ja.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!$a(e))throw e;jr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,i))})).apply(this,arguments)}function Vh(e,t){return qh.apply(this,arguments)}function qh(){return(qh=(0,T.Z)(function*(e,t){const n=Hr(e);if(!n.currentUser.isEqual(t)){jr("SyncEngine","User change. New user:",t.toKey());const e=yield ol(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach(e=>{e.forEach(e=>{e.reject(new Gr(Zr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Uh(n,e.Wn)}})).apply(this,arguments)}function zh(e,t){const n=Hr(e),r=n.Fo.get(t);if(r&&r.Co)return Io().add(r.key);{let e=Io();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function Bh(e,t){return $h.apply(this,arguments)}function $h(){return($h=(0,T.Z)(function*(e,t){const n=Hr(e),r=yield gl(n.localStore,t.query,!0),s=t.view.So(r);return n.isPrimaryClient&&Lh(n,t.targetId,s.vo),s})).apply(this,arguments)}function Hh(e){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,T.Z)(function*(e){const t=Hr(e);return vl(t.localStore).then(e=>Uh(t,e))})).apply(this,arguments)}function Gh(e,t,n,r){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,T.Z)(function*(e,t,n,r){const s=Hr(e),i=yield function(e,t){const n=Hr(e),r=Hr(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):ja.resolve(null)))}(s.localStore,t);null!==i?("pending"===n?yield Ic(s.remoteStore):"acknowledged"===n||"rejected"===n?(Oh(s,t,r||null),Rh(s,t),function(e,t){Hr(Hr(e).In).te(t)}(s.localStore,t)):Br(),yield Uh(s,i)):jr("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Wh(){return(Wh=(0,T.Z)(function*(e,t){const n=Hr(e);if(sd(n),id(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Qh(n,e.toArray());n.qo=!0,yield jc(n.remoteStore,!0);for(const r of t)uc(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then(()=>(Dh(n,s),pl(n.localStore,s,!0))),lc(n.remoteStore,s)}),yield t,yield Qh(n,e),function(e){const t=Hr(e);t.Fo.forEach((e,n)=>{lc(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new fo(As.comparator)}(n),n.qo=!1,yield jc(n.remoteStore,!1)}})).apply(this,arguments)}function Qh(e,t,n){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,T.Z)(function*(e,t,n){const r=Hr(e),s=[],i=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield fl(r.localStore,bi(t[0]));for(const e of t){const t=r.xo.get(e),n=yield Bh(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=yield yl(r.localStore,o);e=yield fl(r.localStore,t),yield gh(r,Jh(t),o,!1)}s.push(e)}return r.No.Tr(i),s})).apply(this,arguments)}function Jh(e){return fi(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Xh(e){const t=Hr(e);return Hr(Hr(t.localStore).persistence).pn()}function ed(e,t,n,r){return td.apply(this,arguments)}function td(){return(td=(0,T.Z)(function*(e,t,n,r){const s=Hr(e);if(s.qo)jr("SyncEngine","Ignoring unexpected query state notification.");else if(s.ko.has(t))switch(n){case"current":case"not-current":{const e=yield vl(s.localStore),r=Ao.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Uh(s,e,r);break}case"rejected":yield pl(s.localStore,t,!0),Dh(s,t,r);break;default:Br()}})).apply(this,arguments)}function nd(e,t,n){return rd.apply(this,arguments)}function rd(){return(rd=(0,T.Z)(function*(e,t,n){const r=sd(e);if(r.qo){for(const e of t){if(r.ko.has(e)){jr("SyncEngine","Adding an already active target "+e);continue}const t=yield yl(r.localStore,e),n=yield fl(r.localStore,t);yield gh(r,Jh(t),n.targetId,!1),uc(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield pl(r.localStore,e,!1).then(()=>{lc(r.remoteStore,e),Dh(r,e)}).catch(Ou))}})).apply(this,arguments)}function sd(e){const t=Hr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Eh.bind(null,t),t.No.Tr=eh.bind(null,t.eventManager),t.No.jo=th.bind(null,t.eventManager),t}function id(e){const t=Hr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ch.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ah.bind(null,t),t}class od{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,T.Z)(function*(){t.N=Ql(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return il(this.persistence,new rl,e.initialUser,this.N)}Go(e){return new Nl(Ol.Ns,this.N)}Wo(e){return new zl}terminate(){var e=this;return(0,T.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ad extends od{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,T.Z)(function*(){yield t().call(n,e),yield function(e){return _l.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield id(n.Jo.syncEngine),yield Ic(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return il(this.persistence,new rl,e.initialUser,this.N)}zo(e){return new Fu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=Xu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_u.withCacheSize(this.cacheSizeBytes):_u.DEFAULT;return new Qu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Kl(),Wl(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new zl}}class ud extends ad{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,T.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof ql&&(n.sharedClientState.syncEngine={_i:Gh.bind(null,r),mi:ed.bind(null,r),gi:nd.bind(null,r),pn:Xh.bind(null,r),wi:Hh.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,T.Z)(function*(e){yield function(e,t){return Wh.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=Kl();if(!ql.bt(t))throw new Gr(Zr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ql(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ld{initialize(e,t){var n=this;return(0,T.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Sh(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Vh.bind(null,n.syncEngine),yield jc(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Wc}createDatastore(e){const t=Ql(e.databaseInfo.databaseId),n=new Gl(e.databaseInfo);return function(e,t,n){return new tc(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>Sh(this.syncEngine,e,0),i=$l.bt()?new $l:new Bl,new rc(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new fh(e,t,n,r,s,i);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,T.Z)(function*(e){const t=Hr(e);jr("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield oc(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cd(e,t=10240){let n=0;return{read:()=>(0,T.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,T.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class dd{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Kr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,T.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,T.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,T.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const s=yield e.ia(r);return new sh(JSON.parse(s),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,T.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,T.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,T.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class fd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,T.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Gr(Zr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,T.Z)(function*(e,t){const n=Hr(e),r=Qo(n.N)+"/documents",s={documents:t.map(e=>Zo(n.N,e))},i=yield n.Ki("BatchGetDocuments",r,s),o=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){$r(!!t.found);const n=Go(e,t.found.name),r=Bo(t.found.updateTime),s=new Bs({mapValue:{fields:t.found.fields}});return Hs.newFoundDocument(n,r,s)}(e,t):"missing"in t?function(e,t){$r(!!t.missing),$r(!!t.readTime);const n=Go(e,t.missing),r=Bo(t.readTime);return Hs.newNoDocument(n,r)}(e,t):Br()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());$r(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new io(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,T.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=As.fromPath(n);e.mutations.push(new oo(r,e.precondition(r)))}),yield(n=(0,T.Z)(function*(e,t){const n=Hr(e),r=Qo(n.N)+"/documents",s={writes:t.map(e=>ea(n.N,e))};yield n.Li("Commit",r,s)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Br();t=us.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Gr(Zr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zi.updateTime(t):Zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(us.min()))throw new Gr(Zr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zi.updateTime(t)}return Zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pd{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Yl(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,T.Z)(function*(){const t=new fd(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!Is(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!co(t)}return!1}}class md{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Lr.UNAUTHENTICATED,this.clientId=rs.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,T.Z)(function*(e){jr("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,T.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Gr(Zr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,T.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=$c(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function gd(e,t){return yd.apply(this,arguments)}function yd(){return(yd=(0,T.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),jr("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,T.Z)(function*(e){r.isEqual(e)||(yield ol(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function vd(e,t){return _d.apply(this,arguments)}function _d(){return(_d=(0,T.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield wd(e);jr("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,T.Z)(function*(e,t){const n=Hr(e);n.asyncQueue.verifyOperationInProgress(),jr("RemoteStore","RemoteStore received new credentials");const r=pc(n);n.Kr.add(3),yield oc(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield sc(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function wd(e){return bd.apply(this,arguments)}function bd(){return(bd=(0,T.Z)(function*(e){return e.offlineComponents||(jr("FirestoreClient","Using default OfflineComponentProvider"),yield gd(e,new od)),e.offlineComponents})).apply(this,arguments)}function Td(e){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,T.Z)(function*(e){return e.onlineComponents||(jr("FirestoreClient","Using default OnlineComponentProvider"),yield vd(e,new ld)),e.onlineComponents})).apply(this,arguments)}function Ed(e){return wd(e).then(e=>e.persistence)}function Id(e){return wd(e).then(e=>e.localStore)}function Cd(e){return Td(e).then(e=>e.remoteStore)}function kd(e){return Td(e).then(e=>e.syncEngine)}function Ad(e){return xd.apply(this,arguments)}function xd(){return(xd=(0,T.Z)(function*(e){const t=yield Td(e),n=t.eventManager;return n.onListen=ph.bind(null,t.syncEngine),n.onUnlisten=vh.bind(null,t.syncEngine),n})).apply(this,arguments)}function Nd(e,t,n={}){const r=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(e,t,n,r,s){const i=new hd({next:i=>{t.enqueueAndForget(()=>Jc(e,o));const a=i.docs.has(n);!a&&i.fromCache?s.reject(new Gr(Zr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&r&&"server"===r.source?s.reject(new Gr(Zr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(i)},error:e=>s.reject(e)}),o=new rh(pi(n.path),i,{includeMetadataChanges:!0,uo:!0});return Qc(e,o)}(yield Ad(e),e.asyncQueue,t,n,r)})),r.promise}function Rd(e,t,n={}){const r=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(e,t,n,r,s){const i=new hd({next:n=>{t.enqueueAndForget(()=>Jc(e,o)),n.fromCache&&"server"===r.source?s.reject(new Gr(Zr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new rh(n,i,{includeMetadataChanges:!0,uo:!0});return Qc(e,o)}(yield Ad(e),e.asyncQueue,t,n,r)})),r.promise}class Od{constructor(e,t,n,r,s,i,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Dd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Dd&&e.projectId===this.projectId&&e.database===this.database}}const Pd=new Map;function Ld(e,t,n){if(!n)throw new Gr(Zr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Fd(e,t,n,r){if(!0===t&&!0===r)throw new Gr(Zr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Md(e){if(!As.isDocumentKey(e))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ud(e){if(As.isDocumentKey(e))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Br()}function Vd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gr(Zr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jd(e);throw new Gr(Zr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function qd(e,t){if(t<=0)throw new Gr(Zr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class zd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Gr(Zr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Gr(Zr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bd{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zd({}),this._settingsFrozen=!1,e instanceof Dd?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gr(Zr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dd(e.options.projectId)}(e))}get app(){if(!this._app)throw new Gr(Zr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Gr(Zr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zd(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Qr;switch(e.type){case"gapi":const t=e.client;return $r(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new es(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Gr(Zr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Pd.get(e);t&&(jr("ComponentProvider","Removing Datastore"),Pd.delete(e),t.terminate())}(this),Promise.resolve()}}class $d{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $d(this.firestore,e,this._key)}}class Hd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hd(this.firestore,e,this._query)}}class Zd extends Hd{constructor(e,t,n){super(e,t,pi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $d(this.firestore,null,new As(e))}withConverter(e){return new Zd(this.firestore,e,this._path)}}function Gd(e,t,...n){if(e=(0,C.m9)(e),Ld("collection","path",t),e instanceof Bd){const r=fs.fromString(t,...n);return Ud(r),new Zd(e,null,r)}{if(!(e instanceof $d||e instanceof Zd))throw new Gr(Zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fs.fromString(t,...n));return Ud(r),new Zd(e.firestore,null,r)}}function Kd(e,t,...n){if(e=(0,C.m9)(e),1===arguments.length&&(t=rs.I()),Ld("doc","path",t),e instanceof Bd){const r=fs.fromString(t,...n);return Md(r),new $d(e,null,new As(r))}{if(!(e instanceof $d||e instanceof Zd))throw new Gr(Zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fs.fromString(t,...n));return Md(r),new $d(e.firestore,e instanceof Zd?e.converter:null,new As(r))}}function Wd(e,t){return e=(0,C.m9)(e),t=(0,C.m9)(t),(e instanceof $d||e instanceof Zd)&&(t instanceof $d||t instanceof Zd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qd(e,t){return e=(0,C.m9)(e),t=(0,C.m9)(t),e instanceof Hd&&t instanceof Hd&&e.firestore===t.firestore&&Si(e._query,t._query)&&e.converter===t.converter}class Yd{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Yl(this,"async_queue_retry"),this.Ea=()=>{const e=Wl();e&&jr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=Wl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Wl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise(()=>{});const t=new Kr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,T.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!$a(t))throw t;jr("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=Bc.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ta(){this.ma&&Br()}verifyOperationInProgress(){}ba(){var e=this;return(0,T.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Jd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Xd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ef extends Bd{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Yd,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||nf(this),this._firestoreClient.terminate()}}function tf(e){return e._firestoreClient||nf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function nf(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Od(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new md(e._credentials,e._queue,r)}function rf(e,t,n){const r=new Kr;return e.asyncQueue.enqueue((0,T.Z)(function*(){try{yield gd(e,n),yield vd(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Zr.FAILED_PRECONDITION||e.code===Zr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function sf(e){if(e._initialized||e._terminated)throw new Gr(Zr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class of{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Gr(Zr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class af{constructor(e){this._byteString=e}static fromBase64String(e){try{return new af(ys.fromBase64String(e))}catch(e){throw new Gr(Zr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new af(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uf{constructor(e){this._methodName=e}}class lf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Gr(Zr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Gr(Zr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ss(this._lat,e._lat)||ss(this._long,e._long)}}const cf=/^__.*__$/;class hf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new eo(e,this.data,t,this.fieldTransforms)}}class df{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new to(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ff(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Br()}}class pf{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Sa(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new pf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Pf(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(ff(this.Da)&&cf.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class mf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Ql(e)}Ba(e,t,n,r=!1){return new pf({Da:e,methodName:t,La:n,path:ms.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function gf(e){const t=e._freezeSettings(),n=Ql(e._databaseId);return new mf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yf(e,t,n,r,s,i={}){const o=e.Ba(i.merge||i.mergeFields?2:0,t,n,s);Nf("Data must be an object, but it was:",o,r);const a=Af(r,o);let u,l;if(i.merge)u=new gs(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Rf(t,r,n);if(!o.contains(s))throw new Gr(Zr.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Lf(e,s)||e.push(s)}u=new gs(e),l=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,l=o.fieldTransforms;return new hf(new Bs(a),u,l)}class vf extends uf{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function _f(e,t,n){return new pf({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class wf extends uf{_toFieldTransform(e){return new $i(e.path,new Fi)}isEqual(e){return e instanceof wf}}class bf extends uf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=_f(this,e,!0),n=this.Ua.map(e=>kf(e,t)),r=new Mi(n);return new $i(e.path,r)}isEqual(e){return this===e}}class Tf extends uf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=_f(this,e,!0),n=this.Ua.map(e=>kf(e,t)),r=new ji(n);return new $i(e.path,r)}isEqual(e){return this===e}}class Sf extends uf{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new qi(e.N,Ri(e.N,this.qa));return new $i(e.path,t)}isEqual(e){return this===e}}function Ef(e,t,n,r){const s=e.Ba(1,t,n);Nf("Data must be an object, but it was:",s,r);const i=[],o=Bs.empty();cs(r,(e,r)=>{const a=Df(t,e,n);r=(0,C.m9)(r);const u=s.$a(a);if(r instanceof vf)i.push(a);else{const e=kf(r,u);null!=e&&(i.push(a),o.set(a,e))}});const a=new gs(i);return new df(o,a,s.fieldTransforms)}function If(e,t,n,r,s,i){const o=e.Ba(1,t,n),a=[Rf(t,r,n)],u=[s];if(i.length%2!=0)throw new Gr(Zr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(Rf(t,i[d])),u.push(i[d+1]);const l=[],c=Bs.empty();for(let d=a.length-1;d>=0;--d)if(!Lf(l,a[d])){const e=a[d];let t=u[d];t=(0,C.m9)(t);const n=o.$a(e);if(t instanceof vf)l.push(e);else{const r=kf(t,n);null!=r&&(l.push(e),c.set(e,r))}}const h=new gs(l);return new df(c,h,o.fieldTransforms)}function Cf(e,t,n,r=!1){return kf(n,e.Ba(r?4:3,t))}function kf(e,t){if(xf(e=(0,C.m9)(e)))return Nf("Unsupported field value:",t,e),Af(e,t);if(e instanceof uf)return function(e,t){if(!ff(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=kf(s,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,C.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ri(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=as.fromDate(e);return{timestampValue:Vo(t.N,n)}}if(e instanceof as){const n=new as(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vo(t.N,n)}}if(e instanceof lf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof af)return{bytesValue:qo(t.N,e._byteString)};if(e instanceof $d){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$o(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${jd(e)}`)}(e,t)}function Af(e,t){const n={};return hs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cs(e,(e,r)=>{const s=kf(r,t.Na(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function xf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof as||e instanceof lf||e instanceof af||e instanceof $d||e instanceof uf)}function Nf(e,t,n){if(!xf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=jd(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}}function Rf(e,t,n){if((t=(0,C.m9)(t))instanceof of)return t._internalPath;if("string"==typeof t)return Df(e,t);throw Pf("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Of=new RegExp("[~\\*/\\[\\]]");function Df(e,t,n){if(t.search(Of)>=0)throw Pf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new of(...t.split("."))._internalPath}catch(r){throw Pf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pf(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Gr(Zr.INVALID_ARGUMENT,a+e+u)}function Lf(e,t){return e.some(e=>e.isEqual(t))}class Ff{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $d(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Uf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mf extends Ff{data(){return super.data()}}function Uf(e,t){return"string"==typeof t?Df(e,t):t instanceof of?t._internalPath:t._delegate._internalPath}class jf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vf extends Ff{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Uf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class qf extends Vf{data(e={}){return super.data(e)}}class zf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new jf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new qf(this._firestore,this._userDataWriter,n.key,n,new jf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Gr(Zr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new qf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new jf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new qf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new jf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Bf(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Br()}}function $f(e,t){return e instanceof Vf&&t instanceof Vf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof zf&&t instanceof zf&&e._firestore===t._firestore&&Qd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Hf(e){if(gi(e)&&0===e.explicitOrderBy.length)throw new Gr(Zr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zf{}function Gf(e,...t){for(const n of t)e=n._apply(e);return e}class Kf extends Zf{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=gf(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on FieldPath.documentId().`);if("in"===i||"not-in"===i){tp(o,i);const t=[];for(const n of o)t.push(ep(r,e,n));a={arrayValue:{values:t}}}else a=ep(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||tp(o,i),a=Cf(n,"where",o,"in"===i||"not-in"===i);const u=Ys.create(s,i,a);return function(e,t){if(t.v()){const n=vi(e);if(null!==n&&!n.isEqual(t.field))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=yi(e);null!==r&&np(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Gr(Zr.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Hd(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class Wf extends Zf{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Gr(Zr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Gr(Zr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ui(t,n);return function(e,t){if(null===yi(e)){const n=vi(e);null!==n&&np(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new Hd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new di(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Qf extends Zf{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new Hd(e.firestore,e.converter,Ti(e._query,this.Ga,this.za))}}class Yf extends Zf{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Xf(e,this.type,this.Ha,this.Ja);return new Hd(e.firestore,e.converter,function(e,t){return new di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Jf extends Zf{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Xf(e,this.type,this.Ha,this.Ja);return new Hd(e.firestore,e.converter,function(e,t){return new di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Xf(e,t,n,r){if(n[0]=(0,C.m9)(n[0]),n[0]instanceof Ff)return function(e,t,n,r,s){if(!r)throw new Gr(Zr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const i=[];for(const o of wi(e))if(o.field.isKeyField())i.push(Fs(t,r.key));else{const e=r.data.field(o.field);if(Ts(e))throw new Gr(Zr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}i.push(e)}return new oi(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=gf(e.firestore);return function(e,t,n,r,s,i){const o=e.explicitOrderBy;if(s.length>o.length)throw new Gr(Zr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<s.length;u++){const i=s[u];if(o[u].field.isKeyField()){if("string"!=typeof i)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof i}`);if(!_i(e)&&-1!==i.indexOf("/"))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${i}' contains a slash.`);const n=e.path.child(fs.fromString(i));if(!As.isDocumentKey(n))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new As(n);a.push(Fs(t,s))}else{const e=Cf(n,r,i);a.push(e)}}return new oi(a,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function ep(e,t,n){if("string"==typeof(n=(0,C.m9)(n))){if(""===n)throw new Gr(Zr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_i(t)&&-1!==n.indexOf("/"))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(fs.fromString(n));if(!As.isDocumentKey(r))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fs(e,new As(r))}if(n instanceof $d)return Fs(e,n._key);throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(n)}.`)}function tp(e,t){if(!Array.isArray(e)||0===e.length)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function np(e,t,n){if(!n.isEqual(t))throw new Gr(Zr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class rp{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ws(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Br()}}convertObject(e,t){const n={};return cs(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new lf(ws(e.latitude),ws(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ss(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Es(e));default:return null}}convertTimestamp(e){const t=_s(e);return new as(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=fs.fromString(e);$r(ma(n));const r=new Dd(n.get(1),n.get(3)),s=new As(n.popFirst(5));return r.isEqual(t)||Vr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function sp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ip extends rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new af(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $d(this.firestore,null,t)}}class op{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gf(e)}set(e,t,n){this._verifyNotCommitted();const r=ap(e,this._firestore),s=sp(r.converter,t,n),i=yf(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Zi.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const s=ap(e,this._firestore);let i;return i="string"==typeof(t=(0,C.m9)(t))||t instanceof of?If(this._dataReader,"WriteBatch.update",s._key,t,n,r):Ef(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(i.toMutation(s._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ap(e,this._firestore);return this._mutations=this._mutations.concat(new io(t._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gr(Zr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(e,t){if((e=(0,C.m9)(e)).firestore!==t)throw new Gr(Zr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class up extends rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new af(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $d(this.firestore,null,t)}}function lp(e,t,n){e=Vd(e,$d);const r=Vd(e.firestore,ef),s=sp(e.converter,t,n);return dp(r,[yf(gf(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Zi.none())])}function cp(e,t,n,...r){e=Vd(e,$d);const s=Vd(e.firestore,ef),i=gf(s);let o;return o="string"==typeof(t=(0,C.m9)(t))||t instanceof of?If(i,"updateDoc",e._key,t,n,r):Ef(i,"updateDoc",e._key,t),dp(s,[o.toMutation(e._key,Zi.exists(!0))])}function hp(e,...t){var n,r,s;e=(0,C.m9)(e);let i={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Jd(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Jd(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,l,c;if(e instanceof $d)l=Vd(e.firestore,ef),c=pi(e._key.path),u={next:n=>{t[o]&&t[o](fp(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Vd(e,Hd);l=Vd(n.firestore,ef),c=n._query;const r=new up(l);u={next:e=>{t[o]&&t[o](new zf(l,r,n,e))},error:t[o+1],complete:t[o+2]},Hf(e._query)}return function(e,t,n,r){const s=new hd(r),i=new rh(t,s,n);return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return Qc(yield Ad(e),i)})),()=>{s.Xo(),e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return Jc(yield Ad(e),i)}))}}(tf(l),c,a,u)}function dp(e,t){return function(e,t){const n=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(e,t,n){return wh.apply(this,arguments)}(yield kd(e),t,n)})),n.promise}(tf(e),t)}function fp(e,t,n){const r=n.docs.get(t._key),s=new up(e);return new Vf(e,s,t._key,r,new jf(n.hasPendingWrites,n.fromCache),t.converter)}class pp extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gf(e)}get(e){const t=ap(e,this._firestore),n=new ip(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Br();const r=e[0];if(r.isFoundDocument())return new Ff(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ff(this._firestore,n,t._key,null,t.converter);throw Br()})}set(e,t,n){const r=ap(e,this._firestore),s=sp(r.converter,t,n),i=yf(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n,...r){const s=ap(e,this._firestore);let i;return i="string"==typeof(t=(0,C.m9)(t))||t instanceof of?If(this._dataReader,"Transaction.update",s._key,t,n,r):Ef(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){const t=ap(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ap(e,this._firestore),n=new up(this._firestore);return super.get(e).then(e=>new Vf(this._firestore,n,t._key,e._document,new jf(!1,!1),t.converter))}}function mp(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Gr("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function gp(){if("undefined"==typeof Uint8Array)throw new Gr("unimplemented","Uint8Arrays are not available in this environment.")}function yp(){if("undefined"==typeof atob)throw new Gr("unimplemented","Blobs are unavailable in Firestore in this environment.")}Fr=S.SDK_VERSION,(0,S._registerComponent)(new E.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new ef(n,new Jr(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,S.registerVersion)("@firebase/firestore","3.0.2",void 0);class vp{constructor(e){this._delegate=e}static fromBase64String(e){return yp(),new vp(af.fromBase64String(e))}static fromUint8Array(e){return gp(),new vp(af.fromUint8Array(e))}toBase64(){return yp(),this._delegate.toBase64()}toUint8Array(){return gp(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _p(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class wp{enableIndexedDbPersistence(e,t){return function(e,t){sf(e=Vd(e,ef));const n=tf(e),r=e._freezeSettings(),s=new ld;return rf(n,s,new ad(s,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){sf(e=Vd(e,ef));const t=tf(e),n=e._freezeSettings(),r=new ld;return rf(t,r,new ud(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Gr(Zr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Kr;return e._queue.enqueueAndForgetEvenWhileRestricted((0,T.Z)(function*(){try{yield(n=(0,T.Z)(function*(e){if(!qa.bt())return Promise.resolve();const t=e+"main";yield qa.delete(t)}),function(e){return n.apply(this,arguments)})(Xu(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class bp{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Dd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||qr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var s;const i=(e=Vd(e,Bd))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&qr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Lr.MOCK_USER;else{t=(0,C.Sg)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Gr(Zr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Lr(i)}e._credentials=new Yr(new Wr(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return e.asyncQueue.enqueue((0,T.Z)(function*(){const t=yield Ed(e),n=yield Cd(e);return t.setNetworkEnabled(!0),function(e){const t=Hr(e);return t.Kr.delete(0),sc(t)}(n)}))}(tf(Vd(this._delegate,ef)))}disableNetwork(){return function(e){return e.asyncQueue.enqueue((0,T.Z)(function*(){const t=yield Ed(e),n=yield Cd(e);return t.setNetworkEnabled(!1),(r=(0,T.Z)(function*(e){const t=Hr(e);t.Kr.add(0),yield oc(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(tf(Vd(this._delegate,ef)))}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Fd("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){const t=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(e,t){return Nh.apply(this,arguments)}(yield kd(e),t)})),t.promise}(tf(Vd(this._delegate,ef)))}onSnapshotsInSync(e){return t=e,function(e,t){const n=new hd(t);return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(e,t){Hr(e).Zr.add(t),t.next()}(yield Ad(e),n)})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(e,t){Hr(e).Zr.delete(t)}(yield Ad(e),n)}))}}(tf(Vd(this._delegate,ef)),Jd(t)?t:{next:t});var t}get app(){if(!this._appCompat)throw new Gr("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lp(this,Gd(this._delegate,e))}catch(t){throw kp(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cp(this,Kd(this._delegate,e))}catch(t){throw kp(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Op(this,function(e,t){if(e=Vd(e,Bd),Ld("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Gr(Zr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hd(e,null,function(e){return new di(fs.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw kp(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return n=t=>e(new Sp(this,t)),function(e,t){const n=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){const r=yield function(e){return Td(e).then(e=>e.datastore)}(e);new pd(e.asyncQueue,r,t,n).run()})),n.promise}(tf(t=this._delegate),e=>n(new pp(t,e)));var t,n}batch(){return tf(this._delegate),new Ep(new op(this._delegate,e=>dp(this._delegate,e)))}loadBundle(e){return function(e,t){const n=tf(e=Vd(e,ef)),r=new Xd;return function(e,t,n,r){const s=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new dd(e,t)}(function(e,t){if(e instanceof Uint8Array)return cd(e,t);if(e instanceof ArrayBuffer)return cd(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ql(t));e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){!function(e,t,n){const r=Hr(e);var s;(s=(0,T.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Hr(e),r=Bo(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(ah(r));const s=new oh(r,e.localStore,t.N);let i=yield t.Qo();for(;i;){const e=yield s.fo(i);e&&n._updateProgress(e),i=yield t.Qo()}const o=yield s.complete();yield Uh(e,o.Tn,void 0),yield function(e,t){const n=Hr(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){qr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}}),function(e,t,n){return s.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield kd(e),s,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return(t=this._delegate,n=e,function(e,t){return e.asyncQueue.enqueue((0,T.Z)(function*(){return function(e,t){const n=Hr(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield Id(e),t)}))}(tf(t=Vd(t,ef)),n).then(e=>e?new Hd(t,null,e.query):null)).then(e=>e?new Op(this,e):null);var t,n}}class Tp extends rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new vp(new af(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Cp.forKey(t,this.firestore,null)}}class Sp{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tp(e)}get(e){const t=Fp(e);return this._delegate.get(t).then(e=>new Np(this._firestore,new Vf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=Fp(e);return n?(mp("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const s=Fp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...r),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}}class Ep{constructor(e){this._delegate=e}set(e,t,n){const r=Fp(e);return n?(mp("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const s=Fp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...r),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ip{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new qf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rp(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ip.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let s=r.get(t);return s||(s=new Ip(e,new Tp(e),t),r.set(t,s)),s}}Ip.INSTANCES=new WeakMap;class Cp{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tp(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Gr("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Cp(t,new $d(t._delegate,n,new As(e)))}static forKey(e,t,n){return new Cp(t,new $d(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Lp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lp(this.firestore,Gd(this._delegate,e))}catch(t){throw kp(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,C.m9)(e))instanceof $d&&Wd(this._delegate,e)}set(e,t){t=mp("DocumentReference.set",t);try{return t?lp(this._delegate,e,t):lp(this._delegate,e)}catch(n){throw kp(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?cp(this._delegate,e):cp(this._delegate,e,t,...n)}catch(r){throw kp(r,"updateDoc()","DocumentReference.update()")}}delete(){return dp(Vd((e=this._delegate).firestore,ef),[new io(e._key,Zi.none())]);var e}onSnapshot(...e){const t=Ap(e),n=xp(e,e=>new Np(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return hp(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Vd(e,$d);const t=Vd(e.firestore,ef),n=tf(t),r=new up(t);return function(e,t){const n=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return(r=(0,T.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Hr(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Gr(Zr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=$c(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Id(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Vf(t,r,e._key,n,new jf(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Vd(e,$d);const t=Vd(e.firestore,ef);return Nd(tf(t),e._key,{source:"server"}).then(n=>fp(t,e,n))}(this._delegate):function(e){e=Vd(e,$d);const t=Vd(e.firestore,ef);return Nd(tf(t),e._key).then(n=>fp(t,e,n))}(this._delegate),t.then(e=>new Np(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Cp(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function kp(e,t,n){return e.message=e.message.replace(t,n),e}function Ap(e){for(const t of e)if("object"==typeof t&&!_p(t))return t;return{}}function xp(e,t){var n,r;let s;return s=_p(e[0])?e[0]:_p(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{s.next&&s.next(t(e))},error:null===(n=s.error)||void 0===n?void 0:n.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Np{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cp(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $f(this._delegate,e._delegate)}}class Rp extends Np{data(e){const t=this._delegate.data(e);return void 0!==t||Br(),t}}class Op{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tp(e)}where(e,t,n){try{return new Op(this.firestore,Gf(this._delegate,function(e,t,n){const r=t,s=Uf("where",e);return new Kf(s,r,n)}(e,t,n)))}catch(r){throw kp(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Op(this.firestore,Gf(this._delegate,function(e,t="asc"){const n=t,r=Uf("orderBy",e);return new Wf(r,n)}(e,t)))}catch(n){throw kp(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Op(this.firestore,Gf(this._delegate,(qd("limit",t=e),new Qf("limit",t,"F"))))}catch(n){throw kp(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Op(this.firestore,Gf(this._delegate,(qd("limitToLast",t=e),new Qf("limitToLast",t,"L"))))}catch(n){throw kp(n,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new Op(this.firestore,Gf(this._delegate,function(...e){return new Yf("startAt",e,!0)}(...e)))}catch(t){throw kp(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Op(this.firestore,Gf(this._delegate,function(...e){return new Yf("startAfter",e,!1)}(...e)))}catch(t){throw kp(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Op(this.firestore,Gf(this._delegate,function(...e){return new Jf("endBefore",e,!0)}(...e)))}catch(t){throw kp(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Op(this.firestore,Gf(this._delegate,function(...e){return new Jf("endAt",e,!1)}(...e)))}catch(t){throw kp(t,"endAt()","Query.endAt()")}}isEqual(e){return Qd(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Vd(e,Hd);const t=Vd(e.firestore,ef),n=tf(t),r=new up(t);return function(e,t){const n=new Kr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return(r=(0,T.Z)(function*(e,t,n){try{const r=yield gl(e,t,!0),s=new ch(t,r.Gn),i=s.Io(r.documents),o=s.applyChanges(i,!1);n.resolve(o.snapshot)}catch(e){const r=$c(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Id(e),t,n);var r})),n.promise}(n,e._query).then(n=>new zf(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Vd(e,Hd);const t=Vd(e.firestore,ef),n=tf(t),r=new up(t);return Rd(n,e._query,{source:"server"}).then(n=>new zf(t,r,e,n))}(this._delegate):function(e){e=Vd(e,Hd);const t=Vd(e.firestore,ef),n=tf(t),r=new up(t);return Hf(e._query),Rd(n,e._query).then(n=>new zf(t,r,e,n))}(this._delegate),t.then(e=>new Pp(this.firestore,new zf(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=Ap(e),n=xp(e,e=>new Pp(this.firestore,new zf(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return hp(this._delegate,t,n)}withConverter(e){return new Op(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}class Dp{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Rp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Op(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Rp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new Dp(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Rp(this._firestore,n))})}isEqual(e){return $f(this._delegate,e._delegate)}}class Lp extends Op{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Cp(this.firestore,e):null}doc(e){try{return new Cp(this.firestore,void 0===e?Kd(this._delegate):Kd(this._delegate,e))}catch(t){throw kp(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Vd(e.firestore,ef),r=Kd(e),s=sp(e.converter,t);return dp(n,[yf(gf(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Zi.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Cp(this.firestore,e))}isEqual(e){return Wd(this._delegate,e._delegate)}withConverter(e){return new Lp(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function Fp(e){return Vd(e,$d)}class Mp{constructor(...e){this._delegate=new of(...e)}static documentId(){return new Mp(ms.keyField().canonicalString())}isEqual(e){return(e=(0,C.m9)(e))instanceof of&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=new wf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=new vf("deleteField");return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function(...e){return new bf("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function(...e){return new Tf("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=new Sf("increment",e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const jp={Firestore:bp,GeoPoint:lf,Timestamp:as,Blob:vp,Transaction:Sp,WriteBatch:Ep,DocumentReference:Cp,DocumentSnapshot:Np,Query:Op,QueryDocumentSnapshot:Rp,QuerySnapshot:Pp,CollectionReference:Lp,FieldPath:Mp,FieldValue:Up,setLogLevel:function(e){Mr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};var Vp,qp;qp=(e,t)=>new bp(e,t,new wp),(Vp=b.Z).INTERNAL.registerComponent(new E.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return qp(t,n)},"PUBLIC").setServiceProps(Object.assign({},jp))),Vp.registerVersion("@firebase/firestore-compat","0.1.2");var zp=n(8006),Bp=n(7841);function $p(e,t){return function(e,t=s.z){return new i.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function Hp(e,t){return $p(e,t).pipe((0,g.U)(e=>({payload:e,type:"query"})))}function Zp(e,t){return Hp(e,t).pipe((0,m.O)(void 0),c(),(0,g.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,s)=>{const i=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));i&&JSON.stringify(i.doc.metadata)===JSON.stringify(t.metadata)||!i&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:s,newIndex:s,type:"modified",doc:t}})}),r}))}function Gp(e,t,n){return Zp(e,n).pipe((0,y.R)((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return Kp(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return Kp(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Kp(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),e=>e.lift(new f(void 0,void 0)),(0,g.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function Kp(e,t,n,...r){const s=e.slice();return s.splice(t,n,...r),s}function Wp(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class Qp{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=Zp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,g.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe((0,m.O)(void 0),c(),(0,v.h)(([e,t])=>t.length>0||!e),(0,g.U)(([e,t])=>t),u.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,y.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Wp(e);return Gp(this.query,t,this.afs.schedulers.outsideAngular).pipe(u.iC)}valueChanges(e={}){return Hp(this.query,this.afs.schedulers.outsideAngular).pipe((0,g.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),u.iC)}get(e){return(0,o.D)(this.query.get(e)).pipe(u.iC)}add(e){return this.ref.add(e)}doc(e){return new Yp(this.ref.doc(e),this.afs)}}class Yp{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:s}=rm(n,t);return new Qp(r,s,this.afs)}snapshotChanges(){return $p(this.ref,this.afs.schedulers.outsideAngular).pipe((0,m.O)(void 0),c(),(0,g.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"})).pipe(u.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,g.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,o.D)(this.ref.get(e)).pipe(u.iC)}}class Jp{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zp(this.query,this.afs.schedulers.outsideAngular).pipe((0,g.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),(0,v.h)(e=>e.length>0),u.iC):Zp(this.query,this.afs.schedulers.outsideAngular).pipe(u.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,y.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Wp(e);return Gp(this.query,t,this.afs.schedulers.outsideAngular).pipe(u.iC)}valueChanges(e={}){return Hp(this.query,this.afs.schedulers.outsideAngular).pipe((0,g.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),u.iC)}get(e){return(0,o.D)(this.query.get(e)).pipe(u.iC)}}const Xp=new r.OlP("angularfire2.enableFirestorePersistence"),em=new r.OlP("angularfire2.firestore.persistenceSettings"),tm=new r.OlP("angularfire2.firestore.settings"),nm=new r.OlP("angularfire2.firestore.use-emulator");function rm(e,t=(e=>e)){return{query:t(e),ref:e}}let sm=(()=>{class e{constructor(e,t,n,r,s,i,l,c,h,d,f,p,m,g,y,v){this.schedulers=l;const b=(0,_.on)(e,i,t),T=h;d&&(0,zp.nw)(b,i,f,m,g,y,p,v),[this.firestore,this.persistenceEnabled$]=(0,u.cc)(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{const e=i.runOutsideAngular(()=>b.firestore());if(r&&e.settings(r),T&&e.useEmulator(...T),n&&!(0,w.PM)(s)){const t=()=>{try{return(0,o.D)(e.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,a.of)(!1)}};return[e,i.runOutsideAngular(t)]}return[e,(0,a.of)(!1)]},[r,T,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:s}=rm(n,t),i=this.schedulers.ngZone.run(()=>r);return new Qp(i,s,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new Jp(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new Yp(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(_.Dh),r.LFG(_.xv,8),r.LFG(Xp,8),r.LFG(tm,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(u.HU),r.LFG(em,8),r.LFG(nm,8),r.LFG(zp.zQ,8),r.LFG(zp.Qv,8),r.LFG(zp.L6,8),r.LFG(zp._Q,8),r.LFG(zp.rT,8),r.LFG(zp.lh,8),r.LFG(zp.f7,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),im=(()=>{class e{constructor(){Bp.Z.registerVersion("angularfire",u.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:Xp,useValue:!0},{provide:em,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[sm]}),e})()},8939:(e,t,n)=>{"use strict";n.d(t,{hO:()=>m,xv:()=>h,Dh:()=>c,GT:()=>u,on:()=>d,pX:()=>a});var r=n(3018),s=n(7841),i=n(9126);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(s,i)=>n.runOutsideAngular(()=>{var s;if(e[i])return(null===(s=null==r?void 0:r.spy)||void 0===s?void 0:s.get)&&r.spy.get(i,e[i]),e[i];if(o.indexOf(i)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[i];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const s=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(i,n,s),s})})})}),u=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class l{constructor(e){return e}}const c=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=s.Z.apps.filter(e=>e&&e.name===i.name)[0]||n.runOutsideAngular(()=>s.Z.initializeApp(t,i));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new l(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:l,useFactory:d,deps:[c,r.R0b,[new r.FiY,h]]};let m=(()=>{class e{constructor(e){s.Z.registerVersion("angularfire",i.q4.full,"core"),s.Z.registerVersion("angularfire",i.q4.full,"app-compat"),s.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:c,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})()},9126:(e,t,n)=>{"use strict";n.d(t,{q4:()=>l,iC:()=>v,HU:()=>g,cc:()=>d});var r=n(3018);(0,n(5452).registerVersion)("firebase","9.0.2","app");var s=n(7771),i=n(3637),o=n(3342),a=n(3101),u=n(309);e=n.hmd(e);const l=new r.GfV("7.0.4"),c=!!e.hot,h=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};function d(e,t,n,r,s){const[,i,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(i)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(s,o)||(h("error",`${t} was already initialized on the ${n} Firebase App with different settings.${c?" You may need to reload as Firebase is not HMR aware.":""}`),h("warn",{is:s,was:o})),i;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,s]),t}}function f(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class p{constructor(e,t=s.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class m{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",f,{},f,f)),t.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let g=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new p(Zone.current)),this.insideAngular=e.run(()=>new p(Zone.current,i.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function v(e){return y(),(t=y(),function(e){return(e=e.lift(new m(t.ngZone))).pipe((0,a.R)(t.outsideAngular),(0,u.QV)(t.insideAngular))})(e);var t}},906:(e,t,n)=>{"use strict";n.d(t,{gz:()=>Qe,F0:()=>_n,yS:()=>wn,Bz:()=>On,lC:()=>Tn});var r=n(8583),s=n(3018),i=n(7574),o=n(4402),a=n(9193);function u(e){return new i.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,o.D)(n):(0,a.c)()).subscribe(t)})}var l=n(5917),c=n(6215),h=n(9112),d=n(3410),f=n(8071),p=n(2441),m=n(9765),g=n(5345);function y(e){return function(t){const n=new v(e),r=t.lift(n);return n.caught=r}}class v{constructor(e){this.selector=e}call(e,t){return t.subscribe(new _(e,this.selector,this.caught))}}class _ extends g.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new g.IY(this);this.add(r);const s=(0,g.ft)(n,r);s!==r&&this.add(s)}}}var w=n(5435),b=n(7393),T=n(7108);function S(e){return function(t){return 0===e?(0,a.c)():t.lift(new E(e))}}class E{constructor(e){if(this.total=e,this.total<0)throw new T.W}call(e,t){return t.subscribe(new I(e,this.total))}}class I extends b.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=t++%n;e.next(r[s])}}e.complete()}}var C=n(4635),k=n(5242),A=n(4487),x=n(5319);class N{constructor(e){this.callback=e}call(e,t){return t.subscribe(new R(e,this.callback))}}class R extends b.L{constructor(e,t){super(e),this.add(new x.w(t))}}var O=n(8002),D=n(3190),P=n(5257),L=n(9761),F=n(2145),M=n(4612),U=n(8049),j=n(9773),V=n(3342),q=n(1307),z=n(3282);class B{constructor(e,t){this.id=e,this.url=t}}class $ extends B{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class H extends B{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Z extends B{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class G extends B{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class K extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q extends B{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Y extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ee{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class te{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ne{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class re{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class se{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ie{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const oe="primary";class ae{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ue(e){return new ae(e)}function le(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function ce(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const s={};for(let i=0;i<r.length;i++){const t=r[i],n=e[i];if(t.startsWith(":"))s[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}function he(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!de(e[s],t[s]))return!1;return!0}function de(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function fe(e){return Array.prototype.concat.apply([],e)}function pe(e){return e.length>0?e[e.length-1]:null}function me(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function ge(e){return(0,s.CqO)(e)?e:(0,s.QGY)(e)?(0,o.D)(Promise.resolve(e)):(0,l.of)(e)}const ye={exact:function e(t,n,r){if(!Ce(t.segments,n.segments))return!1;if(!Te(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children){if(!t.children[s])return!1;if(!e(t.children[s],n.children[s],r))return!1}return!0},subset:we},ve={exact:function(e,t){return he(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>de(e[n],t[n]))},ignored:()=>!0};function _e(e,t,n){return ye[n.paths](e.root,t.root,n.matrixParams)&&ve[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function we(e,t,n){return be(e,t,t.segments,n)}function be(e,t,n,r){if(e.segments.length>n.length){const s=e.segments.slice(0,n.length);return!!Ce(s,n)&&!t.hasChildren()&&!!Te(s,n,r)}if(e.segments.length===n.length){if(!Ce(e.segments,n))return!1;if(!Te(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!we(e.children[n],t.children[n],r))return!1}return!0}{const s=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!!Ce(e.segments,s)&&!!Te(e.segments,s,r)&&!!e.children.primary&&be(e.children.primary,t,i,r)}}function Te(e,t,n){return t.every((t,r)=>ve[n](e[r].parameters,t.parameters))}class Se{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ue(this.queryParams)),this._queryParamMap}toString(){return xe.serialize(this)}}class Ee{constructor(e,t){this.segments=e,this.children=t,this.parent=null,me(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ne(this)}}class Ie{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ue(this.parameters)),this._parameterMap}toString(){return Me(this)}}function Ce(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class ke{}class Ae{parse(e){const t=new ze(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${Re(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${De(t)}=${De(e)}`).join("&"):`${De(t)}=${De(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const xe=new Ae;function Ne(e){return e.segments.map(e=>Me(e)).join("/")}function Re(e,t){if(!e.hasChildren())return Ne(e);if(t){const t=e.children.primary?Re(e.children.primary,!1):"",n=[];return me(e.children,(e,t)=>{t!==oe&&n.push(`${t}:${Re(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return me(e.children,(e,r)=>{r===oe&&(n=n.concat(t(e,r)))}),me(e.children,(e,r)=>{r!==oe&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===oe?[Re(e.children.primary,!1)]:[`${n}:${Re(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Ne(e)}/${t[0]}`:`${Ne(e)}/(${t.join("//")})`}}function Oe(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function De(e){return Oe(e).replace(/%3B/gi,";")}function Pe(e){return Oe(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Le(e){return decodeURIComponent(e)}function Fe(e){return Le(e.replace(/\+/g,"%20"))}function Me(e){return`${Pe(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Pe(e)}=${Pe(t[e])}`).join("")}`;var t}const Ue=/^[^\/()?;=#]+/;function je(e){const t=e.match(Ue);return t?t[0]:""}const Ve=/^[^=?&#]+/,qe=/^[^?&#]+/;class ze{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Ee(e,t)),n}parseSegment(){const e=je(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ie(Le(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=je(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=je(this.remaining);e&&(n=e,this.capture(n))}e[Le(t)]=Le(n)}parseQueryParam(e){const t=function(e){const t=e.match(Ve);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(qe);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Fe(t),s=Fe(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=je(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);const i=this.parseChildren();t[s]=1===Object.keys(i).length?i.primary:new Ee([],i),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Be{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$e(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=$e(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=He(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return He(e,this._root).map(e=>e.value)}}function $e(e,t){if(e===t.value)return t;for(const n of t.children){const t=$e(e,n);if(t)return t}return null}function He(e,t){if(e===t.value)return[t];for(const n of t.children){const r=He(e,n);if(r.length)return r.unshift(t),r}return[]}class Ze{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ge(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Ke extends Be{constructor(e,t){super(e),this.snapshot=t,et(this,e)}toString(){return this.snapshot.toString()}}function We(e,t){const n=function(e,t){const n=new Je([],{},{},"",{},oe,t,null,e.root,-1,{});return new Xe("",new Ze(n,[]))}(e,t),r=new c.X([new Ie("",{})]),s=new c.X({}),i=new c.X({}),o=new c.X({}),a=new c.X(""),u=new Qe(r,s,o,a,i,oe,t,n.root);return u.snapshot=n.root,new Ke(new Ze(u,[]),n)}class Qe{constructor(e,t,n,r,s,i,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,O.U)(e=>ue(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,O.U)(e=>ue(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ye(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Je{constructor(e,t,n,r,s,i,o,a,u,l,c){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ue(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ue(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xe extends Be{constructor(e,t){super(t),this.url=e,et(this,t)}toString(){return tt(this._root)}}function et(e,t){t.value._routerState=e,t.children.forEach(t=>et(e,t))}function tt(e){const t=e.children.length>0?` { ${e.children.map(tt).join(", ")} } `:"";return`${e.value}${t}`}function nt(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,he(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),he(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!he(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),he(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function rt(e,t){var n,r;return he(e.params,t.params)&&Ce(n=e.url,r=t.url)&&n.every((e,t)=>he(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||rt(e.parent,t.parent))}function st(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const s=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return st(e,t,r);return st(e,t)})}(e,t,n);return new Ze(r,s)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return it(t,e),e}}const n=new Qe(new c.X((r=t.value).url),new c.X(r.params),new c.X(r.queryParams),new c.X(r.fragment),new c.X(r.data),r.outlet,r.component,r),s=t.children.map(t=>st(e,t));return new Ze(n,s)}var r}function it(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)it(e.children[n],t.children[n])}function ot(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function at(e){return"object"==typeof e&&null!=e&&e.outlets}function ut(e,t,n,r,s){let i={};return r&&me(r,(e,t)=>{i[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Se(n.root===e?t:lt(n.root,e,t),i,s)}function lt(e,t,n){const r={};return me(e.children,(e,s)=>{r[s]=e===t?n:lt(e,t,n)}),new Ee(e.segments,r)}class ct{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&ot(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(at);if(r&&r!==pe(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ht{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function dt(e,t,n){if(e||(e=new Ee([],{})),0===e.segments.length&&e.hasChildren())return ft(e,t,n);const r=function(e,t,n){let r=0,s=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return i;const t=e.segments[s],o=n[r];if(at(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(s>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!yt(a,u,t))return i;r+=2}else{if(!yt(a,{},t))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Ee(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Ee(e.segments.slice(r.pathIndex),e.children),ft(t,0,s)}return r.match&&0===s.length?new Ee(e.segments,{}):r.match&&!e.hasChildren()?pt(e,t,n):r.match?ft(e,0,s):pt(e,t,n)}function ft(e,t,n){if(0===n.length)return new Ee(e.segments,{});{const r=function(e){return at(e[0])?e[0].outlets:{[oe]:e}}(n),s={};return me(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(s[r]=dt(e.children[r],t,n))}),me(e.children,(e,t)=>{void 0===r[t]&&(s[t]=e)}),new Ee(e.segments,s)}}function pt(e,t,n){const r=e.segments.slice(0,t);let s=0;for(;s<n.length;){const i=n[s];if(at(i)){const e=mt(i.outlets);return new Ee(r,e)}if(0===s&&ot(n[0])){r.push(new Ie(e.segments[t].path,gt(n[0]))),s++;continue}const o=at(i)?i.outlets.primary:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&ot(a)?(r.push(new Ie(o,gt(a))),s+=2):(r.push(new Ie(o,{})),s++)}return new Ee(r,{})}function mt(e){const t={};return me(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=pt(new Ee([],{}),0,e))}),t}function gt(e){const t={};return me(e,(e,n)=>t[n]=`${e}`),t}function yt(e,t,n){return e==n.path&&he(t,n.parameters)}class vt{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),nt(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Ge(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),me(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Ge(e);for(const i of Object.keys(s))this.deactivateRouteAndItsChildren(s[i],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Ge(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new se(e.value.snapshot))}),e.children.length&&this.forwardEvent(new ne(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(nt(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),_t(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=s,t.outlet&&t.outlet.activateWith(r,s),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function _t(e){nt(e.value),e.children.forEach(_t)}class wt{constructor(e,t){this.routes=e,this.module=t}}function bt(e){return"function"==typeof e}function Tt(e){return e instanceof Se}const St=Symbol("INITIAL_VALUE");function Et(){return(0,D.w)(e=>(0,h.aj)(e.map(e=>e.pipe((0,P.q)(1),(0,L.O)(St)))).pipe((0,F.R)((e,t)=>{let n=!1;return t.reduce((e,r,s)=>{if(e!==St)return e;if(r===St&&(n=!0),!n){if(!1===r)return r;if(s===t.length-1||Tt(r))return r}return e},e)},St),(0,w.h)(e=>e!==St),(0,O.U)(e=>Tt(e)?e:!0===e),(0,P.q)(1)))}let It=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&s._UZ(0,"router-outlet")},directives:function(){return[Tn]},encapsulation:2}),e})();function Ct(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];kt(r,At(t,r))}}function kt(e,t){e.children&&Ct(e.children,t)}function At(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function xt(e){const t=e.children&&e.children.map(xt),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=It),n}function Nt(e){return e.outlet||oe}function Rt(e,t){const n=e.filter(e=>Nt(e)===t);return n.push(...e.filter(e=>Nt(e)!==t)),n}const Ot={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Dt(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Ot):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||ce)(n,e,t);if(!s)return Object.assign({},Ot);const i={};me(s.posParams,(e,t)=>{i[t]=e.path});const o=s.consumed.length>0?Object.assign(Object.assign({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:o,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Pt(e,t,n,r,s="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>Lt(e,t,n)&&Nt(n)!==oe)}(e,n,r)){const s=new Ee(t,function(e,t,n,r){const s={};s.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const i of n)if(""===i.path&&Nt(i)!==oe){const n=new Ee([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,s[Nt(i)]=n}return s}(e,t,r,new Ee(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Lt(e,t,n))}(e,n,r)){const i=new Ee(e.segments,function(e,t,n,r,s,i){const o={};for(const a of r)if(Lt(e,n,a)&&!s[Nt(a)]){const n=new Ee([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===i?e.segments.length:t.length,o[Nt(a)]=n}return Object.assign(Object.assign({},s),o)}(e,t,n,r,e.children,s));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}const i=new Ee(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function Lt(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ft(e,t,n,r){return!!(Nt(e)===r||r!==oe&&Lt(t,n,e))&&("**"===e.path||Dt(t,e,n).matched)}function Mt(e,t,n){return 0===t.length&&!e.children[n]}class Ut{constructor(e){this.segmentGroup=e||null}}class jt{constructor(e){this.urlTree=e}}function Vt(e){return new i.y(t=>t.error(new Ut(e)))}function qt(e){return new i.y(t=>t.error(new jt(e)))}function zt(e){return new i.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Bt{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(s.h0i)}apply(){const e=Pt(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ee(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,oe).pipe((0,O.U)(e=>this.createUrlTree($t(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(y(e=>{if(e instanceof jt)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Ut)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,oe).pipe((0,O.U)(t=>this.createUrlTree($t(t),e.queryParams,e.fragment))).pipe(y(e=>{if(e instanceof Ut)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Ee([],{[oe]:e}):e;return new Se(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,O.U)(e=>new Ee([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return(0,o.D)(r).pipe((0,M.b)(r=>{const s=n.children[r],i=Rt(t,r);return this.expandSegmentGroup(e,i,s,r).pipe((0,O.U)(e=>({segment:e,outlet:r})))}),(0,F.R)((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?(0,w.h)((t,n)=>e(t,n,r)):A.y,S(1),n?(0,k.d)(t):(0,C.T)(()=>new d.K))}())}expandSegment(e,t,n,r,s,i){return(0,o.D)(n).pipe((0,M.b)(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,s,i).pipe(y(e=>{if(e instanceof Ut)return(0,l.of)(null);throw e}))),(0,U.P)(e=>!!e),y((e,n)=>{if(e instanceof d.K||"EmptyError"===e.name){if(Mt(t,r,s))return(0,l.of)(new Ee([],{}));throw new Ut(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,s,i,o){return Ft(r,t,s,i)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i):Vt(t):Vt(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?qt(s):this.lineralizeSegments(n,s).pipe((0,j.zg)(n=>{const s=new Ee(n,{});return this.expandSegment(e,s,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:l}=Dt(t,r,s);if(!o)return Vt(t);const c=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?qt(c):this.lineralizeSegments(r,c).pipe((0,j.zg)(r=>this.expandSegment(e,t,n,r.concat(s.slice(u)),i,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,l.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,O.U)(e=>(n._loadedConfig=e,new Ee(r,{})))):(0,l.of)(new Ee(r,{}));const{matched:i,consumedSegments:o,lastChild:a}=Dt(t,n,r);if(!i)return Vt(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,j.zg)(e=>{const r=e.module,i=e.routes,{segmentGroup:a,slicedSegments:c}=Pt(t,o,u,i),h=new Ee(a.segments,a.children);if(0===c.length&&h.hasChildren())return this.expandChildren(r,i,h).pipe((0,O.U)(e=>new Ee(o,e)));if(0===i.length&&0===c.length)return(0,l.of)(new Ee(o,{}));const d=Nt(n)===s;return this.expandSegment(r,h,i,c,d?oe:s,!0).pipe((0,O.U)(e=>new Ee(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,l.of)(new wt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,l.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,j.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,O.U)(e=>(t._loadedConfig=e,e))):function(e){return new i.y(t=>t.error(le(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,l.of)(new wt([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,l.of)(!0);const s=r.map(r=>{const s=e.get(r);let i;if(function(e){return e&&bt(e.canLoad)}(s))i=s.canLoad(t,n);else{if(!bt(s))throw new Error("Invalid CanLoad guard");i=s(t,n)}return ge(i)});return(0,l.of)(s).pipe(Et(),(0,V.b)(e=>{if(!Tt(e))return;const t=le(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,O.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,l.of)(n);if(r.numberOfChildren>1||!r.children.primary)return zt(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Se(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return me(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const s=e.substring(1);n[r]=t[s]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let i={};return me(t.children,(t,s)=>{i[s]=this.createSegmentGroup(e,t,n,r)}),new Ee(s,i)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function $t(e){const t={};for(const n of Object.keys(e.children)){const r=$t(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Ee(e.segments.concat(t.segments),t.children)}return e}(new Ee(e.segments,t))}class Ht{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zt{constructor(e,t){this.component=e,this.route=t}}function Gt(e,t,n){const r=e._root;return Wt(r,t?t._root:null,n,[r.value])}function Kt(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Wt(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ge(t);return e.children.forEach(e=>{!function(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Ce(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ce(e.url,t.url)||!he(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rt(e,t)||!he(e.queryParams,t.queryParams);case"paramsChange":default:return!rt(e,t)}}(o,i,i.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new Ht(r)):(i.data=o.data,i._resolvedData=o._resolvedData),Wt(e,t,i.component?a?a.children:null:n,r,s),u&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Zt(a.outlet.component,o))}else o&&Qt(t,a,s),s.canActivateChecks.push(new Ht(r)),Wt(e,null,i.component?a?a.children:null:n,r,s)}(e,i[e.value.outlet],n,r.concat([e.value]),s),delete i[e.value.outlet]}),me(i,(e,t)=>Qt(e,n.getContext(t),s)),s}function Qt(e,t,n){const r=Ge(e),s=e.value;me(r,(e,r)=>{Qt(e,s.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Zt(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}class Yt{}function Jt(e){return new i.y(t=>t.error(e))}class Xt{constructor(e,t,n,r,s,i){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){const e=Pt(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,oe);if(null===t)return null;const n=new Je([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},oe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ze(n,t),s=new Xe(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,n=Ye(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const s of Object.keys(t.children)){const r=t.children[s],i=Rt(e,s),o=this.processSegmentGroup(i,r,s);if(null===o)return null;n.push(...o)}const r=tn(n);return r.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const s of e){const e=this.processSegmentAgainstRoute(s,t,n,r);if(null!==e)return e}return Mt(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!Ft(e,t,n,r))return null;let s,i=[],o=[];if("**"===e.path){const r=n.length>0?pe(n).parameters:{};s=new Je(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sn(e),Nt(e),e.component,e,nn(t),rn(t)+n.length,on(e))}else{const r=Dt(t,e,n);if(!r.matched)return null;i=r.consumedSegments,o=n.slice(r.lastChild),s=new Je(i,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sn(e),Nt(e),e.component,e,nn(t),rn(t)+i.length,on(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:l}=Pt(t,i,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const e=this.processChildren(a,u);return null===e?null:[new Ze(s,e)]}if(0===a.length&&0===l.length)return[new Ze(s,[])];const c=Nt(e)===r,h=this.processSegment(a,u,l,c?oe:r);return null===h?null:[new Ze(s,h)]}}function en(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function tn(e){const t=[],n=new Set;for(const r of e){if(!en(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=tn(r.children);t.push(new Ze(r.value,e))}return t.filter(e=>!n.has(e))}function nn(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function rn(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function sn(e){return e.data||{}}function on(e){return e.resolve||{}}function an(e){return(0,D.w)(t=>{const n=e(t);return n?(0,o.D)(n).pipe((0,O.U)(()=>t)):(0,l.of)(t)})}class un extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ln=new s.OlP("ROUTES");class cn{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,O.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new wt(fe(r.injector.get(ln,void 0,s.XFs.Self|s.XFs.Optional)).map(xt),r)}),y(e=>{throw t._loader$=void 0,e}));return t._loader$=new p.c(n,()=>new m.xQ).pipe((0,q.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,o.D)(this.loader.load(e)):ge(e()).pipe((0,j.zg)(e=>e instanceof s.YKP?(0,l.of)(e):(0,o.D)(this.compiler.compileModuleAsync(e))))}}class hn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new dn,this.attachRef=null}}class dn{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hn,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class fn{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function pn(e){throw e}function mn(e,t,n){return t.parse("/")}function gn(e,t){return(0,l.of)(null)}const yn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _n=(()=>{class e{constructor(e,t,n,r,i,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new m.xQ,this.errorHandler=pn,this.malformedUriErrorHandler=mn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gn,afterPreactivation:gn},this.urlHandlingStrategy=new fn,this.routeReuseStrategy=new un,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=i.get(s.h0i),this.console=i.get(s.c2e);const l=i.get(s.R0b);this.isNgZoneEnabled=l instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Se(new Ee([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cn(o,a,e=>this.triggerEvent(new X(e)),e=>this.triggerEvent(new ee(e))),this.routerState=We(this.currentUrlTree,this.rootComponentType),this.transitions=new c.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe((0,w.h)(e=>0!==e.id),(0,O.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),(0,D.w)(e=>{let n=!1,r=!1;return(0,l.of)(e).pipe((0,V.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,D.w)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,l.of)(e).pipe((0,D.w)(e=>{const n=this.transitions.getValue();return t.next(new $(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?a.E:Promise.resolve(e)}),(r=this.ngModule.injector,s=this.configLoader,i=this.urlSerializer,o=this.config,(0,D.w)(e=>function(e,t,n,r,s){return new Bt(e,t,n,r,s).apply()}(r,s,i,e.extractedUrl,o).pipe((0,O.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,V.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,s){return(0,j.zg)(i=>function(e,t,n,r,s="emptyOnly",i="legacy"){try{const o=new Xt(e,t,n,r,s,i).recognize();return null===o?Jt(new Yt):(0,l.of)(o)}catch(o){return Jt(o)}}(e,t,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe((0,O.U)(e=>Object.assign(Object.assign({},i),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,V.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new K(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,s,i,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:o}=e,a=new $(n,this.serializeUrl(r),s,i);t.next(a);const u=We(r,this.rootComponentType).snapshot;return(0,l.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),a.E}),an(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),(0,V.b)(e=>{const t=new W(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,O.U)(e=>Object.assign(Object.assign({},e),{guards:Gt(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,j.zg)(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:a}}=n;return 0===a.length&&0===i.length?(0,l.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,o.D)(e).pipe((0,j.zg)(e=>function(e,t,n,r,s){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||0===i.length)return(0,l.of)(!0);const o=i.map(i=>{const o=Kt(i,t,s);let a;if(function(e){return e&&bt(e.canDeactivate)}(o))a=ge(o.canDeactivate(e,t,n,r));else{if(!bt(o))throw new Error("Invalid CanDeactivate guard");a=ge(o(e,t,n,r))}return a.pipe((0,U.P)())});return(0,l.of)(o).pipe(Et())}(e.component,e.route,n,t,r)),(0,U.P)(e=>!0!==e,!0))}(a,r,s,e).pipe((0,j.zg)(n=>n&&"boolean"==typeof n?function(e,t,n,r){return(0,o.D)(t).pipe((0,M.b)(t=>(0,f.z)(function(e,t){return null!==e&&t&&t(new te(e)),(0,l.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new re(e)),(0,l.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>u(()=>{const s=t.guards.map(s=>{const i=Kt(s,t.node,n);let o;if(function(e){return e&&bt(e.canActivateChild)}(i))o=ge(i.canActivateChild(r,e));else{if(!bt(i))throw new Error("Invalid CanActivateChild guard");o=ge(i(r,e))}return o.pipe((0,U.P)())});return(0,l.of)(s).pipe(Et())}));return(0,l.of)(s).pipe(Et())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,l.of)(!0);const s=r.map(r=>u(()=>{const s=Kt(r,t,n);let i;if(function(e){return e&&bt(e.canActivate)}(s))i=ge(s.canActivate(t,e));else{if(!bt(s))throw new Error("Invalid CanActivate guard");i=ge(s(t,e))}return i.pipe((0,U.P)())}));return(0,l.of)(s).pipe(Et())}(e,t.route,n))),(0,U.P)(e=>!0!==e,!0))}(r,i,e,t):(0,l.of)(n)),(0,O.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,V.b)(e=>{if(Tt(e.guardsResult)){const t=le(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Q(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),(0,w.h)(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),an(e=>{if(e.guards.canActivateChecks.length)return(0,l.of)(e).pipe((0,V.b)(e=>{const t=new Y(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,D.w)(e=>{let t=!1;return(0,l.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,j.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:s}}=e;if(!s.length)return(0,l.of)(e);let i=0;return(0,o.D)(s).pipe((0,M.b)(e=>function(e,t,n,r){return function(e,t,n,r){const s=Object.keys(e);if(0===s.length)return(0,l.of)({});const i={};return(0,o.D)(s).pipe((0,j.zg)(s=>function(e,t,n,r){const s=Kt(e,t,r);return ge(s.resolve?s.resolve(t,n):s(t,n))}(e[s],t,n,r).pipe((0,V.b)(e=>{i[s]=e}))),S(1),(0,j.zg)(()=>Object.keys(i).length===s.length?(0,l.of)(i):a.E))}(e._resolve,e,t,r).pipe((0,O.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Ye(e,n).resolve),null)))}(e.route,t,n,r)),(0,V.b)(()=>i++),S(1),(0,j.zg)(t=>i===s.length?(0,l.of)(e):a.E))})),(0,V.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,V.b)(e=>{const t=new J(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),an(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),(0,O.U)(e=>{const t=function(e,t,n){const r=st(e,t._root,n?n._root:void 0);return new Ke(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,V.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(i=this.rootContexts,c=this.routeReuseStrategy,h=e=>this.triggerEvent(e),(0,O.U)(e=>(new vt(c,e.targetRouterState,e.currentRouterState,h).activate(i),e))),(0,V.b)({next(){n=!0},complete(){n=!0}}),(s=()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null},e=>e.lift(new N(s))),y(n=>{if(r=!0,(s=n)&&s.ngNavigationCancelingError){const r=Tt(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const s=new Z(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(s),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new G(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}var s;return a.E}));var s,i,c,h}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,s={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(s.state=e)}this.scheduleNavigation(r,e,n,s)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ct(e),this.config=e.map(xt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:s,queryParamsHandling:i,preserveFragment:o}=t,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:s;let l=null;switch(i){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,s){if(0===n.length)return ut(t.root,t.root,t,r,s);const i=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new ct(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return me(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new ct(n,t,r)}(n);if(i.toRoot())return ut(t.root,new Ee([],{}),t,r,s);const o=function(e,t,n){if(e.isAbsolute)return new ht(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new ht(e,e===t.root,0)}const r=ot(e.commands[0])?0:1;return function(e,t,n){let r=e,s=t,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new ht(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(i,t,e),a=o.processChildren?ft(o.segmentGroup,o.index,i.commands):dt(o.segmentGroup,o.index,i.commands);return ut(o.segmentGroup,a,t,r,s)}(a,this.currentUrlTree,e,l,null!=u?u:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Tt(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},yn):!1===t?Object.assign({},vn):t,Tt(e))return _e(this.currentUrlTree,e,n);const r=this.parseUrl(e);return _e(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new H(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,s){var i,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==t&&"imperative"===(null==a?void 0:a.source),l=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(u&&l)return Promise.resolve(!0);let c,h,d;s?(c=s.resolve,h=s.reject,d=s.promise):d=new Promise((e,t)=>{c=e,h=t});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(i=this.browserPageId)&&void 0!==i?i:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:c,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new Z(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.DyG),s.LFG(ke),s.LFG(dn),s.LFG(r.Ye),s.LFG(s.zs3),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(void 0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),wn=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new m.xQ,this.subscription=e.events.subscribe(e=>{e instanceof H&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,s){if(0!==e||t||n||r||s)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:bn(this.skipLocationChange),replaceUrl:bn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bn(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(_n),s.Y36(Qe),s.Y36(r.S$))},e.\u0275dir=s.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&s.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(s.Ikx("href",t.href,s.LSH),s.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),e})();function bn(e){return""===e||!!e}let Tn=(()=>{class e{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.name=r||oe,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new Sn(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(dn),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},e.\u0275dir=s.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Sn{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Qe?this.route:e===dn?this.childContexts:this.parent.get(e,t)}}class En{}class In{preload(e,t){return(0,l.of)(null)}}let Cn=(()=>{class e{constructor(e,t,n,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new cn(t,n,t=>e.triggerEvent(new X(t)),t=>e.triggerEvent(new ee(t)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,w.h)(e=>e instanceof H),(0,M.b)(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,o.D)(n).pipe((0,z.J)(),(0,O.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,l.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,j.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(_n),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(En))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),kn=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof $?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof H&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ie&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new ie(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(_n),s.LFG(r.EM),s.LFG(void 0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const An=new s.OlP("ROUTER_CONFIGURATION"),xn=new s.OlP("ROUTER_FORROOT_GUARD"),Nn=[r.Ye,{provide:ke,useClass:Ae},{provide:_n,useFactory:function(e,t,n,r,s,i,o,a={},u,l){const c=new _n(null,e,t,n,r,s,i,fe(o));return u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,c),a.enableTracing&&c.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),c},deps:[ke,dn,r.Ye,s.zs3,s.v3s,s.Sil,ln,An,[class{},new s.FiY],[class{},new s.FiY]]},dn,{provide:Qe,useFactory:function(e){return e.routerState.root},deps:[_n]},{provide:s.v3s,useClass:s.EAV},Cn,In,class{preload(e,t){return t().pipe(y(()=>(0,l.of)(null)))}},{provide:An,useValue:{enableTracing:!1}}];function Rn(){return new s.PXZ("Router",_n)}let On=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Nn,Fn(t),{provide:xn,useFactory:Ln,deps:[[_n,new s.FiY,new s.tp0]]},{provide:An,useValue:n||{}},{provide:r.S$,useFactory:Pn,deps:[r.lw,[new s.tBr(r.mr),new s.FiY],An]},{provide:kn,useFactory:Dn,deps:[_n,r.EM,An]},{provide:En,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:In},{provide:s.PXZ,multi:!0,useFactory:Rn},[Mn,{provide:s.ip1,multi:!0,useFactory:Un,deps:[Mn]},{provide:Vn,useFactory:jn,deps:[Mn]},{provide:s.tb,multi:!0,useExisting:Vn}]]}}static forChild(t){return{ngModule:e,providers:[Fn(t)]}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(xn,8),s.LFG(_n,8))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({}),e})();function Dn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new kn(e,t,n)}function Pn(e,t,n={}){return n.useHash?new r.Do(e,t):new r.b0(e,t)}function Ln(e){return"guarded"}function Fn(e){return[{provide:s.deG,multi:!0,useValue:e},{provide:ln,multi:!0,useValue:e}]}let Mn=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new m.xQ}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(_n),r=this.injector.get(An);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,l.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(An),n=this.injector.get(Cn),r=this.injector.get(kn),i=this.injector.get(_n),o=this.injector.get(s.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.zs3))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();function Un(e){return e.appInitializer.bind(e)}function jn(e){return e.bootstrapListener.bind(e)}const Vn=new s.OlP("Router Initializer")},4486:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(4685),s=n(6034),i=n(5452),o=n(300);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,i._addComponent)(e,new s.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,i.deleteApp)(this._delegate)))}_getService(e,t=i._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=i._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,i._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,i._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),l=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(s,o={}){const a=i.initializeApp(s,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:s,registerVersion:i.registerVersion,setLogLevel:i.setLogLevel,onLog:i.onLog,apps:null,SDK_VERSION:i.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(i._registerComponent(t)&&"PUBLIC"===t.type){const i=(e=s())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(i,t.serviceProps),n[a]=i,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:i}};function s(e){if(!(0,r.r3)(t,e=e||i._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),s.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),c=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){c.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&c.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=l;(0,i.registerVersion)("@firebase/app-compat","0.1.1",void 0);const d=h},5452:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>T,_DEFAULT_ENTRY_NAME:()=>c,_addComponent:()=>p,_addOrOverwriteComponent:()=>m,_apps:()=>d,_clearComponents:()=>_,_components:()=>f,_getProvider:()=>y,_registerComponent:()=>g,_removeServiceInstance:()=>v,deleteApp:()=>C,getApp:()=>E,getApps:()=>I,initializeApp:()=>S,onLog:()=>x,registerVersion:()=>A,setLogLevel:()=>N});var r=n(6304),s=n(6034),i=n(300),o=n(4685);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",l=new i.Yd("@firebase/app"),c="[DEFAULT]",h={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(f.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of d.values())p(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function v(e,t,n=c){y(e,t).clearInstance(n)}function _(){f.clear()}const w=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const T="9.0.0";function S(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:c,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw w.create("bad-app-name",{appName:String(r)});const i=d.get(r);if(i){if((0,o.vZ)(e,i.options)&&(0,o.vZ)(n,i.config))return i;throw w.create("duplicate-app",{appName:r})}const a=new s.H0(r);for(const s of f.values())a.addComponent(s);const u=new b(e,n,a);return d.set(r,u),u}function E(e=c){const t=d.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function I(){return Array.from(d.values())}function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function A(e,t,n){var r;let i=null!==(r=h[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}g(new s.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function x(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,i.Am)(e,t)}function N(e){(0,i.Ub)(e)}g(new s.wA("platform-logger",e=>new a(e),"PRIVATE")),A(u,"0.7.0",void 0),A("fire-js","")},6034:(e,t,n)=>{"use strict";n.d(t,{wA:()=>i,H0:()=>u});var r=n(4762),s=n(4685),i=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new s.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var s=(0,r.XA)(this.instancesDeferred.entries()),i=s.next();!i.done;i=s.next()){var a=(0,r.CR)(i.value,2),u=a[1],l=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService({instanceIdentifier:l});u.resolve(c)}catch(h){}}}catch(d){t={error:d}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var s=e.options,i=void 0===s?{}:s,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),l=u.next();!l.done;l=u.next()){var c=(0,r.CR)(l.value,2),h=c[1];o===this.normalizeInstanceIdentifier(c[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);var i=this.instances.get(r);return i&&e(i,r),function(){s.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,s,i=this.onInitCallbacks.get(t);if(i)try{for(var o=(0,r.XA)(i),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(e,t)}catch(l){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,s=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:s}),this.instances.set(n,i),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(a){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},300:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}var s;n.d(t,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>f});var i=[],o=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,l=((s={})[o.DEBUG]="log",s[o.VERBOSE]="log",s[o.INFO]="info",s[o.WARN]="warn",s[o.ERROR]="error",s),c=function(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=l[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+i+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){i.forEach(function(t){t.setLogLevel(e)})}function f(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];var a=s.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:a,args:s,type:t.name})}},r=0,s=i;r<s.length;r++)n(s[r])}},4685:(e,t,n)=>{"use strict";n.d(t,{BH:()=>l,LL:()=>S,ZR:()=>T,tV:()=>a,r3:()=>C,Sg:()=>c,ne:()=>D,vZ:()=>A,ZB:()=>u,pd:()=>O,m9:()=>F,z$:()=>h,jU:()=>p,ru:()=>m,d:()=>y,xb:()=>k,w1:()=>v,hl:()=>b,uI:()=>d,UG:()=>f,b$:()=>g,G6:()=>w,Mn:()=>_,xO:()=>N,zd:()=>R});var r=n(4762),s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],s=0;s<e.length;s+=3){var i=e[s],o=s+1<e.length,a=o?e[s+1]:0,u=s+2<e.length,l=u?e[s+2]:0,c=(15&a)<<2|l>>6,h=63&l;u||(h=64,o||(c=64)),r.push(n[i>>2],n[(3&i)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){var i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){var o=((7&s)<<18|(63&(i=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{i=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],s=0;s<e.length;){var i=n[e.charAt(s++)],o=s<e.length?n[e.charAt(s)]:0,a=++s<e.length?n[e.charAt(s)]:64,u=++s<e.length?n[e.charAt(s)]:64;if(++s,null==i||null==o||null==a||null==u)throw Error();r.push(i<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=s(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}var l=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function c(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function m(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return h().indexOf("Electron/")>=0}function v(){var e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return h().indexOf("MSAppHost/")>=0}function w(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}var T=function(e){function t(n,r,s){var i=e.call(this,r)||this;return i.code=n,i.customData=s,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,S.prototype.create),i}return(0,r.ZT)(t,e),t}(Error),S=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},s=this.service+"/"+e,i=this.errors[e],o=i?E(i,r):"Error",a=this.serviceName+": "+o+" ("+s+").",u=new T(s,a,r);return u},e}();function E(e,t){return e.replace(I,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),s=0,i=n;s<i.length;s++){if(!r.includes(c=i[s]))return!1;var o=e[c],a=t[c];if(x(o)&&x(a)){if(!A(o,a))return!1}else if(o!==a)return!1}for(var u=0,l=r;u<l.length;u++){var c;if(!n.includes(c=l[u]))return!1}return!0}function x(e){return null!==e&&"object"==typeof e}function N(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,s=Object.entries(e);r<s.length;r++){var i=s[r];n(i[0],i[1])}return t.length?"&"+t.join("&"):""}function R(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function O(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){var n=new P(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var s,i,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(s=l^a&(u^l),i=1518500249):(s=a^u^l,i=1859775393):r<60?(s=a&u|l&(a|u),i=2400959708):(s=a^u^l,i=3395469782);var h=(o<<5|o>>>27)+s+c+i+n[r]&4294967295;c=l,l=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,s=this.buf_,i=this.inbuf_;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(s[i]=e.charCodeAt(r),++r,++i===this.blockSize){this.compress_(s),i=0;break}}else for(;r<t;)if(s[i]=e[r],++r,++i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var s=24;s>=0;s-=8)e[r]=this.chain_[n]>>s&255,++r;return e}}();var P=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,s=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var s=r[n];if(s in e&&"function"==typeof e[s])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{s.finalError?r.error(s.finalError):r.complete()}catch(e){}}),this.observers.push(r),i},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function L(){}function F(e){return e&&e._delegate?e._delegate:e}},7841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(4486);r.Z.registerVersion("firebase","9.0.2","app-compat")},6780:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),s=n(4486),i=n(4685),o=n(5452),a=n(4762),u=n(300),l=n(6034);const c=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new u.Yd("@firebase/auth");function f(e,...t){d.logLevel<=u.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function p(e,...t){throw v(e,...t)}function m(e,...t){return v(e,...t)}function g(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new i.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&p(e,"argument-error"),g(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function _(e,t,...n){if(!e)throw v(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function b(e,t){e||w(t)}const T=new Map;function S(e){b(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function I(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(I()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class x{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new k(3e4,6e4);function O(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function D(e,t,n,r){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(e,t,n,r,s={}){return L(e,s,()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=new(x.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&u.set("X-Firebase-Locale",e.languageCode),x.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})})).apply(this,arguments)}function L(e,t,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new V(e),s=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=yield s.json();if("needConfirmation"in i)throw q(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw g(e,a,o);p(e,a)}}catch(s){if(s instanceof i.ZR)throw s;p(e,"network-request-failed")}})).apply(this,arguments)}function M(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,s={}){const i=yield D(e,t,n,r,s);return"mfaPendingCredential"in i&&p(e,"multi-factor-auth-required",{serverResponse:i}),i})).apply(this,arguments)}function j(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?A(e.config,s):`${e.config.apiScheme}://${s}`}class V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"timeout")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=m(e,t,r);return s.customData._tokenResponse=n,s}function z(){return(z=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function B(e,t){return $.apply(this,arguments)}function $(){return($=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function H(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function G(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(){return(K=(0,r.Z)(function*(e,t=!1){const n=(0,i.m9)(e),r=yield n.getIdToken(t),s=Q(r);_(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:G(W(s.auth_time)),issuedAtTime:G(W(s.iat)),expirationTime:G(W(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function W(e){return 1e3*Number(e)}function Q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(s){return f("Caught error parsing JWT payload as JSON",s),null}}function Y(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof i.ZR&&X(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class te{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=G(this.lastLoginAt),this.creationTime=G(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),s=yield Y(e,H(n,{idToken:r}));_(null==s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?oe(i.providerUserInfo):[],a=ie(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&i.passwordHash||(null==a?void 0:a.length)),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new te(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,l)})).apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){const t=(0,i.m9)(e);yield ne(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function ie(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oe(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ae(){return(ae=(0,r.Z)(function*(e,t){const n=yield L(e,{},()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=j(e,r,"/v1/token",`key=${s}`);return x.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_(e.idToken,"internal-error"),_(void 0!==e.idToken,"internal-error"),_(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Q(e);return _(t,"internal-error"),_(void 0!==t.exp,"internal-error"),_(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return _(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:s,expiresIn:i}=yield function(e,t){return ae.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,s,Number(i))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new ue;return n&&(_("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(_("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(_("number"==typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ue,this.toJSON())}_performRefresh(){return w("not implemented")}}function le(e,t){_("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ce{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new te(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Y(t,t.stsTokenManager.getToken(t.auth,e));return _(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return K.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ce(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ne(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Y(e,function(e,t){return z.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,u,l;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:T,stsTokenManager:S}=t;_(v&&S,e,"internal-error");const E=ue.fromJSON(this.name,S);_("string"==typeof v,e,"internal-error"),le(c,e.name),le(h,e.name),_("boolean"==typeof w,e,"internal-error"),_("boolean"==typeof b,e,"internal-error"),le(d,e.name),le(f,e.name),le(p,e.name),le(m,e.name),le(g,e.name),le(y,e.name);const I=new ce({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return T&&Array.isArray(T)&&(I.providerData=T.map(e=>Object.assign({},e))),m&&(I._redirectEventId=m),I}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ue;r.updateFromServerResponse(t);const s=new ce({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ne(s),s})()}}const he=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function de(e,t,n){return`firebase:${e}:${t}:${n}`}class fe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=de(this.userKey,r.apiKey,s),this.fullPersistenceKey=de("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ce._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new fe(S(he),e,n);const s=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let i=s[0]||S(he);const o=de(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=ce._fromJSON(e,t);n!==i&&(a=r),i=n;break}}catch(l){}const u=s.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&u.length?(i=u[0],a&&(yield i._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==i)try{yield e._remove(o)}catch(l){}});return function(t){return e.apply(this,arguments)}}())),new fe(i,e,n)):new fe(i,e,n)})()}}function pe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(be(t))return"Webos";if(ge(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(_e(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,i.z$)()){return/firefox\//i.test(e)}function ge(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,i.z$)()){return/crios\//i.test(e)}function ve(e=(0,i.z$)()){return/iemobile/i.test(e)}function _e(e=(0,i.z$)()){return/android/i.test(e)}function we(e=(0,i.z$)()){return/blackberry/i.test(e)}function be(e=(0,i.z$)()){return/webos/i.test(e)}function Te(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)}function Se(e=(0,i.z$)()){return Te(e)||_e(e)||be(e)||we(e)||/windows phone/i.test(e)||ve(e)}function Ee(e,t=[]){let n;switch(e){case"Browser":n=pe((0,i.z$)());break;case"Worker":n=`${pe((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Ie{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=S(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield fe.create(n,e),n._deleted||((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),n._deleted||(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const s=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,i=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);s&&s!==i||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(_(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ne(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,i.m9)(e):null;return n&&_(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&_(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(S(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&S(e)||t._popupRedirectResolver;_(n,t,"argument-error"),t.redirectPersistenceManager=yield fe.create(t,[S(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,s;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(s=t.redirectUser)||void 0===s?void 0:s._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return _(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ce(e){return(0,i.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ae(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function Re(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:resetPassword",O(e,t))})).apply(this,arguments)}function De(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Le(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",O(e,t))})).apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",O(e,t))})).apply(this,arguments)}function Ue(e,t){return je.apply(this,arguments)}function je(){return(je=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendOobCode",O(e,t))})).apply(this,arguments)}function Ve(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function ze(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function $e(e,t){return He.apply(this,arguments)}function He(){return(He=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ze(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",O(e,t))})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",O(e,t))})).apply(this,arguments)}class Qe extends Ne{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Qe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Me.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:p(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return De(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:p(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",O(e,t))})).apply(this,arguments)}class Xe extends Ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Xe(n,r);return Object.assign(i,s),i}_getIdTokenResponse(e){return Ye(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ye(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ye(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendVerificationCode",O(e,t))})).apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){const n=yield M(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const st={USER_NOT_FOUND:"user-not-found"};function it(){return(it=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),st)})).apply(this,arguments)}class ot extends Ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return nt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return rt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return it.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new ot({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class at{constructor(e){var t,n,r,s,o,a;const u=(0,i.zd)((0,i.pd)(e)),l=null!==(t=u.apiKey)&&void 0!==t?t:null,c=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);_(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.zd)((0,i.pd)(e)).link,n=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||t||e}(e);try{return new at(t)}catch(n){return null}}}let ut=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Qe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=at.parseLink(t);return _(n,"argument-error"),Qe._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class lt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ct extends lt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends ct{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return _("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return _(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:s,nonce:i,providerId:o}=e;if(!(n||r||t||s))return null;if(!o)return null;try{return new ht(o)._credential({idToken:t,accessToken:n,rawNonce:i,pendingToken:s})}catch(a){return null}}}let dt=(()=>{class e extends ct{constructor(){super("facebook.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),ft=(()=>{class e extends ct{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(s){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),pt=(()=>{class e extends ct{constructor(){super("github.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class mt extends Ne{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ye(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ye(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ye(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:s}=t;return n&&r&&s&&n===r?new mt(n,s):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let gt=(()=>{class e extends ct{constructor(){super("twitter.com")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(s){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function yt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signUp",O(e,t))})).apply(this,arguments)}class _t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,s=!1){return(0,r.Z)(function*(){const r=yield ce._fromIdTokenResponse(e,n,s),i=wt(n);return new _t({user:r,providerId:i,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=wt(n);return new _t({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function wt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function bt(){return(bt=(0,r.Z)(function*(e){var t;const n=Ce(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new _t({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield yt(n,{returnSecureToken:!0}),s=yield _t._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(s.user),s})).apply(this,arguments)}class Tt extends i.ZR{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Tt.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(s=e.tenantId)&&void 0!==s?s:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new Tt(e,t,n,r)}}function St(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Tt._fromErrorAndOperation(e,n,t,r);throw n})}function Et(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function It(){return(It=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);yield At(!0,n,t);const{providerUserInfo:r}=yield B(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),s=Et(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Ct(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e,t,n=!1){const r=yield Y(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return _t._forOperation(e,"link",r)})).apply(this,arguments)}function At(e,t,n){return xt.apply(this,arguments)}function xt(){return(xt=(0,r.Z)(function*(e,t,n){yield ne(t);const r=!1===e?"provider-already-linked":"no-such-provider";_(Et(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Nt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,s="reauthenticate";try{const i=yield Y(e,St(r,s,t,e),n);_(i.idToken,r,"internal-error");const o=Q(i.idToken);_(o,r,"internal-error");const{sub:a}=o;return _(e.uid===a,r,"user-mismatch"),_t._forOperation(e,s,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&p(r,"user-mismatch"),i}})).apply(this,arguments)}function Ot(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",s=yield St(e,r,t),i=yield _t._fromIdTokenResponse(e,r,s);return n||(yield e._updateCurrentUser(i.user)),i})).apply(this,arguments)}function Pt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,r.Z)(function*(e,t){return Ot(Ce(e),t)})).apply(this,arguments)}function Ft(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);return yield At(!1,n,t.providerId),Ct(n,t)})).apply(this,arguments)}function Ut(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Nt((0,i.m9)(e),t)})).apply(this,arguments)}function Vt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",O(e,t))})).apply(this,arguments)}function zt(){return(zt=(0,r.Z)(function*(e,t){const n=Ce(e),r=yield Vt(n,{token:t,returnSecureToken:!0}),s=yield _t._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(s.user),s})).apply(this,arguments)}class Bt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?$t._fromServerResponse(e,t):p(e,"internal-error")}}class $t extends Bt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new $t(t)}}function Ht(e,t,n){var r;_((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(_(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Ht(r,s,n),yield ze(r,s)})).apply(this,arguments)}function Gt(){return(Gt=(0,r.Z)(function*(e,t,n){yield Re((0,i.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t){yield Le((0,i.m9)(e),{oobCode:t})})).apply(this,arguments)}function Wt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r=yield Re(n,{oobCode:t}),s=r.requestType;switch(_(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_(r.mfaInfo,n,"internal-error");default:_(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Bt._fromServerResponse(Ce(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const{data:n}=yield Wt((0,i.m9)(e),t);return n.email})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t,n){const r=Ce(e),s=yield yt(r,{returnSecureToken:!0,email:t,password:n}),i=yield _t._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(i.user),i})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};_(n.handleCodeInApp,r,"argument-error"),n&&Ht(r,s,n),yield $e(r,s)})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=ut.credentialWithLink(t,n||E());return _(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Pt(r,s)})).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:createAuthUri",O(e,t))})).apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:I()?E():"http://localhost"},{signinMethods:r}=yield tn((0,i.m9)(e),n);return r||[]})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Ht(n.auth,r,t);const{email:s}=yield Ve(n.auth,r);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Ht(r.auth,s,n);const{email:o}=yield Ze(r.auth,s);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(e,t){return un.apply(this,arguments)}function un(){return(un=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,i.m9)(e),s={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Y(r,an(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function cn(e,t,n){return hn.apply(this,arguments)}function hn(){return(hn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,s={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=yield Y(e,De(r,s));yield e._updateTokensIfNecessary(i,!0)})).apply(this,arguments)}class dn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class fn extends dn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class pn extends dn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends fn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class gn extends dn{constructor(e,t){super(e,"google.com",t)}}class yn extends fn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function vn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,s=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},i=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Q(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new dn(i,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new pn(i,s);case"github.com":return new mn(i,s);case"google.com":return new gn(i,s);case"twitter.com":return new yn(i,s,e.screenName||null);case"custom":case"anonymous":return new dn(i,null);default:return new dn(i,r,s)}}(n)}class _n{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new _n("enroll",e)}static _fromMfaPendingCredential(e){return new _n("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return _n._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return _n._fromIdtoken(e.multiFactorSession.idToken)}return null}}class wn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ce(e),s=(t.serverResponse.mfaInfo||[]).map(e=>Bt._fromServerResponse(n,e));_(t.serverResponse.mfaPendingCredential,n,"internal-error");const i=_n._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new wn(i,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,i);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const s=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield _t._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return _(t.user,n,"internal-error"),_t._forOperation(t.user,t.operationType,s);default:p(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function bn(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}class Tn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Bt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Tn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return _n._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,s=yield n.getSession(),i=yield Y(n.user,r._process(n.user.auth,s,t));return yield n.user._updateTokensIfNecessary(i),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),s=yield Y(t.user,(i=t.user.auth,o={idToken:r,mfaEnrollmentId:n},D(i,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:i.tenantId},o))));var i,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(s);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Sn=new WeakMap,En="__sak";class In{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(En,"1"),this.storage.removeItem(En),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const Cn=(()=>{class e extends In{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.z$)();return ge(e)||Te(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Se(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,s=this;return(0,r.Z)(function*(){yield n().call(s,e,t),s.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),kn=(()=>{class e extends In{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let An=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:s,eventType:i,data:o}=n.data,a=t.handlersMap[i];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),l=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function xn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Nn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var s=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const l=xn("",20);r.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),u(new Error("invalid_response"))}}},s.handlers.add(o),r.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&s.removeMessageHandler(o)})})()}}function Rn(){return window}function On(){return void 0!==Rn().WorkerGlobalScope&&"function"==typeof Rn().importScripts}function Dn(){return(Dn=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Pn="firebaseLocalStorageDb",Ln="firebaseLocalStorage",Fn="fbase_key";class Mn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Un(e,t){return e.transaction([Ln],t?"readwrite":"readonly").objectStore(Ln)}function jn(){const e=indexedDB.open(Pn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ln,{keyPath:Fn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Ln)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Pn);return new Mn(e).toPromise()}(),t(yield jn()))}))})}function Vn(e,t,n){return qn.apply(this,arguments)}function qn(){return(qn=(0,r.Z)(function*(e,t,n){const r=Un(e,!0).put({[Fn]:t,value:n});return new Mn(r).toPromise()})).apply(this,arguments)}function zn(){return(zn=(0,r.Z)(function*(e,t){const n=Un(e,!1).get(t),r=yield new Mn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Bn(e,t){const n=Un(e,!0).delete(t);return new Mn(n).toPromise()}const $n=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield jn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return On()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=An._getInstance(On()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Dn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Nn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield jn();return yield Vn(e,En,"1"),yield Bn(e,En),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>Vn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return zn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>Bn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Un(e,!1).getAll();return new Mn(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of t)r.add(s),JSON.stringify(e.localCache[s])!==JSON.stringify(i)&&(e.notifyListeners(s,i),n.push(s));for(const s of Object.keys(e.localCache))e.localCache[s]&&!r.has(s)&&(e.notifyListeners(s,null),n.push(s));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function Hn(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function Zn(){return(Zn=(0,r.Z)(function*(e){return(yield D(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gn(e){return new Promise((t,n)=>{const r=document.createElement("script");var s,i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(i=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==i?i:document).appendChild(r)})}function Kn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Wn=1e12;class Qn{constructor(e){this.auth=e,this.counter=Wn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Yn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Wn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Wn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Wn))||void 0===n||n.execute(),""})()}}class Yn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;_(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jn=Kn("rcb"),Xn=new k(3e4,6e4);class er{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rn().grecaptcha}load(e,t=""){return _(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Rn().grecaptcha):new Promise((n,r)=>{const s=Rn().setTimeout(()=>{r(m(e,"network-request-failed"))},Xn.get());Rn()[Jn]=()=>{Rn().clearTimeout(s),delete Rn()[Jn];const i=Rn().grecaptcha;if(!i)return void r(m(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},Gn(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:Jn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(m(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Rn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tr{load(e){return(0,r.Z)(function*(){return new Qn(e)})()}clearedOneInstance(){}}const nr="recaptcha",rr={theme:"light",type:"image"};class sr{constructor(e,t=Object.assign({},rr),n){this.parameters=t,this.type=nr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ce(n),this.isInvisible="invisible"===this.parameters.size,_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tr:new er,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const s=t=>{t&&(e.tokenChangeListeners.delete(s),r(t))};e.tokenChangeListeners.add(s),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){_(!this.parameters.sitekey,this.auth,"argument-error"),_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Rn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){_(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){_(I()&&!On(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Zn.apply(this,arguments)}(e.auth);_(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return _(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ir{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ot._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function or(){return(or=(0,r.Z)(function*(e,t,n){const r=Ce(e),s=yield lr(r,t,(0,i.m9)(n));return new ir(s,e=>Pt(r,e))})).apply(this,arguments)}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);yield At(!1,r,"phone");const s=yield lr(r.auth,t,(0,i.m9)(n));return new ir(s,e=>Ft(r,e))})).apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=yield lr(r.auth,t,(0,i.m9)(n));return new ir(s,e=>Ut(r,e))})).apply(this,arguments)}function lr(e,t,n){return cr.apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){var r;const s=yield n.verify();try{let i;if(_("string"==typeof s,e,"argument-error"),_(n.type===nr,e,"argument-error"),i="string"==typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i)return _("enroll"===t.type,e,"internal-error"),(yield bn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{_("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;return _(n,e,"missing-multi-factor-info"),(yield Hn(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield et(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}})).apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t){yield Ct((0,i.m9)(e),t)})).apply(this,arguments)}let dr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ce(t)}verifyPhoneNumber(e,t){return lr(this.auth,e,(0,i.m9)(t))}static credential(e,t){return ot._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ot._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function fr(e,t){return t?S(t):(_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class pr extends Ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ye(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ye(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ye(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Ot(e.auth,new pr(e),e.bypassAuthState)}function gr(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),Nt(n,new pr(e),e.bypassAuthState)}function yr(e){return vr.apply(this,arguments)}function vr(){return(vr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),Ct(n,new pr(e),e.bypassAuthState)})).apply(this,arguments)}class _r{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return yr;case"reauthViaPopup":case"reauthViaRedirect":return gr;default:p(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new k(2e3,1e4);function br(){return(br=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,lt);const s=fr(r,n);return new Er(r,"signInViaPopup",t,s).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,lt);const s=fr(r.auth,n);return new Er(r.auth,"reauthViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}function Sr(){return(Sr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,lt);const s=fr(r.auth,n);return new Er(r.auth,"linkViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}let Er=(()=>{class e extends _r{constructor(t,n,r,s,i){super(t,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return _(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){b(1===e.filter.length,"Popup operations only handle one event");const t=xn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,wr.get())};e()}}return e.currentPopupAction=null,e})();const Ir=new Map;class Cr extends _r{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Ir.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return kr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Ir.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,r.Z)(function*(e,t){const n=Rr(t),r="true"===(yield Nr(e)._get(n));return yield Nr(e)._remove(n),r})).apply(this,arguments)}function Ar(e,t){return xr.apply(this,arguments)}function xr(){return(xr=(0,r.Z)(function*(e,t){return Nr(e)._set(Rr(t),"true")})).apply(this,arguments)}function Nr(e){return S(e._redirectPersistence)}function Rr(e){return de("pendingRedirect",e.config.apiKey,e.name)}function Or(){return(Or=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,lt);const s=fr(r,n);return yield Ar(s,r),s._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,lt);const s=fr(r.auth,n);yield Ar(s,r.auth);const o=yield Ur(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,lt);const s=fr(r.auth,n);yield At(!1,r,t.providerId),yield Ar(s,r.auth);const o=yield Ur(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t){return yield Ce(e)._initializationPromise,Fr(e,t,!1)})).apply(this,arguments)}function Fr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t,n=!1){const r=Ce(e),s=fr(r,t),i=new Cr(r,s,n),o=yield i.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Ur(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const t=xn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class Vr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(e))}saveEventToCache(e){this.cachedEventUids.add(qr(e)),this.lastProcessedEventTime=Date.now()}}function qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function zr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Br(e){return $r.apply(this,arguments)}function $r(){return($r=(0,r.Z)(function*(e,t={}){return D(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Hr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zr=/^https?/;function Gr(){return(Gr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield Br(e);for(const r of t)try{if(Kr(r))return}catch(n){}p(e,"unauthorized-domain")})).apply(this,arguments)}function Kr(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Zr.test(n))return!1;if(Hr.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Wr=new k(3e4,6e4);function Qr(){const e=Rn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Yr=null;function Jr(e){return Yr=Yr||function(e){return new Promise((t,n)=>{var r,s,i;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(m(e,"network-request-failed"))},timeout:Wr.get()})}if(null===(s=null===(r=Rn().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Rn().gapi)||void 0===i?void 0:i.load)){const t=Kn("iframefcb");return Rn()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Gn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Yr=null,e})}(e),Yr}const Xr=new k(5e3,15e3),es={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ts=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(e){const t=e.config;_(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},s=ts.get(e.config.apiHost);s&&(r.eid=s);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}function rs(){return(rs=(0,r.Z)(function*(e){const t=yield Jr(e),n=Rn().gapi;return _(n,e,"internal-error"),t.open({where:document.body,url:ns(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:es,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const s=m(e,"network-request-failed"),i=Rn().setTimeout(()=>{r(s)},Xr.get());function o(){Rn().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const ss={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class is{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function os(e,t,n,r,s,a){_(e.config.authDomain,e,"auth-domain-config-required"),_(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:s};if(t instanceof lt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof ct){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const l=u;for(const i of Object.keys(l))void 0===l[i]&&delete l[i];return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(l).slice(1)}`}const as="webStorageSupport";class us extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new us(e)}_finalizeEnroll(e,t,n){return function(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}var ls;class cs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hs(){return window}function ds(){return(ds=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:s}=hs();b(t.sessionId,"AuthEvent did not contain a session ID");const i=yield ms(t.sessionId),o={};return Te()?o.ibi=s.packageName:_e()?o.apn=s.packageName:p(e,"operation-not-supported-in-this-environment"),s.displayName&&(o.appDisplayName=s.displayName),o.sessionId=i,os(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function fs(){return(fs=(0,r.Z)(function*(e){const{BuildInfo:t}=hs(),n={};Te()?n.iosBundleId=t.packageName:_e()?n.androidPackageName=t.packageName:p(e,"operation-not-supported-in-this-environment"),yield Br(e,n)})).apply(this,arguments)}function ps(){return(ps=(0,r.Z)(function*(e,t,n){const{cordova:r}=hs();let s=()=>{};try{yield new Promise((i,o)=>{let a=null;function u(){var e;i();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout(()=>{o(m(e,"redirect-cancelled-by-user"))},2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(u),document.addEventListener("resume",l,!1),_e()&&document.addEventListener("visibilitychange",c,!1),s=()=>{t.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{s()}})).apply(this,arguments)}function ms(e){return gs.apply(this,arguments)}function gs(){return(gs=(0,r.Z)(function*(e){const t=ys(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ys(e){if(b(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}ls="Browser",(0,o._registerComponent)(new l.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=n.options;return(e=>{_(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),_(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:s,clientPlatform:ls,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ee(ls)},i=new Ie(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(S);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,t),i})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new l.wA("auth-internal",e=>{return t=Ce(e.getProvider("auth").getImmediate()),new cs(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)("@firebase/auth","0.17.2",void 0);class vs extends Vr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function _s(e){return ws.apply(this,arguments)}function ws(){return(ws=(0,r.Z)(function*(e){const t=yield Ts()._get(Ss(e));return t&&(yield Ts()._remove(Ss(e))),t})).apply(this,arguments)}function bs(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ts(){return S(Cn)}function Ss(e){return de("authEvent",e.config.apiKey,e.name)}function Es(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,i.zd)(n.join("?"))}function Is(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function Cs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ks(e=(0,i.z$)()){return!("file:"!==Cs()&&"ionic:"!==Cs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function As(){try{const e=self.localStorage,t=xn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,i.z$)()){return(0,i.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,i.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,i.hl)()}catch(e){return xs()&&(0,i.hl)()}return!1}function xs(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ns(){return("http:"===Cs()||"https:"===Cs()||(0,i.ru)()||ks())&&!((0,i.b$)()||(0,i.UG)())&&As()&&!xs()}function Rs(){return ks()&&"undefined"!=typeof document}function Os(){return(Os=(0,r.Z)(function*(){return!!Rs()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Ds={LOCAL:"local",NONE:"none",SESSION:"session"},Ps=_,Ls="persistence";function Fs(e){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Us(),n=de(Ls,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function Us(){return"undefined"!=typeof window?window:null}const js=_;class Vs{constructor(){this.browserResolver=S(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Fr}_openPopup(e,t,n,s){var o=this;return(0,r.Z)(function*(){var r;b(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=os(e,t,n,E(),s);return function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const l=Object.assign(Object.assign({},ss),{width:r.toString(),height:s.toString(),top:o,left:a}),c=(0,i.z$)().toLowerCase();n&&(u=ye(c)?"_blank":n),me(c)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,i.z$)()){var t;return Te(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new is(null);const d=window.open(t||"",u,h);_(d,e,"popup-blocked");try{d.focus()}catch(f){}return new is(d)}(e,a,xn())})()}_openRedirect(e,t,n,s){var i=this;return(0,r.Z)(function*(){var r;return yield i._originValidation(e),r=os(e,t,n,E(),s),Rn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return rs.apply(this,arguments)}(e),r=new Vr(e);return n.register("authEvent",t=>(_(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(as,{type:as},n=>{var r;const s=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==s&&t(!!s),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Gr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Se()||ge()||Te()}}),this.cordovaResolver=S(class{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new vs(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){p(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,s){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,s,i,o,a,u,l,c;const h=hs();_("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_("function"==typeof(null===(i=null===(s=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===s?void 0:s.browsertab)||void 0===i?void 0:i.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_("function"==typeof(null===(c=null===(l=null==h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Ir.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:bs(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,s);yield function(e,t){return Ts()._set(Ss(e),t)}(e,a);const u=yield function(e,t,n){return ds.apply(this,arguments)}(e,a,t),l=yield function(e){const{cordova:t}=hs();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let s=null;r?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,function(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(s)})})}(u);return function(e,t,n){return ps.apply(this,arguments)}(e,r,l)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fs.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:s,BuildInfo:i}=hs(),o=setTimeout((0,r.Z)(function*(){yield _s(e),t.onEvent(Is())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield _s(e);let s=null;r&&(null==n?void 0:n.url)&&(s=function(e,t){var n,r;const s=function(e){const t=Es(e),n=t.link?decodeURIComponent(t.link):void 0,r=Es(n).link,s=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Es(s).link||s||r||n||e}(t);if(s.includes("/__/auth/callback")){const t=Es(s),i=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==i?void 0:i.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?m(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:s,postBody:null}}return null}(r,n.url)),t.onEvent(s||Is())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=s,l=`${i.packageName.toLowerCase()}://`;hs().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(l)&&a({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,s){var i=this;return(0,r.Z)(function*(){return yield i.selectUnderlyingResolver(),i.assertedUnderlyingResolver._openPopup(e,t,n,s)})()}_openRedirect(e,t,n,s){var i=this;return(0,r.Z)(function*(){return yield i.selectUnderlyingResolver(),i.assertedUnderlyingResolver._openRedirect(e,t,n,s)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Rs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return js(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Os.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function qs(e){return e.unwrap()}function zs(e){return $s(e)}function Bs(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ws(e,function(e,t){var n;const r=(0,i.m9)(e),s=t;return _(t.operationType,r,"argument-error"),_(null===(n=s.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),wn._fromError(r,s)}(e,t));else if(r){const e=$s(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function $s(e){const{_tokenResponse:t}=e instanceof i.ZR?e.customData:e;if(!t)return null;if(!(e instanceof i.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return dr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=ft;break;case"facebook.com":r=dt;break;case"github.com":r=pt;break;case"twitter.com":r=gt;break;default:const{oauthIdToken:e,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:o,nonce:a}=t;return s||i||e||o?o?n.startsWith("saml.")?mt._create(n,o):Xe._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:s}):new ht(n).credential({idToken:e,accessToken:s,rawNonce:a}):null}return e instanceof i.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Hs(e,t){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,r.Z)(function*(e,t){let n;try{n=yield t}catch(o){throw o instanceof i.ZR&&Bs(e,o),o}const{operationType:r,user:s}=n;return{operationType:r,credential:zs(n),additionalUserInfo:vn(n),user:Qs.getOrCreate(s)}})).apply(this,arguments)}function Gs(e,t){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Hs(e,n.confirm(t))}})).apply(this,arguments)}class Ws{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Hs(qs(this.auth),this.resolver.resolveSignIn(e))}}class Qs{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,i.m9)(e);return Sn.has(t)||Sn.set(t,Tn._fromUser(t)),Sn.get(t)}(e)}static getOrCreate(e){return Qs.USER_MAP.has(e)||Qs.USER_MAP.set(e,new Qs(e)),Qs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Hs(t.auth,Ft(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Gs(n.auth,function(e,t,n){return ar.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Hs(t.auth,function(e,t,n){return Sr.apply(this,arguments)}(t._delegate,e,Vs))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Fs(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vs)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Hs(t.auth,Ut(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Gs(this.auth,function(e,t,n){return ur.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Hs(this.auth,function(e,t,n){return Tr.apply(this,arguments)}(this._delegate,e,Vs))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Fs(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vs)})()}sendEmailVerification(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return It.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return cn((0,i.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return cn((0,i.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return hr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return ln.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return on.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qs.USER_MAP=new WeakMap;const Ys=_;let Js=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ys(n,"invalid-api-key",{appName:e.name});let r=[he];if("undefined"!=typeof window){r=function(e,t){const n=Us();if(!(null==n?void 0:n.sessionStorage))return[];const r=de(Ls,e,t);switch(n.sessionStorage.getItem(r)){case Ds.NONE:return[he];case Ds.LOCAL:return[$n,kn];case Ds.SESSION:return[kn];default:return[]}}(n,e.name);for(const e of[$n,Cn,kn])r.includes(e)||r.push(e)}Ys(n,"invalid-api-key",{appName:e.name});const s="undefined"!=typeof window?Vs:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:s}}),this._delegate._updateErrorMap(c),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ce(e);_(r._canInitEmulator,r,"emulator-config-failed"),_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),i=Ae(t),{host:o,port:a}=function(e){const t=Ae(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:xe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:xe(t)}}}(t);r.config.emulator={url:`${i}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(s)}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Kt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Wt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Gt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Hs(n._delegate,function(e,t,n){return Jt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return rn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=at.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Ys(Ns(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Lr.apply(this,arguments)}(e._delegate,Vs);return t?Hs(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ce(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:s,complete:i}=Xs(e,t,n);return this._delegate.onAuthStateChanged(r,s,i)}onIdTokenChanged(e,t,n){const{next:r,error:s,complete:i}=Xs(e,t,n);return this._delegate.onIdTokenChanged(r,s,i)}sendSignInLinkToEmail(e,t){return function(e,t,n){return Xt.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Zt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Ps(Object.values(Ds).includes(t),e,"invalid-persistence-type"),(0,i.b$)()?Ps(t!==Ds.SESSION,e,"unsupported-persistence-type"):(0,i.UG)()?Ps(t===Ds.NONE,e,"unsupported-persistence-type"):xs()?Ps(t===Ds.NONE||t===Ds.LOCAL&&(0,i.hl)(),e,"unsupported-persistence-type"):Ps(t===Ds.NONE||As(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Ds.SESSION:n=kn;break;case Ds.LOCAL:n=(yield S($n)._isAvailable())?$n:Cn;break;case Ds.NONE:n=he;break;default:return p("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Hs(this._delegate,function(e){return bt.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Hs(this._delegate,Pt(this._delegate,e))}signInWithCustomToken(e){return Hs(this._delegate,function(e,t){return zt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Hs(this._delegate,function(e,t,n){return Pt((0,i.m9)(e),ut.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Hs(this._delegate,function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Gs(this._delegate,function(e,t,n){return or.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Ys(Ns(),t._delegate,"operation-not-supported-in-this-environment"),Hs(t._delegate,function(e,t,n){return br.apply(this,arguments)}(t._delegate,e,Vs))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Ys(Ns(),t._delegate,"operation-not-supported-in-this-environment"),yield Fs(t._delegate),function(e,t,n){return function(e,t,n){return Or.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vs)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Yt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Ds,e})();function Xs(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const s=r;return{next:e=>s(e&&Qs.getOrCreate(e)),error:t,complete:n}}class ei{constructor(){this.providerId="phone",this._delegate=new dr(qs(s.Z.auth()))}static credential(e,t){return dr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ei.PHONE_SIGN_IN_METHOD=dr.PHONE_SIGN_IN_METHOD,ei.PROVIDER_ID=dr.PROVIDER_ID;const ti=_;var ni;(ni=s.Z).INTERNAL.registerComponent(new l.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Js(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ut,FacebookAuthProvider:dt,GithubAuthProvider:pt,GoogleAuthProvider:ft,OAuthProvider:ht,PhoneAuthProvider:ei,PhoneMultiFactorGenerator:class{constructor(){}static assertion(e){return us._fromCredential(e)}},RecaptchaVerifier:class{constructor(e,t,n=s.Z.app()){var r;ti(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:gt,Auth:Js,AuthCredential:Ne,Error:i.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ni.registerVersion("@firebase/auth-compat","0.1.2")},6215:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(9765),s=n(7971);class i extends r.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.N;return this._value}next(e){super.next(this._value=e)}}},7574:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(7393),s=n(9181),i=n(6490),o=n(6554),a=n(4487),u=n(2494);let l=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[s.b])return e[s.b]()}return e||t||n?new r.L(e,t,n):new r.L(i.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:s}=e;if(t||s)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=c(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(s){n(s),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=c(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function c(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(2494),s=n(4449);const i={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,s.z)(e)},complete(){}}},5197:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var r=n(7393);class s extends r.L{notifyNext(e,t,n,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}},9765:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>l,xQ:()=>c});var r=n(7574),s=n(7393),i=n(5319),o=n(7971),a=n(8858),u=n(9181);class l extends s.L{constructor(e){super(e),this.destination=e}}let c=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new l(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),i.w.EMPTY):this.isStopped?(e.complete(),i.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends c{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):i.w.EMPTY}}},8858:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n(5319);class s extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:(e,t,n)=>{"use strict";n.d(t,{L:()=>l});var r=n(9105),s=n(6490),i=n(5319),o=n(9181),a=n(2494),u=n(4449);class l extends i.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.c;break;case 1:if(!e){this.destination=s.c;break}if("object"==typeof e){e instanceof l?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new l(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class c extends l{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==s.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(9796),s=n(1555),i=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,i.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof o?l(h.errors):[h]}}if((0,r.k)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if((0,s.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(l(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var u;function l(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(7393),s=n(7574),i=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof s.y)return e.subscribe(t);let n;try{n=(0,i.s)(e)(t)}catch(r){t.error(r)}return n}},2441:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>u});var r=n(9765),s=n(7574),i=n(5319),o=n(1307);class a extends s.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new i.w,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed&&(this._connection=null,e=i.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class l extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9112:(e,t,n)=>{"use strict";n.d(t,{aj:()=>l});var r=n(4869),s=n(9796),i=n(5197),o=n(509),a=n(6693);const u={};function l(...e){let t,n;return(0,r.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,s.k)(e[0])&&(e=e[0]),(0,a.n)(e,n).lift(new c(t))}class c{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new h(e,this.resultSelector))}}class h extends i.L{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(u),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add((0,o.D)(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,s=this.toRespond?r[n]===u?--this.toRespond:this.toRespond:0;r[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},8071:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(5917),s=n(3282);function i(...e){return(0,s.J)(1)((0,r.of)(...e))}},9193:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,c:()=>i});var r=n(7574);const s=new r.y(e=>e.complete());function i(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):s}},4402:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(7574),s=n(7444),i=n(5319),o=n(6554),a=n(4087),u=n(377),l=n(4072),c=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new i.w;return r.add(t.schedule(()=>{const s=e[o.L]();r.add(s.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,l.t)(e))return function(e,t){return new r.y(n=>{const r=new i.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,c.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new i.w;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(t.schedule(()=>{s=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=s.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,s.s)(e))}},6693:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(7574),s=n(5015),i=n(4087);function o(e,t){return t?(0,i.r)(e,t):new r.y((0,s.V)(e))}},6682:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(7574),s=n(4869),i=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,s.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,i.J)(t)((0,o.n)(e,n))}},5917:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(4869),s=n(6693),i=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,i.r)(e,t)):(0,s.n)(e)}},4612:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var r=n(9773);function s(e,t){return(0,r.zg)(e,t,1)}},5242:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(7393);function s(e=null){return t=>t.lift(new i(e))}class i{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new o(e,this.defaultValue))}}class o extends r.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(7393);function s(e,t){return function(n){return n.lift(new i(e,t))}}class i{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.predicate,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},8049:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var r=n(3410),s=n(5435),i=n(5257),o=n(5242),a=n(4635),u=n(4487);function l(e,t){const n=arguments.length>=2;return l=>l.pipe(e?(0,s.h)((t,n)=>e(t,n,l)):u.y,(0,i.q)(1),n?(0,o.d)(t):(0,a.T)(()=>new r.K))}},8002:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var r=n(7393);function s(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new i(e,t))}}class i{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var r=n(9773),s=n(4487);function i(e=Number.POSITIVE_INFINITY){return(0,r.zg)(s.y,e)}},9773:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(8002),s=n(4402),i=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(o((n,i)=>(0,s.D)(e(n,i)).pipe((0,r.U)((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends i.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new i.IY(this),n=this.destination;n.add(t);const r=(0,i.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(e,t,n)=>{"use strict";n.d(t,{ht:()=>c,QV:()=>u});var r=n(7393),s=n(9193),i=n(5917),o=n(7574);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,s.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function u(e,t=0){return function(n){return n.lift(new l(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class l{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new c(e,this.scheduler,this.delay))}}class c extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(c.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},1307:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(7393);function s(){return function(e){return e.lift(new i(e))}}class i{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),s=t.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2145:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});var r=n(7393);function s(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new i(e,t,n))}}class i{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new o(e,this.accumulator,this.seed,this.hasSeed))}}class o extends r.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},9761:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var r=n(8071),s=n(4869);function i(...e){const t=e[e.length-1];return(0,s.K)(t)?(e.pop(),n=>(0,r.z)(e,n,t)):t=>(0,r.z)(e,t)}},3101:(e,t,n)=>{"use strict";n.d(t,{R:()=>p});var r=n(7574);let s=1;const i=Promise.resolve(),o={};function a(e){return e in o&&(delete o[e],!0)}const u={setImmediate(e){const t=s++;return o[t]=!0,i.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var l=n(6465),c=n(6102);const h=new class extends c.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,s=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,n){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends l.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=u.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(u.clearImmediate(t),e.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(e,t=0,n=h){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,((0,d.k)(r=t)||!(r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(e,t=0,n=h){return new f(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function p(e,t=0){return function(n){return n.lift(new m(e,t))}}class m{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new f(t,this.delay,this.scheduler).subscribe(e)}}},3190:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8002),s=n(4402),i=n(5345);function o(e,t){return"function"==typeof t?n=>n.pipe(o((n,i)=>(0,s.D)(e(n,i)).pipe((0,r.U)((e,r)=>t(n,e,i,r))))):t=>t.lift(new a(e))}class a{constructor(e){this.project=e}call(e,t){return t.subscribe(new u(e,this.project))}}class u extends i.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new i.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,i.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}},5257:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(7393),s=n(7108),i=n(9193);function o(e){return t=>0===e?(0,i.c)():t.lift(new a(e))}class a{constructor(e){if(this.total=e,this.total<0)throw new s.W}call(e,t){return t.subscribe(new u(e,this.total))}}class u extends r.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}},3342:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(7393);function s(){}var i=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=s,this._tapError=s,this._tapComplete=s,this._tapError=n||s,this._tapComplete=r||s,(0,i.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||s,this._tapError=t.error||s,this._tapComplete=t.complete||s)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4635:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(3410),s=n(7393);function i(e=u){return t=>t.lift(new o(e))}class o{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new a(e,this.errorFactory))}}class a extends s.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function u(){return new r.K}},4087:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(7574),s=n(5319);function i(e,t){return new r.y(n=>{const r=new s.w;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var r=n(5319);class s extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class i extends s{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(s){r=!0,n=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class s extends r{constructor(e,t=r.now){super(e,()=>s.delegate&&s.delegate!==this?s.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return s.delegate&&s.delegate!==this?s.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},3637:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(6465);const s=new(n(6102).v)(r.o)},7771:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,N:()=>i});var r=n(6465),s=n(6102);const i=new class extends s.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=i},377:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})()},3410:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})()},7971:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},4487:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},9796:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},1555:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},4072:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},4869:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},7444:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(5015),s=n(4449),i=n(377),o=n(6554),a=n(9489),u=n(4072),l=n(1555);const c=e=>{if(e&&"function"==typeof e[o.L])return c=e,e=>{const t=c[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s.z),e);if(e&&"function"==typeof e[i.hZ])return t=e,e=>{const n=t[i.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,l.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,c}},5015:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},509:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(7393);class s extends r.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var i=n(7444),o=n(7574);function a(e,t,n,r,a=new s(e,n,r)){if(!a.closed)return t instanceof o.y?t.subscribe(a):(0,i.s)(t)(a)}},7556:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var r=n(7841),s=n(6215),i=n(3018),o=n(8006),a=n(5391),u=n(906);let l=(()=>{class e{constructor(e,t,n){this.afAuth=e,this.afStore=t,this.router=n,this.user$=new s.X(null),this.afAuth.authState.subscribe(e=>{this.setCurrentUser(e),e?(this.userData=e,localStorage.setItem("user",JSON.stringify(e))):localStorage.removeItem("user")})}signIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(e=>{e.user&&this.setUserData(e.user)}).catch(e=>console.error(e))}signUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(e=>{e.user&&(this.sendVerificationEmail(),this.setUserData(e.user))})}sendVerificationEmail(){return this.afAuth.currentUser.then(e=>{e&&e.sendEmailVerification().then(()=>{console.log("Verification email has been sent")})})}forgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{console.log("Password reset email sent, check your inbox.")}).catch(e=>console.error(e))}authLogin(e){return this.afAuth.signInWithPopup(e).then(e=>{e.user&&(this.setUserData(e.user),this.router.navigateByUrl("/"))}).catch(e=>console.error(e))}googleAuth(){return this.authLogin(new r.Z.auth.GoogleAuthProvider)}signOut(){return this.afAuth.signOut().then(()=>{this.user$.next(null),this.router.navigateByUrl("/auth"),localStorage.removeItem("user")})}setUserData(e){var t,n;const r=this.afStore.doc(`users/${e.uid}`),s={id:e.uid,email:null!==(t=e.email)&&void 0!==t?t:"",name:null!==(n=e.displayName)&&void 0!==n?n:""};return this.user$.next(s),r.set(s,{merge:!0})}setCurrentUser(e){var t,n;if(e){const r={id:e.uid,email:null!==(t=e.email)&&void 0!==t?t:"",name:null!==(n=e.displayName)&&void 0!==n?n:""};this.user$.next(r)}else this.user$.next(null)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o.zQ),i.LFG(a.ST),i.LFG(u.F0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2340:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r={production:!0,apis:{api:"https://jsonplaceholder.typicode.com"},firebaseConfig:{apiKey:"AIzaSyAjk0dHuqrMraRaBcNrffwTowr61FUEEaU",authDomain:"posts-df862.firebaseapp.com",projectId:"posts-df862",storageBucket:"posts-df862.appspot.com",messagingSenderId:"387517074600",appId:"1:387517074600:web:d751fd05559ad87798069d"}}},3674:(e,t,n)=>{"use strict";var r=n(8583),s=n(3018);class i extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends i{static makeCurrent(){(0,r.HT)(new o)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(u=u||document.querySelector("base"),u?u.getAttribute("href"):null);return null==t?null:function(e){a=a||document.createElement("a"),a.setAttribute("href",e);const t=a.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,r.Mx)(document.cookie,e)}}let a,u=null;const l=new s.OlP("TRANSITION_ID"),c=[{provide:s.ip1,useFactory:function(e,t,n){return()=>{n.get(s.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[l,r.K0,s.zs3],multi:!0}];class h{static init(){(0,s.VLi)(new h)}addToWindow(e){s.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},s.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(e=>{const t=s.dqk.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:n?(0,r.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let d=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const f=new s.OlP("EventManagerPlugins");let p=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(f),s.LFG(s.R0b))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class m{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const s=(0,r.q)().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,n)}}let g=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e extends g{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(v),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(v))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.K0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();function v(e){(0,r.q)().remove(e)}const _={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},w=/%COMP%/g;function b(e,t,n){for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?b(e,s,n):(s=s.replace(w,e),n.push(s))}return n}function T(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let S=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new E(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case s.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new I(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case s.ifc.ShadowDom:return new C(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=b(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(p),s.LFG(y),s.LFG(s.AFp))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class E{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(_[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=_[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=_[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(s.JOm.DashCase|s.JOm.Important)?e.style.setProperty(t,n,r&s.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&s.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,T(n)):this.eventManager.addEventListener(e,t,T(n))}}class I extends E{constructor(e,t,n,r){super(e),this.component=n;const s=b(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(w,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(w,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class C extends E{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=b(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const e=document.createElement("style");e.textContent=s[i],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let k=(()=>{class e extends m{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.K0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const A=["alt","control","meta","shift"],x={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},R={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let O=(()=>{class e extends m{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,s){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(n.pop());let i="";if(A.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),i+=e+".")}),i+=s,0!=n.length||0===s.length)return null;const o={};return o.domEventName=r,o.fullKey=i,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&N.hasOwnProperty(t)&&(t=N[t]))}return x[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),A.forEach(r=>{r!=n&&(0,R[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return s=>{e.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.K0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const D=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:r.bD},{provide:s.g9A,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,s.RDi)(document),document},deps:[]}]),P=[[],{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function(){return new s.qLn},deps:[]},{provide:f,useClass:k,multi:!0,deps:[r.K0,s.R0b,s.Lbi]},{provide:f,useClass:O,multi:!0,deps:[r.K0]},[],{provide:S,useClass:S,deps:[p,y,s.AFp]},{provide:s.FYo,useExisting:S},{provide:g,useExisting:y},{provide:y,useClass:y,deps:[r.K0]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:p,useClass:p,deps:[f,s.R0b]},{provide:r.JF,useClass:d,deps:[]},[]];let L=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:s.AFp,useValue:t.appId},{provide:l,useExisting:s.AFp},c]}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(e,12))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:P,imports:[r.ez,s.hGG]}),e})();"undefined"!=typeof window&&window;var F=n(7238);function M(){return"undefined"!=typeof window&&void 0!==window.document}function U(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function j(e){switch(e.length){case 0:return new F.ZN;case 1:return e[0];default:return new F.ZE(e)}}function V(e,t,n,r,s={},i={}){const o=[],a=[];let u=-1,l=null;if(r.forEach(e=>{const n=e.offset,r=n==u,c=r&&l||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case F.k1:a=s[n];break;case F.l3:a=i[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}c[r]=a}),r||a.push(c),l=c,u=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function q(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&z(n,"start",e)));break;case"done":e.onDone(()=>r(n&&z(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&z(n,"destroy",e)))}}function z(e,t,n){const r=n.totalTime,s=B(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),i=e._data;return null!=i&&(s._data=i),s}function B(e,t,n,r,s="",i=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:s,totalTime:i,disabled:!!o}}function $(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function H(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let Z=(e,t)=>!1,G=(e,t)=>!1,K=(e,t,n)=>[];const W=U();(W||"undefined"!=typeof Element)&&(Z=M()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),G=(()=>{if(W||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):G}})(),K=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let Q=null,Y=!1;function J(e){Q||(Q=("undefined"!=typeof document?document.body:null)||{},Y=!!Q.style&&"WebkitAppearance"in Q.style);let t=!0;return Q.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Q.style,!t&&Y)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Q.style),t}const X=G,ee=Z,te=K;function ne(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let re=(()=>{class e{validateStyleProperty(e){return J(e)}matchesElement(e,t){return X(e,t)}containsElement(e,t){return ee(e,t)}query(e,t,n){return te(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,s,i=[],o){return new F.ZN(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class se{}se.NOOP=new re;const ie="ng-enter",oe="ng-leave",ae="ng-trigger",ue=".ng-trigger",le="ng-animating",ce=".ng-animating";function he(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:de(parseFloat(t[1]),t[2])}function de(e,t){switch(t){case"s":return 1e3*e;default:return e}}function fe(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,s=0,i="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=de(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(s=de(parseFloat(o),n[4]));const a=n[5];a&&(i=a)}else r=e;if(!n){let n=!1,i=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(i,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:s,easing:i}}(e,t,n)}function pe(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function me(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else pe(e,n);return n}function ge(e,t,n){return n?t+":"+n+";":""}function ye(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=ge(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=ge(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function ve(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const s=Ce(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[s]),e.style[s]=t[r]}),U()&&ye(e))}function _e(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=Ce(t);e.style[n]=""}),U()&&ye(e))}function we(e){return Array.isArray(e)?1==e.length?e[0]:(0,F.vP)(e):e}const be=new RegExp("{{\\s*(.+?)\\s*}}","g");function Te(e){let t=[];if("string"==typeof e){let n;for(;n=be.exec(e);)t.push(n[1]);be.lastIndex=0}return t}function Se(e,t,n){const r=e.toString(),s=r.replace(be,(e,r)=>{let s=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),s=""),s.toString()});return s==r?e:s}function Ee(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const Ie=/-+([a-z0-9])/g;function Ce(e){return e.replace(Ie,(...e)=>e[1].toUpperCase())}function ke(e,t){return 0===e||0===t}function Ae(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let i=t[0],o=[];if(r.forEach(e=>{i.hasOwnProperty(e)||o.push(e),i[e]=n[e]}),o.length)for(var s=1;s<t.length;s++){let n=t[s];o.forEach(function(t){n[t]=Ne(e,t)})}}return t}function xe(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function Ne(e,t){return window.getComputedStyle(e)[t]}const Re="*";function Oe(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const s=r[1],i=r[2],o=r[3];t.push(Le(s,o)),"<"!=i[0]||s==Re&&o==Re||t.push(Le(o,s))}(e,n,t)):n.push(e),n}const De=new Set(["true","1"]),Pe=new Set(["false","0"]);function Le(e,t){const n=De.has(e)||Pe.has(e),r=De.has(t)||Pe.has(t);return(s,i)=>{let o=e==Re||e==s,a=t==Re||t==i;return!o&&n&&"boolean"==typeof s&&(o=s?De.has(e):Pe.has(e)),!a&&r&&"boolean"==typeof i&&(a=i?De.has(t):Pe.has(t)),o&&a}}const Fe=new RegExp("s*:selfs*,?","g");function Me(e,t,n){return new Ue(e).build(t,n)}class Ue{constructor(e){this._driver=e}build(e,t){const n=new je(t);return this._resetContextStyleTimingState(n),xe(this,we(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],i=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,s.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const s=this.visitTransition(e,t);n+=s.queryCount,r+=s.depCount,i.push(s)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:i,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,i=r||{};if(n.styles.forEach(e=>{if(Ve(e)){const t=e;Object.keys(t).forEach(e=>{Te(t[e]).forEach(e=>{i.hasOwnProperty(e)||s.add(e)})})}}),s.size){const n=Ee(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=xe(this,we(e.animation),t);return{type:1,matchers:Oe(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:qe(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>xe(this,e,t)),options:qe(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(e=>{t.currentTime=n;const s=xe(this,e,t);return r=Math.max(r,t.currentTime),s});return t.currentTime=r,{type:3,steps:s,options:qe(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return ze(fe(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=ze(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||fe(r,t),ze(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let s=e.styles?e.styles:(0,F.oB)({});if(5==s.type)r=this.visitKeyframes(s,t);else{let s=e.styles,i=!1;if(!s){i=!0;const e={};n.easing&&(e.easing=n.easing),s=(0,F.oB)(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(s,t);o.isEmptyStep=i,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==F.l3?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,s=null;return n.forEach(e=>{if(Ve(e)){const t=e,n=t.easing;if(n&&(s=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const i=t.collectedStyles[t.currentQuerySelector],o=i[n];let a=!0;o&&(s!=r&&s>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),a=!1),s=o.startTime),a&&(i[n]={startTime:s,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},s=Te(e);s.length&&s.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const s=[];let i=!1,o=!1,a=0;const u=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let u=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(Ve(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(Ve(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),l=0;return null!=u&&(r++,l=n.offset=u),o=o||l<0||l>1,i=i||l<a,a=l,s.push(l),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),i&&t.errors.push("Please ensure that all keyframe offsets are in order");const l=e.steps.length;let c=0;r>0&&r<l?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(l-1));const h=l-1,d=t.currentTime,f=t.currentAnimateTimings,p=f.duration;return u.forEach((e,r)=>{const i=c>0?r==h?1:c*r:s[r],o=i*p;t.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(e,t),e.offset=i,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:xe(this,we(e.animation),t),options:qe(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qe(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qe(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,i]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(Fe,"")),[e=e.replace(/@\*/g,ue).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,ce),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,$(t.collectedStyles,t.currentQuerySelector,{});const o=xe(this,we(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:i,animation:o,originalSelector:e.selector,options:qe(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:fe(e.timings,t.errors,!0);return{type:12,animation:xe(this,we(e.animation),t),timings:n,options:null}}}class je{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ve(e){return!Array.isArray(e)&&"object"==typeof e}function qe(e){var t;return e?(e=pe(e)).params&&(e.params=(t=e.params)?pe(t):null):e={},e}function ze(e,t,n){return{duration:e,delay:t,easing:n}}function Be(e,t,n,r,s,i,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:s,delay:i,totalTime:s+i,easing:o,subTimeline:a}}class $e{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const He=new RegExp(":enter","g"),Ze=new RegExp(":leave","g");function Ge(e,t,n,r,s,i={},o={},a,u,l=[]){return(new Ke).buildKeyframes(e,t,n,r,s,i,o,a,u,l)}class Ke{buildKeyframes(e,t,n,r,s,i,o,a,u,l=[]){u=u||new $e;const c=new Qe(e,t,u,r,s,l,[]);c.options=a,c.currentTimeline.setStyles([i],null,c.errors,a),xe(this,n,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,c.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[Be(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,i=this._visitSubInstructions(n,r,r.options);s!=i&&t.transformIntoNewTimeline(i)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const s=null!=n.duration?he(n.duration):null,i=null!=n.delay?he(n.delay):null;return 0!==s&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,s,i);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),xe(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=We);const e=he(s.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>xe(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?he(e.options.delay):0;e.steps.forEach(i=>{const o=t.createSubContext(e.options);s&&o.delayNextStep(s),xe(this,i,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return fe(t.params?Se(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,i=t.createSubContext().currentTimeline;i.easing=n.easing,e.styles.forEach(e=>{i.forwardTime((e.offset||0)*s),i.setStyles(e.styles,e.easing,t.errors,t.options),i.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(i),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?he(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=We);let i=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);s&&o.delayNextStep(s),n===t.element&&(a=o.currentTimeline),xe(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(i),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,i=Math.abs(s.duration),o=i*(t.currentQueryTotal-1);let a=i*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=t.currentTimeline;a&&u.delayNextStep(a);const l=u.currentTime;xe(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}const We={};class Qe{constructor(e,t,n,r,s,i,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=We,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Ye(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=he(n.duration)),null!=n.delay&&(r.delay=he(n.delay));const s=n.params;if(s){let e=r.params;e||(e=this.options.params={}),Object.keys(s).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=Se(s[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new Qe(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=We,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},s=new Je(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,i){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(He,"."+this._enterClassName)).replace(Ze,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return s||0!=o.length||i.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class Ye{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ye(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||F.l3,this._currentKeyframe[e]=F.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},i=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=F.l3})):me(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(i).forEach(e=>{const t=Se(i[e],s,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:F.l3),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((s,i)=>{const o=me(s,!0);Object.keys(o).forEach(n=>{const r=o[n];r==F.k1?e.add(n):r==F.l3&&t.add(n)}),n||(o.offset=i/this.duration),r.push(o)});const s=e.size?Ee(e.values()):[],i=t.size?Ee(t.values()):[];if(n){const e=r[0],t=pe(e);e.offset=0,t.offset=1,r=[e,t]}return Be(this.element,r,s,i,this.duration,this.startTime,this.easing,!1)}}class Je extends Ye{constructor(e,t,n,r,s,i,o=!1){super(e,t,i.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],i=n+t,o=t/i,a=me(e[0],!1);a.offset=0,s.push(a);const u=me(e[0],!1);u.offset=Xe(o),s.push(u);const l=e.length-1;for(let r=1;r<=l;r++){let o=me(e[r],!1);o.offset=Xe((t+o.offset*n)/i),s.push(o)}n=i,t=0,r="",e=s}return Be(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Xe(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class et{}class tt extends et{normalizePropertyName(e,t){return Ce(e)}normalizeStyleValue(e,t,n,r){let s="";const i=n.toString().trim();if(nt[t]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return i+s}}const nt=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rt(e,t,n,r,s,i,o,a,u,l,c,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:s,fromState:n,fromStyles:i,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:d}}const st={};class it{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,s){return e.some(e=>e(t,n,r,s))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],s=this._stateStyles[e],i=r?r.buildStyles(t,n):{};return s?s.buildStyles(t,n):i}build(e,t,n,r,s,i,o,a,u,l){const c=[],h=this.ast.options&&this.ast.options.params||st,d=this.buildStyles(n,o&&o.params||st,c),f=a&&a.params||st,p=this.buildStyles(r,f,c),m=new Set,g=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},w=l?[]:Ge(e,t,this.ast.animation,s,i,d,p,_,u,c);let b=0;if(w.forEach(e=>{b=Math.max(e.duration+e.delay,b)}),c.length)return rt(t,this._triggerName,n,r,v,d,p,[],[],g,y,b,c);w.forEach(e=>{const n=e.element,r=$(g,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const s=$(y,n,{});e.postStyleProps.forEach(e=>s[e]=!0),n!==t&&m.add(n)});const T=Ee(m.values());return rt(t,this._triggerName,n,r,v,d,p,w,T,g,y,b)}}class ot{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},r=pe(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const s=e;Object.keys(s).forEach(e=>{let i=s[e];i.length>1&&(i=Se(i,r,t));const o=this.normalizer.normalizePropertyName(e,t);i=this.normalizer.normalizeStyleValue(e,o,i,t),n[o]=i})}}),n}}class at{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new ot(e.style,e.options&&e.options.params||{},n)}),ut(this.states,"true","1"),ut(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new it(e,t,this.states))}),this.fallbackTransition=new it(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(s=>s.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function ut(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const lt=new $e;class ct{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=Me(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,s=V(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations[e];let i;const o=new Map;if(s?(i=Ge(this._driver,t,s,ie,oe,{},{},n,lt,r),i.forEach(e=>{const t=$(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),i=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,F.l3)})});const a=j(i.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const s=B(t,"","","");return q(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const ht="ng-animate-queued",dt="ng-animate-disabled",ft=".ng-animate-disabled",pt=[],mt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class yt{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=pe(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const vt="void",_t=new yt(vt);class wt{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,kt(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(s=n)&&"done"!=s)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var s;const i=$(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};i.push(o);const a=$(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(kt(e,ae),kt(e,"ng-trigger-"+t),a[t]=_t),()=>{this._engine.afterFlush(()=>{const e=i.indexOf(o);e>=0&&i.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),i=new Tt(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(kt(e,ae),kt(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const u=new yt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[t]=u,a||(a=_t),u.value!==vt&&a.value===u.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let s=0;s<n.length;s++){const r=n[s];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,u.params)){const t=[],n=s.matchStyles(a.value,a.params,t),r=s.matchStyles(u.value,u.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{_e(e,n),ve(e,r)})}return}const l=$(this._engine.playersByElement,e,[]);l.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let c=s.matchTransition(a.value,u.value,e,u.params),h=!1;if(!c){if(!r)return;c=s.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:c,fromState:a,toState:u,player:i,isFallbackTransition:h}),h||(kt(e,ht),i.onStart(()=>{At(e,ht)})),i.onDone(()=>{let t=this.players.indexOf(i);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(i);e>=0&&n.splice(e,1)}}),this.players.push(i),l.push(i),i}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,ue,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e);if(s){const i=[];if(Object.keys(s).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,vt,r);n&&i.push(n)}}),i.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&j(i).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const s=t.name;if(r.has(s))return;r.add(s);const i=this._triggers[s].fallbackTransition,o=n[s]||_t,a=new yt(vt),u=new Tt(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:i,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==mt||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){kt(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,i=this._elementListeners.get(s);i&&i.forEach(t=>{if(t.name==n.triggerName){const r=B(s,n.triggerName,n.fromState.value,n.toState.value);r._data=e,q(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class bt{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new wt(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const s=n[e[r]].namespaceId;if(s){const e=this._fetchNamespace(s);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(St(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!St(t))return;const s=t.__ng_removed;if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),kt(e,dt)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),At(e,dt))}removeNode(e,t,n,r){if(St(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,s){return St(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,ue,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ce,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return j(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=mt,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,ft)&&this.markElementAsDisabled(e,!1),this.driver.query(e,ft,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)kt(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?j(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new $e,r=[],s=new Map,i=[],o=new Map,a=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(e=>{l.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)l.add(t[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Ct(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((e,t)=>{const n=ie+p++;f.set(t,n),e.forEach(e=>kt(e,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const e=this.collectedLeaveElements[N],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):y.add(e))}const v=new Map,_=Ct(h,Array.from(g));_.forEach((e,t)=>{const n=oe+p++;v.set(t,n),e.forEach(e=>kt(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=f.get(t);e.forEach(e=>At(e,n))}),_.forEach((e,t)=>{const n=v.get(t);e.forEach(e=>At(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const w=[],b=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(e=>{const t=e.player,s=e.element;if(w.push(t),this.collectedEnterElements.length){const e=s.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const l=!c||!this.driver.containsElement(c,s),h=v.get(s),d=f.get(s),p=this._buildInstruction(e,n,d,h,l);if(p.errors&&p.errors.length)b.push(p);else{if(l)return t.onStart(()=>_e(s,p.fromStyles)),t.onDestroy(()=>ve(s,p.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>_e(s,p.fromStyles)),t.onDestroy(()=>ve(s,p.toStyles)),void r.push(t);p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(s,p.timelines),i.push({instruction:p,player:t,element:s}),p.queriedElements.forEach(e=>$(o,e,[]).push(t)),p.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),p.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=u.get(t);r||u.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(b.length){const e=[];b.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const T=new Map,S=new Map;i.forEach(e=>{const t=e.element;n.has(t)&&(S.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,T))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{$(T,t,[]).push(e),e.destroy()})});const E=m.filter(e=>Rt(e,a,u)),I=new Map;It(I,this.driver,y,u,F.l3).forEach(e=>{Rt(e,a,u)&&E.push(e)});const C=new Map;d.forEach((e,t)=>{It(C,this.driver,new Set(e),a,F.k1)}),E.forEach(e=>{const t=I.get(e),n=C.get(e);I.set(e,Object.assign(Object.assign({},t),n))});const k=[],A=[],x={};i.forEach(e=>{const{element:t,player:i,instruction:o}=e;if(n.has(t)){if(l.has(t))return i.onDestroy(()=>ve(t,o.toStyles)),i.disabled=!0,i.overrideTotalTime(o.totalTime),void r.push(i);let e=x;if(S.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=S.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>S.set(t,e))}const n=this._buildAnimation(i.namespaceId,o,T,s,C,I);if(i.setRealPlayer(n),e===x)k.push(i);else{const t=this.playersByElement.get(e);t&&t.length&&(i.parentPlayer=j(t)),r.push(i)}}else _e(t,o.fromStyles),i.onDestroy(()=>ve(t,o.toStyles)),A.push(i),l.has(t)&&r.push(i)}),A.forEach(e=>{const t=s.get(e.element);if(t&&t.length){const n=j(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let N=0;N<m.length;N++){const e=m[N],t=e.__ng_removed;if(At(e,oe),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,ce,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?xt(this,e,r):this.processLeaveNode(e)}return m.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let i=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(i=t)}else{const t=this.playersByElement.get(e);if(t){const e=!s||s==vt;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&i.push(t)})}}return(n||r)&&(i=i.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),i}_beforeAnimationBuild(e,t,n){const r=t.element,s=t.isRemovalTransition?void 0:e,i=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==r,u=$(n,e,[]);this._getPreviousPlayers(e,a,s,i,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),u.push(e)})}_e(r,t.fromStyles)}_buildAnimation(e,t,n,r,s,i){const o=t.triggerName,a=t.element,u=[],l=new Set,c=new Set,h=t.timelines.map(t=>{const h=t.element;l.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new F.ZN(t.duration,t.delay);const f=h!==a,p=function(e){const t=[];return Nt(e,t),t}((n.get(h)||pt).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=s.get(h),g=i.get(h),y=V(0,this._normalizer,0,t.keyframes,m,g),v=this._buildPlayer(t,y,p);if(t.subTimeline&&r&&c.add(h),f){const t=new Tt(e,o,h);t.setRealPlayer(v),u.push(t)}return v});u.forEach(e=>{$(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),l.forEach(e=>kt(e,le));const d=j(h);return d.onDestroy(()=>{l.forEach(e=>At(e,le)),ve(a,t.toStyles)}),c.forEach(e=>{$(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new F.ZN(e.duration,e.delay)}}class Tt{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new F.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>q(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function St(e){return e&&1===e.nodeType}function Et(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function It(e,t,n,r,s){const i=[];n.forEach(e=>i.push(Et(e)));const o=[];r.forEach((n,r)=>{const i={};n.forEach(e=>{const n=i[e]=t.computeStyle(r,e,s);n&&0!=n.length||(r.__ng_removed=gt,o.push(r))}),e.set(r,i)});let a=0;return n.forEach(e=>Et(e,i[a++])),o}function Ct(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),s=new Map;function i(e){if(!e)return 1;let t=s.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:i(o),s.set(e,t),t}return t.forEach(e=>{const t=i(e);1!==t&&n.get(t).push(e)}),n}function kt(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function At(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function xt(e,t,n){j(n).onDone(()=>e.processLeaveNode(t))}function Nt(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof F.ZE?Nt(r.players,t):t.push(r)}}function Rt(e,t,n){const r=n.get(e);if(!r)return!1;let s=t.get(e);return s?r.forEach(e=>s.add(e)):t.set(e,r),n.delete(e),!0}class Ot{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new bt(e,t,n),this._timelineEngine=new ct(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,s){const i=e+"-"+r;let o=this._triggerCache[i];if(!o){const e=[],t=Me(this._driver,s,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,n){return new at(e,t,n)}(r,t,this._normalizer),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,s]=H(n);this._timelineEngine.command(e,t,s,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[e,r]=H(n);return this._timelineEngine.listen(e,t,r,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Dt(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=Lt(t[0]),t.length>1&&(r=Lt(t[t.length-1]))):t&&(n=Lt(t)),n||r?new Pt(e,n,r):null}class Pt{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let r=Pt.initialStylesByElement.get(e);r||Pt.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&ve(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ve(this._element,this._initialStyles),this._endStyles&&(ve(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Pt.initialStylesByElement.delete(this._element),this._startStyles&&(_e(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_e(this._element,this._endStyles),this._endStyles=null),ve(this._element,this._initialStyles),this._state=3)}}function Lt(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const s=n[r];Ft(s)&&(t=t||{},t[s]=e[s])}return t}function Ft(e){return"display"===e||"position"===e}Pt.initialStylesByElement=new WeakMap;const Mt="animation",Ut="animationend";class jt{constructor(e,t,n,r,s,i,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=s,this._fillMode=i,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=Ht(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),$t(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Bt(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Vt(this._element,this._name,"paused")}resume(){Vt(this._element,this._name,"running")}setPosition(e){const t=qt(this._element,this._name);this._position=e*this._duration,$t(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Bt(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Ht(e,"").split(","),r=zt(n,t);r>=0&&(n.splice(r,1),$t(e,"",n.join(",")))}(this._element,this._name))}}function Vt(e,t,n){$t(e,"PlayState",n,qt(e,t))}function qt(e,t){const n=Ht(e,"");return n.indexOf(",")>0?zt(n.split(","),t):zt([n],t)}function zt(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function Bt(e,t,n){n?e.removeEventListener(Ut,t):e.addEventListener(Ut,t)}function $t(e,t,n,r){const s=Mt+t;if(null!=r){const t=e.style[s];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[s]=n}function Ht(e,t){return e.style[Mt+t]||""}class Zt{constructor(e,t,n,r,s,i,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=s,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=i||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new jt(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:Ne(this.element,n))})}this.currentSnapshot=e}}class Gt extends F.ZN{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=ne(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Kt{constructor(){this._count=0}validateStyleProperty(e){return J(e)}matchesElement(e,t){return X(e,t)}containsElement(e,t){return ee(e,t)}query(e,t,n){return te(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>ne(e));let r=`@keyframes ${t} {\n`,s="";n.forEach(e=>{s=" ";const t=parseFloat(e.offset);r+=`${s}${100*t}% {\n`,s+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${s}animation-timing-function: ${n};\n`));default:return void(r+=`${s}${t}: ${n};\n`)}}),r+=`${s}}\n`}),r+="}\n";const i=document.createElement("style");return i.textContent=r,i}animate(e,t,n,r,s,i=[],o){const a=i.filter(e=>e instanceof Zt),u={};ke(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>u[e]=t[e])});const l=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=Ae(e,t,u));if(0==n)return new Gt(e,l);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,c,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=Dt(e,t),f=new Zt(e,t,c,n,r,s,l,d);return f.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),f}}class Wt{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Ne(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Qt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Yt().toString()),this._cssKeyframesDriver=new Kt}validateStyleProperty(e){return J(e)}matchesElement(e,t){return X(e,t)}containsElement(e,t){return ee(e,t)}query(e,t,n){return te(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,s,i=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,s,i);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(a.easing=s);const u={},l=i.filter(e=>e instanceof Wt);ke(n,r)&&l.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>u[e]=t[e])});const c=Dt(e,t=Ae(e,t=t.map(e=>me(e,!1)),u));return new Wt(e,t,a,c)}}function Yt(){return M()&&Element.prototype.animate||{}}let Jt=(()=>{class e extends F._j{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?(0,F.vP)(e):e;return tn(this._renderer,null,t,"register",[n]),new Xt(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.FYo),s.LFG(r.K0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class Xt extends F.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new en(this._id,e,t||{},this._renderer)}}class en{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tn(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function tn(e,t,n,r,s){return e.setProperty(t,`@@${n}:${r}`,s)}const nn="@",rn="@.disabled";let sn=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new on("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);const i=t=>{Array.isArray(t)?t.forEach(i):this.engine.registerTrigger(r,s,e,t.name,t)};return t.data.animation.forEach(i),new an(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.FYo),s.LFG(Ot),s.LFG(s.R0b))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class on{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==nn&&t==rn?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class an extends on{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==nn?"."==t.charAt(1)&&t==rn?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==nn){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let s=t.substr(1),i="";return s.charAt(0)!=nn&&([s,i]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,i,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let un=(()=>{class e extends Ot{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.K0),s.LFG(se),s.LFG(et))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const ln=new s.OlP("AnimationModuleType"),cn=[{provide:F._j,useClass:Jt},{provide:et,useFactory:function(){return new tt}},{provide:Ot,useClass:un},{provide:s.FYo,useFactory:function(e,t,n){return new sn(e,t,n)},deps:[S,Ot,s.R0b]}],hn=[{provide:se,useFactory:function(){return"function"==typeof Yt()?new Qt:new Kt}},{provide:ln,useValue:"BrowserAnimations"},...cn],dn=[{provide:se,useClass:re},{provide:ln,useValue:"NoopAnimations"},...cn];let fn=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?dn:hn}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:hn,imports:[L]}),e})();var pn=n(906),mn=n(8002),gn=n(7556);let yn=(()=>{class e{constructor(e,t){this.auth=e,this.router=t}canActivate(e,t){return this.auth.user$.pipe((0,mn.U)(e=>!e||(this.router.navigateByUrl("/"),!1)))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(gn.e),s.LFG(pn.F0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const vn=[{path:"posts",canActivate:[(()=>{class e{constructor(e,t){this.auth=e,this.router=t}canActivate(e,t){return this.auth.user$.pipe((0,mn.U)(e=>!!e||(this.router.navigateByUrl("/auth"),!1)))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(gn.e),s.LFG(pn.F0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()],loadChildren:()=>n.e(488).then(n.bind(n,9488)).then(e=>e.PostsModule)},{path:"auth",canActivate:[yn],loadChildren:()=>n.e(728).then(n.bind(n,7728)).then(e=>e.AuthModule)},{path:"",pathMatch:"full",redirectTo:"posts"}];let _n=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[pn.Bz.forRoot(vn)],pn.Bz]}),e})();function wn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",10),s.NdJ("click",function(t){s.CHM(e),s.oxw();const n=s.MAs(9);return s.oxw().onCloseMenu(t,n)},!1,s.Jf7),s.TgZ(1,"a",11),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).signOut()}),s._UZ(2,"i",12),s._uU(3," Sign Out"),s.qZA(),s.qZA()}}function bn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"header"),s.TgZ(1,"div",1),s.TgZ(2,"a",2),s.TgZ(3,"h2",3),s._uU(4,"MyApp"),s.qZA(),s.qZA(),s.TgZ(5,"div",4),s.TgZ(6,"span",5),s._uU(7),s.qZA(),s.TgZ(8,"div",6,7),s.NdJ("click",function(){return s.CHM(e),s.oxw().toggleMenu()}),s.TgZ(10,"span",8),s._uU(11),s.qZA(),s.qZA(),s.YNc(12,wn,4,0,"div",9),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.ngIf,n=s.oxw();s.xp6(7),s.Oqu(e.name),s.xp6(4),s.Oqu(e.name[0]),s.xp6(1),s.Q6J("ngIf",n.showMenu)}}function Tn(e,t){1&e&&(s.TgZ(0,"footer"),s.TgZ(1,"h5"),s._uU(2,"Contact to me"),s.qZA(),s.TgZ(3,"a",13),s._uU(4,"raalarcon9705@gmail.com"),s.qZA(),s.qZA())}let Sn=(()=>{class e{constructor(e){this.auth=e,this.title="posts",this.user$=this.auth.user$,this.showMenu=!1}signOut(){this.showMenu=!1,this.auth.signOut()}toggleMenu(){this.showMenu=!this.showMenu}onCloseMenu(e,t){t.contains(e.target)||(this.showMenu=!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(gn.e))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-root"]],decls:6,vars:6,consts:[[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],["routerLink","/"],[1,"margin-0"],[1,"d-flex","align-items-center"],[2,"margin-right","5px"],[1,"avatar","togle-menu",3,"click"],["toggleButton",""],[1,"letter"],["class","menu",3,"click",4,"ngIf"],[1,"menu",3,"click"],[3,"click"],[1,"fas","fa-sign-out-alt"],["href","mailto:raalarcon9705@gmail.com"]],template:function(e,t){1&e&&(s.YNc(0,bn,13,3,"header",0),s.ALo(1,"async"),s.TgZ(2,"main"),s._UZ(3,"router-outlet"),s.qZA(),s.YNc(4,Tn,5,0,"footer",0),s.ALo(5,"async")),2&e&&(s.Q6J("ngIf",s.lcZ(1,2,t.user$)),s.xp6(4),s.Q6J("ngIf",s.lcZ(5,4,t.user$)))},directives:[r.O5,pn.lC,pn.yS],pipes:[r.Ov],styles:["[_nghost-%COMP%]{display:flex;min-height:100vh;flex-direction:column}main[_ngcontent-%COMP%]{flex:1;height:0}header[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#faa2c1;padding:10px;margin-bottom:16px}footer[_ngcontent-%COMP%]{background-color:#e0e0e0;padding:20px;text-align:center}.avatar[_ngcontent-%COMP%]{cursor:pointer}.menu[_ngcontent-%COMP%]{position:absolute;z-index:1000;right:10px;top:55px;background-color:#fff;border-radius:1rem;padding:20px;box-shadow:0 2px 5px 0 #00000029,0 2px 10px 0 #0000001f;transition:opacity .2s}"]}),e})();var En=n(1841),In=n(2340),Cn=n(8006),kn=n(5391),An=n(8939),xn=n(7393);class Nn{constructor(e){this.total=e}call(e,t){return t.subscribe(new Rn(e,this.total))}}class Rn extends xn.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}var On=n(5917),Dn=n(3342);const Pn=[{provide:s.ip1,useFactory:e=>()=>new Promise(t=>{e.user$.pipe(e=>e.lift(new Nn(1))).subscribe(()=>t())}),deps:[gn.e],multi:!0}],Ln=[{provide:En.TP,useClass:(()=>{class e{constructor(){this._cache=new Map}intercept(e,t){if("GET"!==e.method)return t.handle(e);e.headers.get("reset")&&this._cache.delete(e.urlWithParams);const n=this._cache.get(e.urlWithParams);return n?(0,On.of)(n.clone()):t.handle(e).pipe((0,Dn.b)(t=>{t instanceof En.Zn&&this._cache.set(e.urlWithParams,t.clone())}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),multi:!0}];let Fn=(()=>{class e{constructor(e){if(e)throw new Error("Core Module is already loaded. Import only in AppModule")}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(e,12))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[...Pn,...Ln],imports:[[En.JF,An.hO.initializeApp(In.N.firebaseConfig),Cn.ww,kn.yb],En.JF]}),e})(),Mn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e,bootstrap:[Sn]}),e.\u0275inj=s.cJS({providers:[],imports:[[L,_n,fn,Fn]]}),e})();In.N.production&&(0,s.G48)(),D().bootstrapModule(Mn).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,s,i,o){try{var a=e[i](o),u=a.value}catch(l){return void n(l)}a.done?t(u):Promise.resolve(u).then(r,s)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(s,i){var o=e.apply(t,n);function a(e){r(o,s,i,a,u,"next",e)}function u(e){r(o,s,i,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>s})},4762:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>s,pi:()=>i,_T:()=>o,mG:()=>a,Jh:()=>u,XA:()=>l,CR:()=>c,ev:()=>h});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function a(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function a(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(a){i=[6,a],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}}},e=>{"use strict";e(e.s=3674)}]);